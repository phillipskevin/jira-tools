(function(e,t){"undefined"==typeof process&&(e.process={argv:[],cwd:function(){return""},browser:!0,env:{NODE_ENV:t||"development"},version:"",platform:e.navigator&&e.navigator.userAgent&&/Windows/.test(e.navigator.userAgent)?"win":""})})("object"==typeof self&&self.Object==Object?self:"object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)?global:window,"development");var canNamespace_1_0_0_canNamespace={};const lifecycleStatusSymbol=Symbol.for("can.lifecycleStatus"),inSetupSymbol=Symbol.for("can.initializing"),teardownHandlersSymbol=Symbol.for("can.teardownHandlers");function defineConfigurableNonEnumerable(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}var mixinLifecycleMethods=function(e=HTMLElement){return class extends e{constructor(){if(super(),arguments.length)throw new Error("can-stache-element: Do not pass arguments to the constructor. Initial property values should be passed to the `initialize` hook.");defineConfigurableNonEnumerable(this,inSetupSymbol,!0),defineConfigurableNonEnumerable(this,lifecycleStatusSymbol,{initialized:!1,rendered:!1,connected:!1,disconnected:!1}),defineConfigurableNonEnumerable(this,teardownHandlersSymbol,[])}connectedCallback(e){return this.initialize(e),this.render(),this.connect(),this}disconnectedCallback(){return this.disconnect(),this}initialize(e){const t=this[lifecycleStatusSymbol];return t.initialized?this:(this[inSetupSymbol]=!0,super.initialize&&super.initialize(e),this[inSetupSymbol]=!1,t.initialized=!0,this)}render(e){const t=this[lifecycleStatusSymbol];return t.rendered?this:(t.initialized||this.initialize(e),super.render&&super.render(e),t.rendered=!0,this)}connect(e){const t=this[lifecycleStatusSymbol];if(t.connected)return this;if(t.initialized||this.initialize(e),t.rendered||this.render(e),super.connect&&super.connect(e),this.connected){let e=this.connected();"function"==typeof e&&this[teardownHandlersSymbol].push(e)}return t.connected=!0,t.disconnected=!1,this}disconnect(){const e=this[lifecycleStatusSymbol];if(e.disconnected)return this;super.disconnect&&super.disconnect(),this.stopListening&&this.stopListening();for(let e of this[teardownHandlersSymbol])e.call(this);return this.disconnected&&this.disconnected(),this[lifecycleStatusSymbol]={initialized:!1,rendered:!1,connected:!1,disconnected:!0},this}}};function createConstructorFunction(e,t){function n(){return Reflect.construct(e,arguments,this.constructor)}function a(e,t){n[t]||Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}"undefined"==typeof t&&(t=Object.getPrototypeOf(Object)),n.prototype=Object.create(e.prototype),n.prototype.constructor=n;for(let n=e;n!==t&&null!==n;){const e=Object.getOwnPropertyNames(n);e.forEach(function(e){a(n,e)});const t=Object.getOwnPropertySymbols(n);t.forEach(function(e){a(n,e)}),n=Object.getPrototypeOf(n)}return n}var createConstructorFunction_1=createConstructorFunction,supportsNativeSymbols=function(){var e="undefined"!=typeof Symbol&&"function"==typeof Symbol.for;if(!e)return!1;var t=Symbol("a symbol for testing symbols");return"symbol"==typeof t}(),CanSymbol;if(supportsNativeSymbols)CanSymbol=Symbol;else{var symbolNum=0;CanSymbol=function(e){var t="@@symbol"+symbolNum++ +e,n={};return Object.defineProperties(n,{toString:{value:function(){return t}}}),n};var descriptionToSymbol={},symbolToDescription={};CanSymbol.for=function(e){var t=descriptionToSymbol[e];return t||(t=descriptionToSymbol[e]=CanSymbol(e),symbolToDescription[t]=e),t},CanSymbol.keyFor=function(e){return symbolToDescription[e]},["hasInstance","isConcatSpreadable","iterator","match","prototype","replace","search","species","split","toPrimitive","toStringTag","unscopables"].forEach(function(e){CanSymbol[e]=CanSymbol("Symbol."+e)})}["isMapLike","isListLike","isValueLike","isFunctionLike","getOwnKeys","getOwnKeyDescriptor","proto","getOwnEnumerableKeys","hasOwnKey","hasKey","size","getName","getIdentity","assignDeep","updateDeep","getValue","setValue","getKeyValue","setKeyValue","updateValues","addValue","removeValues","apply","new","onValue","offValue","onKeyValue","offKeyValue","getKeyDependencies","getValueDependencies","keyHasDependencies","valueHasDependencies","onKeys","onKeysAdded","onKeysRemoved","onPatches"].forEach(function(e){CanSymbol.for("can."+e)});var canSymbol_1_6_5_canSymbol=canNamespace_1_0_0_canNamespace.Symbol=CanSymbol,helpers={makeGetFirstSymbolValue:function(e){var t=e.map(function(e){return canSymbol_1_6_5_canSymbol.for(e)}),n=t.length;return function(e){for(var a=-1;++a<n;)if(e[t[a]]!==void 0)return e[t[a]]}},hasLength:function(e){var t=typeof e;if("string"==t||Array.isArray(e))return!0;var n=e&&"boolean"!==t&&"number"!==t&&"length"in e&&e.length;return"function"!=typeof e&&(0===n||"number"==typeof n&&0<n&&n-1 in e)}},plainFunctionPrototypePropertyNames=Object.getOwnPropertyNames(function(){}.prototype),plainFunctionPrototypeProto=Object.getPrototypeOf(function(){}.prototype);function isConstructorLike(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.new")];if(t!==void 0)return t;if("function"!=typeof e)return!1;var n=e.prototype;if(!n)return!1;if(plainFunctionPrototypeProto!==Object.getPrototypeOf(n))return!0;var a=Object.getOwnPropertyNames(n);if(a.length===plainFunctionPrototypePropertyNames.length){for(var o=0,r=a.length;o<r;o++)if(a[o]!==plainFunctionPrototypePropertyNames[o])return!0;return!1}return!0}var getNewOrApply=helpers.makeGetFirstSymbolValue(["can.new","can.apply"]);function isFunctionLike(e){var t=!!e&&e[canSymbol_1_6_5_canSymbol.for("can.isFunctionLike")],n;return void 0===t?(n=getNewOrApply(e),void 0===n?"function"==typeof e:!!n):t}function isPrimitive(e){var t=typeof e;return!(null!=e&&("function"===t||"object"===t))}var coreHasOwn=Object.prototype.hasOwnProperty,funcToString=Function.prototype.toString,objectCtorString=funcToString.call(Object);function isPlainObject(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(t===Object.prototype||null===t)return!0;var n=coreHasOwn.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&funcToString.call(n)===objectCtorString}function isBuiltIn(e){return!!(isPrimitive(e)||Array.isArray(e)||isPlainObject(e)||"[object Object]"!==Object.prototype.toString.call(e)&&-1!==Object.prototype.toString.call(e).indexOf("[object "))}function isValueLike(e){var t;if(isPrimitive(e))return!0;if(t=e[canSymbol_1_6_5_canSymbol.for("can.isValueLike")],"undefined"!=typeof t)return t;var n=e[canSymbol_1_6_5_canSymbol.for("can.getValue")];if(void 0!==n)return!!n}function isMapLike(e){if(isPrimitive(e))return!1;var t=e[canSymbol_1_6_5_canSymbol.for("can.isMapLike")];if("undefined"!=typeof t)return!!t;var n=e[canSymbol_1_6_5_canSymbol.for("can.getKeyValue")];return!(void 0!==n)||!!n}var onValueSymbol=canSymbol_1_6_5_canSymbol.for("can.onValue"),onKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),onPatchesSymbol=canSymbol_1_6_5_canSymbol.for("can.onPatches");function isObservableLike(e){return!isPrimitive(e)&&!!(e[onValueSymbol]||e[onKeyValueSymbol]||e[onPatchesSymbol])}function isListLike(e){var t;if("string"==typeof e)return!0;if(isPrimitive(e))return!1;if(t=e[canSymbol_1_6_5_canSymbol.for("can.isListLike")],"undefined"!=typeof t)return t;var n=e[canSymbol_1_6_5_canSymbol.iterator];return void 0===n?!!Array.isArray(e)||helpers.hasLength(e):!!n}var supportsNativeSymbols$1=function(){var e="undefined"!=typeof Symbol&&"function"==typeof Symbol.for;if(!e)return!1;var t=Symbol("a symbol for testing symbols");return"symbol"==typeof t}(),isSymbolLike;if(supportsNativeSymbols$1)isSymbolLike=function(e){return"symbol"==typeof e};else{var symbolStart="@@symbol";isSymbolLike=function(e){return!("object"!=typeof e||Array.isArray(e))&&e.toString().substr(0,symbolStart.length)===symbolStart}}var type={isConstructorLike:isConstructorLike,isFunctionLike:isFunctionLike,isListLike:isListLike,isMapLike:isMapLike,isObservableLike:isObservableLike,isPrimitive:isPrimitive,isBuiltIn:isBuiltIn,isValueLike:isValueLike,isSymbolLike:isSymbolLike,isMoreListLikeThanMapLike:function(e){if(Array.isArray(e))return!0;if(e instanceof Array)return!0;if(null==e)return!1;var t=e[canSymbol_1_6_5_canSymbol.for("can.isMoreListLikeThanMapLike")];if(t!==void 0)return t;var n=this.isListLike(e),a=this.isMapLike(e);if(n&&!a)return!0;return(n||!a)&&void 0},isIteratorLike:function(e){return e&&"object"==typeof e&&"function"==typeof e.next&&0===e.next.length},isPromise:function(e){return e instanceof Promise||"[object Promise]"===Object.prototype.toString.call(e)},isPlainObject:isPlainObject},call={call:function(e,t){var n=[].slice.call(arguments,2),a=e[canSymbol_1_6_5_canSymbol.for("can.apply")];return a?a.call(e,t,n):e.apply(t,n)},apply:function(e,t,n){var a=e[canSymbol_1_6_5_canSymbol.for("can.apply")];return a?a.call(e,t,n):e.apply(t,n)},new:function(e){var t=[].slice.call(arguments,1),n=e[canSymbol_1_6_5_canSymbol.for("can.new")];if(n)return n.apply(e,t);var a=Object.create(e.prototype),o=e.apply(a,t);return type.isPrimitive(o)?a:o}},setKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.setKeyValue"),getKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.getKeyValue"),getValueSymbol=canSymbol_1_6_5_canSymbol.for("can.getValue"),setValueSymbol=canSymbol_1_6_5_canSymbol.for("can.setValue"),reflections={setKeyValue:function(e,t,n){if(type.isSymbolLike(t))return void("symbol"==typeof t?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,value:n,writable:!0}));var a=e[setKeyValueSymbol];return void 0===a?void(e[t]=n):a.call(e,t,n)},getKeyValue:function(e,t){var n=e[getKeyValueSymbol];return n?n.call(e,t):e[t]},deleteKeyValue:function(e,t){var n=e[canSymbol_1_6_5_canSymbol.for("can.deleteKeyValue")];return n?n.call(e,t):void delete e[t]},getValue:function(e){if(type.isPrimitive(e))return e;var t=e[getValueSymbol];return t?t.call(e):e},setValue:function(e,t){var n=e&&e[setValueSymbol];if(n)return n.call(e,t);throw new Error("can-reflect.setValue - Can not set value.")},splice:function(e,t,n,a){var o;if("number"!=typeof n){var r=e[canSymbol_1_6_5_canSymbol.for("can.updateValues")];if(r)return r.call(e,t,n,a);o=n.length}else o=n;3>=arguments.length&&(a=[]);var i=e[canSymbol_1_6_5_canSymbol.for("can.splice")];return i?i.call(e,t,o,a):[].splice.apply(e,[t,o].concat(a))},addValues:function(e,t,n){var a=e[canSymbol_1_6_5_canSymbol.for("can.addValues")];return a?a.call(e,t,n):Array.isArray(e)&&void 0===n?e.push.apply(e,t):reflections.splice(e,n,[],t)},removeValues:function(e,t,n){var a=e[canSymbol_1_6_5_canSymbol.for("can.removeValues")];return a?a.call(e,t,n):Array.isArray(e)&&void 0===n?void t.forEach(function(t){var n=e.indexOf(t);0<=n&&e.splice(n,1)}):reflections.splice(e,n,t,[])}};reflections.get=reflections.getKeyValue,reflections.set=reflections.setKeyValue,reflections["delete"]=reflections.deleteKeyValue;var getSet=reflections,slice=[].slice;function makeFallback(e,t){return function(n,a,o,r){var i=n[canSymbol_1_6_5_canSymbol.for(e)];return void 0===i?this[t].apply(this,arguments):i.call(n,a,o,r)}}function makeErrorIfMissing(e,t){return function(n){var a=n[canSymbol_1_6_5_canSymbol.for(e)];if(a!==void 0){var o=slice.call(arguments,1);return a.apply(n,o)}throw new Error(t)}}var observe={onKeyValue:makeFallback("can.onKeyValue","onEvent"),offKeyValue:makeFallback("can.offKeyValue","offEvent"),onKeys:makeErrorIfMissing("can.onKeys","can-reflect: can not observe an onKeys event"),onKeysAdded:makeErrorIfMissing("can.onKeysAdded","can-reflect: can not observe an onKeysAdded event"),onKeysRemoved:makeErrorIfMissing("can.onKeysRemoved","can-reflect: can not unobserve an onKeysRemoved event"),getKeyDependencies:makeErrorIfMissing("can.getKeyDependencies","can-reflect: can not determine dependencies"),getWhatIChange:makeErrorIfMissing("can.getWhatIChange","can-reflect: can not determine dependencies"),getChangesDependencyRecord:function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord")];if("function"==typeof t)return t()},keyHasDependencies:makeErrorIfMissing("can.keyHasDependencies","can-reflect: can not determine if this has key dependencies"),onValue:makeErrorIfMissing("can.onValue","can-reflect: can not observe value change"),offValue:makeErrorIfMissing("can.offValue","can-reflect: can not unobserve value change"),getValueDependencies:makeErrorIfMissing("can.getValueDependencies","can-reflect: can not determine dependencies"),valueHasDependencies:makeErrorIfMissing("can.valueHasDependencies","can-reflect: can not determine if value has dependencies"),onPatches:makeErrorIfMissing("can.onPatches","can-reflect: can not observe patches on object"),offPatches:makeErrorIfMissing("can.offPatches","can-reflect: can not unobserve patches on object"),onInstancePatches:makeErrorIfMissing("can.onInstancePatches","can-reflect: can not observe onInstancePatches on Type"),offInstancePatches:makeErrorIfMissing("can.offInstancePatches","can-reflect: can not unobserve onInstancePatches on Type"),onInstanceBoundChange:makeErrorIfMissing("can.onInstanceBoundChange","can-reflect: can not observe bound state change in instances."),offInstanceBoundChange:makeErrorIfMissing("can.offInstanceBoundChange","can-reflect: can not unobserve bound state change"),isBound:makeErrorIfMissing("can.isBound","can-reflect: cannot determine if object is bound"),onEvent:function(e,t,n,a){if(e){var o=e[canSymbol_1_6_5_canSymbol.for("can.onEvent")];if(o!==void 0)return o.call(e,t,n,a);e.addEventListener&&e.addEventListener(t,n,a)}},offEvent:function(e,t,n,a){if(e){var o=e[canSymbol_1_6_5_canSymbol.for("can.offEvent")];if(o!==void 0)return o.call(e,t,n,a);e.removeEventListener&&e.removeEventListener(t,n,a)}},setPriority:function(e,t){if(e){var n=e[canSymbol_1_6_5_canSymbol.for("can.setPriority")];if(void 0!==n)return n.call(e,t),!0}return!1},getPriority:function(e){if(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getPriority")];if(t!==void 0)return t.call(e)}}},getPrototypeOfWorksWithPrimitives=!0;try{}catch(t){getPrototypeOfWorksWithPrimitives=!1}var ArrayMap;if("function"==typeof Map)ArrayMap=Map;else{var isEven=function(e){return 0==e%2};ArrayMap=function(){this.contents=[]},ArrayMap.prototype={_getIndex:function(e){var t;do t=this.contents.indexOf(e,t);while(-1!==t&&!isEven(t));return t},has:function(e){return-1!==this._getIndex(e)},get:function(e){var t=this._getIndex(e);if(-1!==t)return this.contents[t+1]},set:function(e,t){var n=this._getIndex(e);-1===n?(this.contents.push(e),this.contents.push(t)):this.contents[n+1]=t},delete:function(e){var t=this._getIndex(e);-1!==t&&this.contents.splice(t,2)}}}var hasOwnProperty=Object.prototype.hasOwnProperty,shiftFirstArgumentToThis=function(e){return function(){var t=[this];return t.push.apply(t,arguments),e.apply(null,t)}},getKeyValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getKeyValue"),shiftedGetKeyValue=shiftFirstArgumentToThis(getSet.getKeyValue),setKeyValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.setKeyValue"),shiftedSetKeyValue=shiftFirstArgumentToThis(getSet.setKeyValue),sizeSymbol=canSymbol_1_6_5_canSymbol.for("can.size"),hasUpdateSymbol=helpers.makeGetFirstSymbolValue(["can.updateDeep","can.assignDeep","can.setKeyValue"]),shouldUpdateOrAssign=function(e){return type.isPlainObject(e)||Array.isArray(e)||!!hasUpdateSymbol(e)},shapeReflections;function isSerializedHelper(e){return!!type.isPrimitive(e)||!hasUpdateSymbol(e)&&type.isBuiltIn(e)&&!type.isPlainObject(e)&&!Array.isArray(e)&&!type.isObservableLike(e)}var Object_Keys;try{Object_Keys=Object.keys}catch(t){Object_Keys=function(e){return type.isPrimitive(e)?[]:Object.keys(e)}}function createSerializeMap(e){var t=e||ArrayMap;return{unwrap:new t,serialize:new t,isSerializing:{unwrap:new t,serialize:new t},circularReferenceIsSerializing:{unwrap:new t,serialize:new t}}}function makeSerializer(e,t){function n(e){this.first=!a,this.first&&(a=createSerializeMap(e)),this.map=a,this.result=null}var a=null;return n.prototype.end=function(){return this.first&&(a=null),this.result},function a(o,r){if(isSerializedHelper(o))return o;var s=new n(r);if(type.isValueLike(o))s.result=this[e](getSet.getValue(o));else{var l=type.isIteratorLike(o)||type.isMoreListLikeThanMapLike(o);if(s.result=l?[]:{},s.map[e].has(o))return s.map.isSerializing[e].has(o)&&s.map.circularReferenceIsSerializing[e].set(o,!0),s.map[e].get(o);s.map[e].set(o,s.result);for(var d=0,p=t.length,a;d<p;d++)if(a=o[t[d]],a){s.map.isSerializing[e].set(o,!0);var c=s.result;if(s.result=a.call(o,c),s.map.isSerializing[e].delete(o),s.result!==c){if(s.map.circularReferenceIsSerializing[e].has(o))throw s.end(),new Error("Cannot serialize cirular reference!");s.map[e].set(o,s.result)}return s.end()}"function"==typeof obj?(s.map[e].set(o,o),s.result=o):l?this.eachIndex(o,function(t,n){s.result[n]=this[e](t)},this):this.eachKey(o,function(t,n){s.result[n]=this[e](t)},this)}return s.end()}}var makeMap="undefined"==typeof Map?function(e){var t={};return e.forEach(function(e){t[e]=!0}),{get:function(e){return t[e]},set:function(e,n){t[e]=n},keys:function(){return e}}}:function(e){var t=new Map;return shapeReflections.eachIndex(e,function(e){t.set(e,!0)}),t};var fastHasOwnKey=function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.hasOwnKey")];if(t)return t.bind(e);var n=makeMap(shapeReflections.getOwnEnumerableKeys(e));return function(e){return n.get(e)}};function addPatch(e,t){var n=e[e.length-1];return n&&n.deleteCount===n.insert.length&&t.index-n.index===n.deleteCount?(n.insert.push.apply(n.insert,t.insert),void(n.deleteCount+=t.deleteCount)):void e.push(t)}function updateDeepList(e,t,n){var a=this.toArray(t),o=[],r=-1;this.eachIndex(e,function(t,i){if(r=i,i>=a.length)return n||addPatch(o,{index:i,deleteCount:e.length-i+1,insert:[]}),!1;var s=a[i];type.isPrimitive(t)||type.isPrimitive(s)||!1===shouldUpdateOrAssign(t)?addPatch(o,{index:i,deleteCount:1,insert:[s]}):!0===n?this.assignDeep(t,s):this.updateDeep(t,s)},this),a.length>r&&addPatch(o,{index:r+1,deleteCount:0,insert:a.slice(r+1)});for(var s=0,l=o.length,d;s<l;s++)d=o[s],getSet.splice(e,d.index,d.deleteCount,d.insert);return e}shapeReflections={each:function(e,t,n){return type.isIteratorLike(e)||type.isMoreListLikeThanMapLike(e)?shapeReflections.eachIndex(e,t,n):shapeReflections.eachKey(e,t,n)},eachIndex:function(e,t,n){if(Array.isArray(e))return shapeReflections.eachListLike(e,t,n);var a=e[canSymbol_1_6_5_canSymbol.iterator],o;if(type.isIteratorLike(e)?o=e:a&&(o=a.call(e)),o)for(var r=0,i;!(i=o.next()).done&&!1!==t.call(n||e,i.value,r++,e););else shapeReflections.eachListLike(e,t,n);return e},eachListLike:function(e,t,n){var a=-1,o=e.length;if(o===void 0){var r=e[sizeSymbol];if(r)o=r.call(e);else throw new Error("can-reflect: unable to iterate.")}for(;++a<o;){var i=e[a];if(!1===t.call(n||i,i,a,e))break}return e},toArray:function(e){var t=[];return shapeReflections.each(e,function(e){t.push(e)}),t},eachKey:function(e,t,n){if(e){var a=shapeReflections.getOwnEnumerableKeys(e),o=e[getKeyValueSymbol$1]||shiftedGetKeyValue;return shapeReflections.eachIndex(a,function(a){var r=o.call(e,a);return t.call(n||e,r,a,e)})}return e},hasOwnKey:function(e,t){var n=e[canSymbol_1_6_5_canSymbol.for("can.hasOwnKey")];if(n)return n.call(e,t);var a=e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeys")];if(a){var o=!1;return shapeReflections.eachIndex(a.call(e),function(e){if(e===t)return o=!0,!1}),o}return hasOwnProperty.call(e,t)},getOwnEnumerableKeys:function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getOwnEnumerableKeys")];if(t)return t.call(e);if(e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeys")]&&e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeyDescriptor")]){var n=[];return shapeReflections.eachIndex(shapeReflections.getOwnKeys(e),function(t){var a=shapeReflections.getOwnKeyDescriptor(e,t);a.enumerable&&n.push(t)},this),n}return Object_Keys(e)},getOwnKeys:function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeys")];return t?t.call(e):Object.getOwnPropertyNames(e)},getOwnKeyDescriptor:function(e,t){var n=e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeyDescriptor")];return n?n.call(e,t):Object.getOwnPropertyDescriptor(e,t)},unwrap:makeSerializer("unwrap",[canSymbol_1_6_5_canSymbol.for("can.unwrap")]),serialize:makeSerializer("serialize",[canSymbol_1_6_5_canSymbol.for("can.serialize"),canSymbol_1_6_5_canSymbol.for("can.unwrap")]),assignMap:function(e,t){var n=fastHasOwnKey(e),a=e[getKeyValueSymbol$1]||shiftedGetKeyValue,o=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(t,function(t,r){n(r)&&a.call(e,r)===t||o.call(e,r,t)}),e},assignList:function(e,t){var n=shapeReflections.toArray(t);return getSet.splice(e,0,n,n),e},assign:function(e,t){return type.isIteratorLike(t)||type.isMoreListLikeThanMapLike(t)?shapeReflections.assignList(e,t):shapeReflections.assignMap(e,t),e},assignDeepMap:function(e,t){var n=fastHasOwnKey(e),a=e[getKeyValueSymbol$1]||shiftedGetKeyValue,o=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(t,function(t,r){if(!n(r))getSet.setKeyValue(e,r,t);else{var i=a.call(e,r);t===i||(type.isPrimitive(i)||type.isPrimitive(t)||!1===shouldUpdateOrAssign(i)?o.call(e,r,t):shapeReflections.assignDeep(i,t))}},this),e},assignDeepList:function(e,t){return updateDeepList.call(this,e,t,!0)},assignDeep:function(e,t){var n=e[canSymbol_1_6_5_canSymbol.for("can.assignDeep")];return n?n.call(e,t):type.isMoreListLikeThanMapLike(t)?shapeReflections.assignDeepList(e,t):shapeReflections.assignDeepMap(e,t),e},updateMap:function(e,t){var n=makeMap(shapeReflections.getOwnEnumerableKeys(t)),a=t[getKeyValueSymbol$1]||shiftedGetKeyValue,o=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(e,function(r,i){if(!n.get(i))return void getSet.deleteKeyValue(e,i);n.set(i,!1);var s=a.call(t,i);s!==r&&o.call(e,i,s)},this),shapeReflections.eachIndex(n.keys(),function(r){n.get(r)&&o.call(e,r,a.call(t,r))}),e},updateList:function(e,t){var n=shapeReflections.toArray(t);return getSet.splice(e,0,e,n),e},update:function(e,t){return type.isIteratorLike(t)||type.isMoreListLikeThanMapLike(t)?shapeReflections.updateList(e,t):shapeReflections.updateMap(e,t),e},updateDeepMap:function(e,t){var n=makeMap(shapeReflections.getOwnEnumerableKeys(t)),a=t[getKeyValueSymbol$1]||shiftedGetKeyValue,o=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(e,function(r,i){if(!n.get(i))return void getSet.deleteKeyValue(e,i);n.set(i,!1);var s=a.call(t,i);type.isPrimitive(r)||type.isPrimitive(s)||!1===shouldUpdateOrAssign(r)?o.call(e,i,s):shapeReflections.updateDeep(r,s)},this),shapeReflections.eachIndex(n.keys(),function(r){n.get(r)&&o.call(e,r,a.call(t,r))}),e},updateDeepList:function(e,t){return updateDeepList.call(this,e,t)},updateDeep:function(e,t){var n=e[canSymbol_1_6_5_canSymbol.for("can.updateDeep")];return n?n.call(e,t):type.isMoreListLikeThanMapLike(t)?shapeReflections.updateDeepList(e,t):shapeReflections.updateDeepMap(e,t),e},hasKey:function(e,t){if(null==e)return!1;if(type.isPrimitive(e)){if(hasOwnProperty.call(e,t))return!0;var n;return n=getPrototypeOfWorksWithPrimitives?Object.getPrototypeOf(e):e.__proto__,void 0===n?void 0!==e[t]:t in n}var a=e[canSymbol_1_6_5_canSymbol.for("can.hasKey")];if(a)return a.call(e,t);var o=shapeReflections.hasOwnKey(e,t);return o||t in e},getAllEnumerableKeys:function(){},getAllKeys:function(){},assignSymbols:function(e,t){return shapeReflections.eachKey(t,function(t,n){var a=type.isSymbolLike(canSymbol_1_6_5_canSymbol[n])?canSymbol_1_6_5_canSymbol[n]:canSymbol_1_6_5_canSymbol.for(n);getSet.setKeyValue(e,a,t)}),e},isSerialized:isSerializedHelper,size:function(e){if(null==e)return 0;var t=e[sizeSymbol],n=0;return t?t.call(e):helpers.hasLength(e)?e.length:type.isListLike(e)?(shapeReflections.eachIndex(e,function(){n++}),n):e?shapeReflections.getOwnEnumerableKeys(e).length:void 0},defineInstanceKey:function(e,t,n){var a=e[canSymbol_1_6_5_canSymbol.for("can.defineInstanceKey")];if(a)return a.call(e,t,n);var o=e.prototype;a=o[canSymbol_1_6_5_canSymbol.for("can.defineInstanceKey")],a?a.call(o,t,n):Object.defineProperty(o,t,shapeReflections.assign({configurable:!0,enumerable:!type.isSymbolLike(t),writable:!0},n))}},shapeReflections.isSerializable=shapeReflections.isSerialized,shapeReflections.keys=shapeReflections.getOwnEnumerableKeys;var shape=shapeReflections,getSchemaSymbol=canSymbol_1_6_5_canSymbol.for("can.getSchema"),isMemberSymbol=canSymbol_1_6_5_canSymbol.for("can.isMember"),newSymbol=canSymbol_1_6_5_canSymbol.for("can.new");function comparator(e,t){return e.localeCompare(t)}function sort(e){if(type.isPrimitive(e)||e instanceof Date)return e;var t;return type.isListLike(e)?(t=[],shape.eachKey(e,function(e){t.push(sort(e))}),t):type.isMapLike(e)?(t={},shape.getOwnKeys(e).sort(comparator).forEach(function(n){t[n]=sort(getSet.getKeyValue(e,n))}),t):e}function isPrimitiveConverter(e){return e===Number||e===String||e===Boolean}var schemaReflections={getSchema:function(e){if(void 0!==e){var t=e[getSchemaSymbol];return void 0===t&&(e=e.constructor,t=e&&e[getSchemaSymbol]),void 0===t?void 0:t.call(e)}},getIdentity:function(e,t){if(t=t||schemaReflections.getSchema(e),void 0===t)throw new Error("can-reflect.getIdentity - Unable to find a schema for the given value.");var n=t.identity;if(!n||0===n.length)throw new Error("can-reflect.getIdentity - Provided schema lacks an identity property.");else{if(1===n.length)return getSet.getKeyValue(e,n[0]);var a={};return n.forEach(function(t){a[t]=getSet.getKeyValue(e,t)}),JSON.stringify(schemaReflections.cloneKeySort(a))}},cloneKeySort:function(e){return sort(e)},convert:function(e,t){if(isPrimitiveConverter(t))return t(e);var n=t[isMemberSymbol],a=!1,o=typeof t,r=t[newSymbol];if(void 0===n?"function"===o&&type.isConstructorLike(t)&&(a=e instanceof t):a=n.call(t,e),a)return e;if(void 0!==r)return r.call(t,e);if("function"===o)return type.isConstructorLike(t)?new t(e):t(e);throw new Error("can-reflect: Can not convert values into type. Type must provide `can.new` symbol.")}},schema=schemaReflections,getNameSymbol=canSymbol_1_6_5_canSymbol.for("can.getName");function setName(e,t){if("function"!=typeof t){var n=t;t=function(){return n}}Object.defineProperty(e,getNameSymbol,{value:t})}var anonymousID=0;function getName(e){var t=typeof e;if(null===e||"object"!==t&&"function"!==t)return""+e;var n=e[getNameSymbol];if(n)return n.call(e);if("function"==t)return"name"in e||(e.name="functionIE"+anonymousID++),e.name;if(e.constructor&&e!==e.constructor){var a=getName(e.constructor);if(a){if(type.isValueLike(e))return a+"<>";if(type.isMoreListLikeThanMapLike(e))return a+"[]";if(type.isMapLike(e))return a+"{}"}}}var getName_1={setName:setName,getName:getName};function keysPolyfill(){var e=[],t=0;return this.forEach(function(t,n){e.push(n)}),{next:function(){return{value:e[t],done:t++===e.length}}}}"undefined"!=typeof Map&&(shape.assignSymbols(Map.prototype,{"can.getOwnEnumerableKeys":Map.prototype.keys,"can.setKeyValue":Map.prototype.set,"can.getKeyValue":Map.prototype.get,"can.deleteKeyValue":Map.prototype["delete"],"can.hasOwnKey":Map.prototype.has}),"function"!=typeof Map.prototype.keys&&(Map.prototype.keys=Map.prototype[canSymbol_1_6_5_canSymbol.for("can.getOwnEnumerableKeys")]=keysPolyfill)),"undefined"!=typeof WeakMap&&shape.assignSymbols(WeakMap.prototype,{"can.getOwnEnumerableKeys":function(){throw new Error("can-reflect: WeakMaps do not have enumerable keys.")},"can.setKeyValue":WeakMap.prototype.set,"can.getKeyValue":WeakMap.prototype.get,"can.deleteKeyValue":WeakMap.prototype["delete"],"can.hasOwnKey":WeakMap.prototype.has}),"undefined"!=typeof Set&&(shape.assignSymbols(Set.prototype,{"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(e,t,n){t!==n&&shape.each(t,function(e){this.delete(e)},this),shape.each(n,function(e){this.add(e)},this)},"can.size":function(){return this.size}}),"function"!=typeof Set.prototype[canSymbol_1_6_5_canSymbol.iterator]&&(Set.prototype[canSymbol_1_6_5_canSymbol.iterator]=function(){var e=[],t=0;return this.forEach(function(t){e.push(t)}),{next:function(){return{value:e[t],done:t++===e.length}}}})),"undefined"!=typeof WeakSet&&shape.assignSymbols(WeakSet.prototype,{"can.isListLike":!0,"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(e,t,n){t!==n&&shape.each(t,function(e){this.delete(e)},this),shape.each(n,function(e){this.add(e)},this)},"can.size":function(){throw new Error("can-reflect: WeakSets do not have enumerable keys.")}});var reflect={};[call,getSet,observe,shape,type,getName_1,schema].forEach(function(e){for(var t in e)reflect[t]=e[t]});var canReflect_1_18_0_canReflect=canNamespace_1_0_0_canNamespace.Reflect=reflect,commonjsGlobal="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis;function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var warnTimeout=5e3,logLevel=0,warn=function(){var e=this.logLevel;2>e&&("undefined"!=typeof console&&console.warn?this._logger("warn",Array.prototype.slice.call(arguments)):"undefined"!=typeof console&&console.log&&this._logger("log",Array.prototype.slice.call(arguments)))},log=function(){var e=this.logLevel;1>e&&"undefined"!=typeof console&&console.log&&this._logger("log",Array.prototype.slice.call(arguments))},error=function(){var e=this.logLevel;1>e&&"undefined"!=typeof console&&console.error&&this._logger("error",Array.prototype.slice.call(arguments))},_logger=function(t,n){try{console[t].apply(console,n)}catch(a){console[t](n)}},canLog_1_0_2_canLog={warnTimeout:5000,logLevel:logLevel,warn:warn,log:log,error:error,_logger:_logger},dev={warnTimeout:5e3,logLevel:0,stringify:function(e){return JSON.stringify(e,function(e,t){return t===void 0?"/* void(undefined) */":t},"  ").replace(/"\/\* void\(undefined\) \*\/"/g,"undefined")},warn:function(){},log:function(){},error:function(){},_logger:canLog_1_0_2_canLog._logger},canQueues_1_3_1_queueState={lastTask:null},canAssign_1_3_3_canAssign=canNamespace_1_0_0_canNamespace.assign=function(e,t){for(var n in t){var a=Object.getOwnPropertyDescriptor(e,n);a&&!1===a.writable||(e[n]=t[n])}return e};function noOperation(){}var Queue=function(e,t){this.callbacks=canAssign_1_3_3_canAssign({onFirstTask:noOperation,onComplete:function(){canQueues_1_3_1_queueState.lastTask=null}},t||{}),this.name=e,this.index=0,this.tasks=[],this._log=!1};Queue.prototype.constructor=Queue,Queue.noop=noOperation,Queue.prototype.enqueue=function(e,t,n,a){var o=this.tasks.push({fn:e,context:t,args:n,meta:a||{}});1===o&&this.callbacks.onFirstTask(this)},Queue.prototype.flush=function(){for(;this.index<this.tasks.length;){var e=this.tasks[this.index++];e.fn.apply(e.context,e.args)}this.index=0,this.tasks=[],this.callbacks.onComplete(this)},Queue.prototype.log=function(){this._log=!arguments.length||arguments[0]};var canQueues_1_3_1_queue=Queue,PriorityQueue=function(){canQueues_1_3_1_queue.apply(this,arguments),this.taskMap=new Map,this.taskContainersByPriority=[],this.curPriorityIndex=1/0,this.curPriorityMax=0,this.isFlushing=!1,this.tasksRemaining=0};PriorityQueue.prototype=Object.create(canQueues_1_3_1_queue.prototype),PriorityQueue.prototype.constructor=PriorityQueue,PriorityQueue.prototype.enqueue=function(e,t,n,a){if(!this.taskMap.has(e)){this.tasksRemaining++;var o=0===this.taskContainersByPriority.length,r={fn:e,context:t,args:n,meta:a||{}},i=this.getTaskContainerAndUpdateRange(r);i.tasks.push(r),this.taskMap.set(e,r),o&&this.callbacks.onFirstTask(this)}},PriorityQueue.prototype.getTaskContainerAndUpdateRange=function(e){var t=e.meta.priority||0;t<this.curPriorityIndex&&(this.curPriorityIndex=t),t>this.curPriorityMax&&(this.curPriorityMax=t);var n=this.taskContainersByPriority,a=n[t];return a||(a=n[t]={tasks:[],index:0}),a},PriorityQueue.prototype.flush=function(){if(!this.isFlushing)for(this.isFlushing=!0;;)if(this.curPriorityIndex<=this.curPriorityMax){var e=this.taskContainersByPriority[this.curPriorityIndex];if(e&&e.tasks.length>e.index){var t=e.tasks[e.index++];this.tasksRemaining--,this.taskMap["delete"](t.fn),t.fn.apply(t.context,t.args)}else this.curPriorityIndex++}else return this.taskMap=new Map,this.curPriorityIndex=1/0,this.curPriorityMax=0,this.taskContainersByPriority=[],this.isFlushing=!1,void this.callbacks.onComplete(this)},PriorityQueue.prototype.isEnqueued=function(e){return this.taskMap.has(e)},PriorityQueue.prototype.flushQueuedTask=function(e){var t=this.dequeue(e);t&&t.fn.apply(t.context,t.args)},PriorityQueue.prototype.dequeue=function(e){var t=this.taskMap.get(e);if(t){var n=t.meta.priority||0,a=this.taskContainersByPriority[n],o=a.tasks.indexOf(t,a.index);if(0<=o)return a.tasks.splice(o,1),this.tasksRemaining--,this.taskMap["delete"](t.fn),t;console.warn("Task",e,"has already run")}},PriorityQueue.prototype.tasksRemainingCount=function(){return this.tasksRemaining};var canQueues_1_3_1_priorityQueue=PriorityQueue,CompletionQueue=function(){canQueues_1_3_1_queue.apply(this,arguments),this.flushCount=0};CompletionQueue.prototype=Object.create(canQueues_1_3_1_queue.prototype),CompletionQueue.prototype.constructor=CompletionQueue,CompletionQueue.prototype.flush=function(){if(0===this.flushCount){for(this.flushCount++;this.index<this.tasks.length;){var e=this.tasks[this.index++];e.fn.apply(e.context,e.args)}this.index=0,this.tasks=[],this.flushCount--,this.callbacks.onComplete(this)}};var canQueues_1_3_1_completionQueue=CompletionQueue,canQueues_1_3_1_sortedIndexBy=function(e,t,n){if(t&&t.length){if(-1===e(n,t[0]))return 0;if(1===e(n,t[t.length-1]))return t.length;for(var a=0,o=t.length;a<o;){var r=a+o>>>1,i=t[r],s=e(n,i);-1===s?o=r:a=r+1}return o}},sortStable=!0,indexOf=Array.prototype.indexOf,hasDuplicate,sortInput;function sortOrder(e,t){if(e===t)return hasDuplicate=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n?e===document||e.ownerDocument===document&&document.documentElement.contains(e)?-1:t===document||t.ownerDocument===document&&document.documentElement.contains(t)?1:sortInput?indexOf.call(sortInput,e)-indexOf.call(sortInput,t):0:4&n?-1:1)}function uniqueSort(e){var t=[],n=0,a=0,o;if(hasDuplicate=!1,sortInput=!sortStable&&e.slice(0),e.sort(sortOrder),hasDuplicate){for(;o=e[a++];)o===e[a]&&(n=t.push(a));for(;n--;)e.splice(t[n],1)}return sortInput=null,e}var canQueues_1_3_1_elementSort={uniqueSort:uniqueSort,sortOrder:sortOrder},canElementSymbol=canSymbol_1_6_5_canSymbol.for("can.element");function sortTasks(e,t){return canQueues_1_3_1_elementSort.sortOrder(e.meta.element,t.meta.element)}var DomOrderQueue=function(){canQueues_1_3_1_queue.apply(this,arguments),this.taskMap=new Map,this.unsortable=[],this.isFlushing=!1};DomOrderQueue.prototype=Object.create(canQueues_1_3_1_queue.prototype),DomOrderQueue.prototype.constructor=DomOrderQueue,DomOrderQueue.prototype.enqueue=function(e,t,n,a){var o;if(!this.taskMap.has(e)){a||(a={}),a.element||(a.element=e[canElementSymbol]),o={fn:e,context:t,args:n,meta:a},this.taskMap.set(e,o);var r=canQueues_1_3_1_sortedIndexBy(sortTasks,this.tasks,o);this.tasks.splice(r,0,o),1===this.tasks.length&&this.callbacks.onFirstTask(this)}else o=this.taskMap.get(e),o.context=t,o.args=n,a||(a={}),a.element||(a.element=e[canElementSymbol]),o.meta=a},DomOrderQueue.prototype.flush=function(){if(!this.isFlushing){for(this.isFlushing=!0;this.tasks.length;){var e=this.tasks.shift();this.taskMap["delete"](e.fn),e.fn.apply(e.context,e.args)}this.isFlushing=!1,this.callbacks.onComplete(this)}},DomOrderQueue.prototype.isEnqueued=function(e){return this.taskMap.has(e)},DomOrderQueue.prototype.flushQueuedTask=function(e){var t=this.dequeue(e);t&&t.fn.apply(t.context,t.args)},DomOrderQueue.prototype.dequeue=function(e){var t=this.taskMap.get(e);if(t){var n=this.tasks.indexOf(t);if(0<=n)return this.tasks.splice(n,1),this.taskMap["delete"](t.fn),t;console.warn("Task",e,"has already run")}},DomOrderQueue.prototype.tasksRemainingCount=function(){return this.tasks.length};var canQueues_1_3_1_domOrderQueue=DomOrderQueue,canQueues_1_3_1_canQueues=createCommonjsModule(function(e){var t=0,n=!1,a=0,o=["notify","derive","domUI","dom","mutate"],r,i,s,l,d,p;i=new canQueues_1_3_1_queue("NOTIFY",{onComplete:function(){s.flush()},onFirstTask:function(){t?n=!0:i.flush()}}),s=new canQueues_1_3_1_priorityQueue("DERIVE",{onComplete:function(){d.flush()},onFirstTask:function(){n=!0}}),d=new canQueues_1_3_1_domOrderQueue("DOM   ",{onComplete:function(){l.flush()},onFirstTask:function(){n=!0}}),l=new canQueues_1_3_1_completionQueue("DOM_UI",{onComplete:function(){p.flush()},onFirstTask:function(){n=!0}}),p=new canQueues_1_3_1_queue("MUTATE",{onComplete:function(){canQueues_1_3_1_queueState.lastTask=null},onFirstTask:function(){n=!0}});var c={Queue:canQueues_1_3_1_queue,PriorityQueue:canQueues_1_3_1_priorityQueue,CompletionQueue:canQueues_1_3_1_completionQueue,DomOrderQueue:canQueues_1_3_1_domOrderQueue,notifyQueue:i,deriveQueue:s,domQueue:d,domUIQueue:l,mutateQueue:p,batch:{start:function(){t++,1===t&&(a++,r={number:a})},stop:function(){t--,0===t&&n&&(n=!1,i.flush())},isCollecting:function(){return 0<t},number:function(){return a},data:function(){return r}},runAsTask:function(e){return e},enqueueByQueue:function(e,t,n,a,r){e&&(c.batch.start(),o.forEach(function(o){var i=c[o+"Queue"],s=e[o];s!==void 0&&s.forEach(function(e){var o=null==a?{}:a(e,t,n);o.reasonLog=r,i.enqueue(e,t,n,o)})}),c.batch.stop())},lastTask:function(){return canQueues_1_3_1_queueState.lastTask},stack:function(e){for(var t=e||canQueues_1_3_1_queueState.lastTask,n=[];t;)n.unshift(t),t=t.meta.parentTask;return n},logStack:function(e){var t=this.stack(e);t.forEach(function(e,t){var n=e.meta;0===t&&n&&n.reasonLog&&dev.log.apply(dev,n.reasonLog);var a=n&&n.log?n.log:[e.fn.name,e];dev.log.apply(dev,[e.meta.stack.name+" ran task:"].concat(a))})},taskCount:function(){return i.tasks.length+s.tasks.length+l.tasks.length+p.tasks.length},flush:function(){i.flush()},log:function(){i.log.apply(i,arguments),s.log.apply(s,arguments),l.log.apply(l,arguments),d.log.apply(d,arguments),p.log.apply(p,arguments)}};if(canNamespace_1_0_0_canNamespace.queues)throw new Error("You can't have two versions of can-queues, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.queues=c}),canObservationRecorder_1_3_1_canObservationRecorder=createCommonjsModule(function(e){var t=[],n=canSymbol_1_6_5_canSymbol.for("can.addParent"),a=canSymbol_1_6_5_canSymbol.for("can.getValue"),o={stack:t,start:function(e){var n={keyDependencies:new Map,valueDependencies:new Set,childDependencies:new Set,traps:null,ignore:0,name:e};return t.push(n),n},stop:function(){return t.pop()},add:function(e,n){var a=t[t.length-1];if(a&&0===a.ignore)if(a.traps)a.traps.push([e,n]);else if(void 0===n)a.valueDependencies.add(e);else{var o=a.keyDependencies.get(e);o||(o=new Set,a.keyDependencies.set(e,o)),o.add(n)}},addMany:function(e){var n=t[t.length-1];if(n)if(n.traps)n.traps.push.apply(n.traps,e);else for(var a=0,o=e.length;a<o;a++)this.add(e[a][0],e[a][1])},created:function(e){var a=t[t.length-1];a&&(a.childDependencies.add(e),e[n]&&e[n](a))},ignore:function(e){return function(){if(t.length){var n=t[t.length-1];n.ignore++;var a=e.apply(this,arguments);return n.ignore--,a}return e.apply(this,arguments)}},peekValue:function(e){if(!e||!e[a])return e;if(t.length){var n=t[t.length-1];n.ignore++;var o=e[a]();return n.ignore--,o}return e[a]()},isRecording:function(){var e=t.length,n=e&&t[e-1];return n&&0===n.ignore&&n},makeDependenciesRecord:function(e){return{traps:null,keyDependencies:new Map,valueDependencies:new Set,ignore:0,name:e}},makeDependenciesRecorder:function(){return o.makeDependenciesRecord()},trap:function(){if(t.length){var e=t[t.length-1],n=e.traps,a=e.traps=[];return function(){return e.traps=n,a}}return function(){return[]}},trapsCount:function(){if(t.length){var e=t[t.length-1];return e.traps.length}return 0}};if(canNamespace_1_0_0_canNamespace.ObservationRecorder)throw new Error("You can't have two versions of can-observation-recorder, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.ObservationRecorder=o});function isBuiltInPrototype(e){if(e===Object.prototype)return!0;var t=Object.prototype.toString.call(e),n=-1!==t.indexOf("[object ");return"[object Object]"!==t&&n}function getDeepSize(e,t){if(0===t)return canReflect_1_18_0_canReflect.size(e);if(0===canReflect_1_18_0_canReflect.size(e))return 0;var n=0;return canReflect_1_18_0_canReflect.each(e,function(e){n+=getDeepSize(e,t-1)}),n}function getDeep(e,t,n,a){if(e)if(a!==n)canReflect_1_18_0_canReflect.each(e,function(e){getDeep(e,t,n+1,a)});else if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(e))canReflect_1_18_0_canReflect.addValues(t,canReflect_1_18_0_canReflect.toArray(e));else throw new Error("can-key-tree: Map-type leaf containers are not supported yet.")}function clearDeep(e,t,n,a){if(!(n===t.length))canReflect_1_18_0_canReflect.each(e,function(o,r){clearDeep(o,t.concat(r),n,a),canReflect_1_18_0_canReflect.deleteKeyValue(e,r)});else if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(e)){var o=canReflect_1_18_0_canReflect.toArray(e);a&&o.forEach(function(e){a.apply(null,t.concat(e))}),canReflect_1_18_0_canReflect.removeValues(e,o)}else throw new Error("can-key-tree: Map-type leaf containers are not supported yet.")}var KeyTree=function(e,t){var n=e[0];this.root=canReflect_1_18_0_canReflect.isConstructorLike(n)?new n:n,this.callbacks=t||{},this.treeStructure=e,this.empty=!0};canReflect_1_18_0_canReflect.assign(KeyTree.prototype,{add:function(e){if(e.length>this.treeStructure.length)throw new Error("can-key-tree: Can not add path deeper than tree.");for(var t=this.root,n=!0===this.empty,a=0;a<e.length-1;a++){var o=e[a],r=canReflect_1_18_0_canReflect.getKeyValue(t,o);if(!r){var s=this.treeStructure[a+1];r=isBuiltInPrototype(s.prototype)?new s:new s(o),canReflect_1_18_0_canReflect.setKeyValue(t,o,r)}t=r}if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(t))canReflect_1_18_0_canReflect.addValues(t,[e[e.length-1]]);else throw new Error("can-key-tree: Map types are not supported yet.");return n&&(this.empty=!1,this.callbacks.onFirst&&this.callbacks.onFirst.call(this)),this},getNode:function(e){for(var t=this.root,n=0,a;n<e.length;n++)if(a=e[n],t=canReflect_1_18_0_canReflect.getKeyValue(t,a),!t)return;return t},get:function(e){var t=this.getNode(e);if(this.treeStructure.length===e.length)return t;var n=this.treeStructure[this.treeStructure.length-1],a=new n;return getDeep(t,a,e.length,this.treeStructure.length-1),a},delete:function(e,t){for(var n=this.root,a=[this.root],o=e[e.length-1],r=0;r<e.length-1;r++){var s=e[r],l=canReflect_1_18_0_canReflect.getKeyValue(n,s);if(void 0===l)return!1;a.push(l),n=l}if(!e.length)clearDeep(n,[],this.treeStructure.length-1,t);else if(e.length!==this.treeStructure.length){var d=canReflect_1_18_0_canReflect.getKeyValue(n,o);if(void 0!==d)clearDeep(d,e,this.treeStructure.length-1,t),canReflect_1_18_0_canReflect.deleteKeyValue(n,o);else return!1}else if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(n))t&&t.apply(null,e.concat(o)),canReflect_1_18_0_canReflect.removeValues(n,[o]);else throw new Error("can-key-tree: Map types are not supported yet.");for(r=a.length-2;0<=r&&0===canReflect_1_18_0_canReflect.size(n);r--)n=a[r],canReflect_1_18_0_canReflect.deleteKeyValue(n,e[r]);return 0===canReflect_1_18_0_canReflect.size(this.root)&&(this.empty=!0,this.callbacks.onEmpty&&this.callbacks.onEmpty.call(this)),!0},size:function(){return getDeepSize(this.root,this.treeStructure.length-1)},isEmpty:function(){return this.empty}});var canKeyTree_1_2_2_canKeyTree=KeyTree,canDefineLazyValue_1_1_1_defineLazyValue=function(e,t,n,a){Object.defineProperty(e,t,{configurable:!0,get:function(){Object.defineProperty(this,t,{value:void 0,writable:!0});var o=n.call(this,e,t);return Object.defineProperty(this,t,{value:o,writable:!!a}),o},set:function(e){return Object.defineProperty(this,t,{value:e,writable:!!a}),e}})},properties={on:function(e,t){this.handlers.add([t||"mutate",e])},off:function(e,t){e===void 0?t===void 0?this.handlers.delete([]):this.handlers.delete([t]):this.handlers.delete([t||"mutate",e])}},symbols={"can.onValue":properties.on,"can.offValue":properties.off,"can.dispatch":function(e,t){var n=[];n=[this.handlers.getNode([]),this,[e,t]],canQueues_1_3_1_canQueues.enqueueByQueue.apply(canQueues_1_3_1_canQueues,n)},"can.getWhatIChange":function(){},"can.isBound":function(){return!this.handlers.isEmpty()}};function defineLazyHandlers(){return new canKeyTree_1_2_2_canKeyTree([Object,Array],{onFirst:this.onBound!==void 0&&this.onBound.bind(this),onEmpty:this.onUnbound!==void 0&&this.onUnbound.bind(this)})}var mixinValueEventBindings=function(e){return canReflect_1_18_0_canReflect.assign(e,properties),canReflect_1_18_0_canReflect.assignSymbols(e,symbols),canDefineLazyValue_1_1_1_defineLazyValue(e,"handlers",defineLazyHandlers,!0),e};mixinValueEventBindings.addHandlers=function(e,t){return console.warn("can-event-queue/value: Avoid using addHandlers. Add onBound and onUnbound methods instead."),e.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Array],t),e};var value=mixinValueEventBindings;function addNewKeyDependenciesIfNotInOld(e){(this.oldEventSet===void 0||!1===this.oldEventSet["delete"](e))&&canReflect_1_18_0_canReflect.onKeyValue(this.observable,e,this.onDependencyChange,"notify")}function addObservablesNewKeyDependenciesIfNotInOld(e,t){e.forEach(addNewKeyDependenciesIfNotInOld,{onDependencyChange:this.onDependencyChange,observable:t,oldEventSet:this.oldDependencies.keyDependencies.get(t)})}function removeKeyDependencies(e){canReflect_1_18_0_canReflect.offKeyValue(this.observable,e,this.onDependencyChange,"notify")}function removeObservablesKeyDependencies(e,t){e.forEach(removeKeyDependencies,{onDependencyChange:this.onDependencyChange,observable:t})}function addValueDependencies(e){!1===this.oldDependencies.valueDependencies.delete(e)&&canReflect_1_18_0_canReflect.onValue(e,this.onDependencyChange,"notify")}function removeValueDependencies(e){canReflect_1_18_0_canReflect.offValue(e,this.onDependencyChange,"notify")}var canObservation_4_2_0_recorderDependencyHelpers={updateObservations:function(e){e.newDependencies.keyDependencies.forEach(addObservablesNewKeyDependenciesIfNotInOld,e),e.oldDependencies.keyDependencies.forEach(removeObservablesKeyDependencies,e),e.newDependencies.valueDependencies.forEach(addValueDependencies,e),e.oldDependencies.valueDependencies.forEach(removeValueDependencies,e)},stopObserving:function(e,t){e.keyDependencies.forEach(removeObservablesKeyDependencies,{onDependencyChange:t}),e.valueDependencies.forEach(removeValueDependencies,{onDependencyChange:t})}},temporarilyBoundNoOperation=function(){},unbindTemporarilyBoundValue=function(){for(var e=0,t=observables.length;e<t;e++)canReflect_1_18_0_canReflect.offValue(observables[e],temporarilyBoundNoOperation);observables=null},observables;function temporarilyBind(e){var t=e.computeInstance||e;canReflect_1_18_0_canReflect.onValue(t,temporarilyBoundNoOperation),observables||(observables=[],setTimeout(unbindTemporarilyBoundValue,10)),observables.push(t)}var canObservation_4_2_0_temporarilyBind=temporarilyBind,dispatchSymbol=canSymbol_1_6_5_canSymbol.for("can.dispatch"),getChangesSymbol=canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord"),getValueDependenciesSymbol=canSymbol_1_6_5_canSymbol.for("can.getValueDependencies");function Observation(e,t,n){this.deriveQueue=canQueues_1_3_1_canQueues.deriveQueue,this.func=e,this.context=t,this.options=n||{priority:0,isObservable:!0},this.bound=!1,this._value=void 0,this.newDependencies=canObservationRecorder_1_3_1_canObservationRecorder.makeDependenciesRecord(),this.oldDependencies=null;var a=this;this.onDependencyChange=function(e){a.dependencyChange(this,e)},this.update=this.update.bind(this)}value(Observation.prototype),canReflect_1_18_0_canReflect.assign(Observation.prototype,{onBound:function(){this.bound=!0,this.oldDependencies=this.newDependencies,canObservationRecorder_1_3_1_canObservationRecorder.start(this._name),this._value=this.func.call(this.context),this.newDependencies=canObservationRecorder_1_3_1_canObservationRecorder.stop(),canObservation_4_2_0_recorderDependencyHelpers.updateObservations(this)},dependencyChange:function(){if(!0===this.bound){var e=[];e=[this.update,this,[],{priority:this.options.priority,element:this.options.element}],this.deriveQueue.enqueue.apply(this.deriveQueue,e)}},update:function(){if(!0===this.bound){var e=this._value;this.oldValue=null,this.onBound(),e!==this._value&&this[dispatchSymbol](this._value,e)}},onUnbound:function(){this.bound=!1,canObservation_4_2_0_recorderDependencyHelpers.stopObserving(this.newDependencies,this.onDependencyChange),this.newDependencies=canObservationRecorder_1_3_1_canObservationRecorder.makeDependenciesRecord()},get:function(){return this.options.isObservable&&canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!1===this.bound&&Observation.temporarilyBind(this)),!0===this.bound?(0<this.deriveQueue.tasksRemainingCount()&&Observation.updateChildrenAndSelf(this),this._value):this.func.call(this.context)},hasDependencies:function(){var e=this.newDependencies;return this.bound?0<e.valueDependencies.size+e.keyDependencies.size:void 0},log:function(){}}),Object.defineProperty(Observation.prototype,"value",{get:function(){return this.get()}});var observationProto={"can.getValue":Observation.prototype.get,"can.isValueLike":!0,"can.isMapLike":!1,"can.isListLike":!1,"can.valueHasDependencies":Observation.prototype.hasDependencies,"can.getValueDependencies":function(){if(!0===this.bound){var e=this.newDependencies,t={};return e.keyDependencies.size&&(t.keyDependencies=e.keyDependencies),e.valueDependencies.size&&(t.valueDependencies=e.valueDependencies),t}},"can.getPriority":function(){return this.options.priority},"can.setPriority":function(e){this.options.priority=e},"can.setElement":function(e){this.options.element=e,this.deriveQueue=canQueues_1_3_1_canQueues.domQueue||canQueues_1_3_1_canQueues.deriveQueue}};canReflect_1_18_0_canReflect.assignSymbols(Observation.prototype,observationProto),Observation.updateChildrenAndSelf=function(e){if(void 0!==e.update&&!0===e.deriveQueue.isEnqueued(e.update))return e.deriveQueue.flushQueuedTask(e.update),!0;if(e[getValueDependenciesSymbol]){var t=!1,n=e[getValueDependenciesSymbol]().valueDependencies||[];return n.forEach(function(e){!0===Observation.updateChildrenAndSelf(e)&&(t=!0)}),t}return!1};var alias={addAll:"addMany"};["add","addAll","ignore","trap","trapsCount","isRecording"].forEach(function(e){Observation[e]=function(){var t=alias[e]?alias[e]:e;return console.warn("can-observation: Call "+t+"() on can-observation-recorder."),canObservationRecorder_1_3_1_canObservationRecorder[t].apply(this,arguments)}}),Observation.prototype.start=function(){return console.warn("can-observation: Use .on and .off to bind."),this.onBound()},Observation.prototype.stop=function(){return console.warn("can-observation: Use .on and .off to bind."),this.onUnbound()},Observation.temporarilyBind=canObservation_4_2_0_temporarilyBind;var canObservation_4_2_0_canObservation=canNamespace_1_0_0_canNamespace.Observation=Observation,canSimpleObservable_2_5_0_log=function(){},dispatchSymbol$1=canSymbol_1_6_5_canSymbol.for("can.dispatch");function SimpleObservable(e){this._value=e}value(SimpleObservable.prototype),canReflect_1_18_0_canReflect.assignMap(SimpleObservable.prototype,{log:canSimpleObservable_2_5_0_log,get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this),this._value},set:function(e){var t=this._value;this._value=e,this[dispatchSymbol$1](e,t)}}),Object.defineProperty(SimpleObservable.prototype,"value",{set:function(e){return this.set(e)},get:function(){return this.get()}});var simpleObservableProto={"can.getValue":SimpleObservable.prototype.get,"can.setValue":SimpleObservable.prototype.set,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0}};canReflect_1_18_0_canReflect.assignSymbols(SimpleObservable.prototype,simpleObservableProto);var canSimpleObservable_2_5_0_canSimpleObservable=canNamespace_1_0_0_canNamespace.SimpleObservable=SimpleObservable,peek=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getValue.bind(canReflect_1_18_0_canReflect));function SettableObservable(e,t,n){this.lastSetValue=new canSimpleObservable_2_5_0_canSimpleObservable(n),this.handler=this.handler.bind(this),this.observation=new canObservation_4_2_0_canObservation(function(){return e.call(t,this.lastSetValue.get())},this)}value(SettableObservable.prototype),canReflect_1_18_0_canReflect.assignMap(SettableObservable.prototype,{log:canSimpleObservable_2_5_0_log,constructor:SettableObservable,handler:function(e){var t=this._value,n;this._value=e,canQueues_1_3_1_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[e,t],null,n)},onBound:function(){this.bound||(this.bound=!0,this.activate())},activate:function(){canReflect_1_18_0_canReflect.onValue(this.observation,this.handler,"notify"),this._value=peek(this.observation)},onUnbound:function(){this.bound=!1,canReflect_1_18_0_canReflect.offValue(this.observation,this.handler,"notify")},set:function(e){var t=this.lastSetValue.get();canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isValueLike(t)&&!canReflect_1_18_0_canReflect.isObservableLike(e)?canReflect_1_18_0_canReflect.setValue(t,e):e!==t&&this.lastSetValue.set(e)},get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&this.onBound()),!0===this.bound?this._value:this.observation.get()},hasDependencies:function(){return canReflect_1_18_0_canReflect.valueHasDependencies(this.observation)},getValueDependencies:function(){return canReflect_1_18_0_canReflect.getValueDependencies(this.observation)}}),Object.defineProperty(SettableObservable.prototype,"value",{set:function(e){return this.set(e)},get:function(){return this.get()}}),canReflect_1_18_0_canReflect.assignSymbols(SettableObservable.prototype,{"can.getValue":SettableObservable.prototype.get,"can.setValue":SettableObservable.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(this.observation)},"can.setPriority":function(e){canReflect_1_18_0_canReflect.setPriority(this.observation,e)},"can.valueHasDependencies":SettableObservable.prototype.hasDependencies,"can.getValueDependencies":SettableObservable.prototype.getValueDependencies});var settable=SettableObservable;function AsyncObservable(e,t,n){this.resolve=this.resolve.bind(this),this.lastSetValue=new canSimpleObservable_2_5_0_canSimpleObservable(n),this.handler=this.handler.bind(this),this.observation=new canObservation_4_2_0_canObservation(function(){this.resolveCalled=!1,this.inGetter=!0;var n=e.call(t,this.lastSetValue.get(),!0===this.bound?this.resolve:void 0);if(this.inGetter=!1,void 0===n?this.resolveCalled&&this.resolve(this._value):this.resolve(n),!0!==this.bound)return n},this)}AsyncObservable.prototype=Object.create(settable.prototype),AsyncObservable.prototype.constructor=AsyncObservable,AsyncObservable.prototype.handler=function(e){e!==void 0&&settable.prototype.handler.apply(this,arguments)};var peek$1=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getValue.bind(canReflect_1_18_0_canReflect));AsyncObservable.prototype.activate=function(){canReflect_1_18_0_canReflect.onValue(this.observation,this.handler,"notify"),this.resolveCalled||(this._value=peek$1(this.observation))},AsyncObservable.prototype.resolve=function(e){this.resolveCalled=!0;var t=this._value;if(this._value=e,!this.inGetter){var n=[this.handlers.getNode([]),this,[e,t],null];canQueues_1_3_1_canQueues.enqueueByQueue.apply(canQueues_1_3_1_canQueues,n)}};var async=AsyncObservable;function dispatch(e){var t=this.eventHandlers[e];if(t)for(var n=t.slice(),a=this.getKeyValue(e),o=0;o<n.length;o++)n[o](a)}function Globals(){this.eventHandlers={},this.properties={}}Globals.prototype.define=function(e,t,n){return void 0===n&&(n=!0),this.properties[e]||(this.properties[e]={default:t,value:t,enableCache:n}),this},Globals.prototype.getKeyValue=function(e){var t=this.properties[e];if(t)return"function"==typeof t.value?t.cachedValue?t.cachedValue:t.enableCache?(t.cachedValue=t.value(),t.cachedValue):t.value():t.value},Globals.prototype.makeExport=function(e){return function(t){return 0===arguments.length?this.getKeyValue(e):"undefined"==typeof t||null===t?void this.deleteKeyValue(e):("function"==typeof t?this.setKeyValue(e,function(){return t}):this.setKeyValue(e,t),t)}.bind(this)},Globals.prototype.offKeyValue=function(e,t){if(this.properties[e]){var n=this.eventHandlers[e];if(n){var a=n.indexOf(t);n.splice(a,1)}}return this},Globals.prototype.onKeyValue=function(e,t){return this.properties[e]&&(!this.eventHandlers[e]&&(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t)),this},Globals.prototype.deleteKeyValue=function(e){var t=this.properties[e];return void 0!==t&&(t.value=t.default,t.cachedValue=void 0,dispatch.call(this,e)),this},Globals.prototype.setKeyValue=function(e,t){if(!this.properties[e])return this.define(e,t);var n=this.properties[e];return n.value=t,n.cachedValue=void 0,dispatch.call(this,e),this},Globals.prototype.reset=function(){for(var e in this.properties)this.properties.hasOwnProperty(e)&&(this.properties[e].value=this.properties[e].default,this.properties[e].cachedValue=void 0,dispatch.call(this,e));return this},canReflect_1_18_0_canReflect.assignSymbols(Globals.prototype,{"can.getKeyValue":Globals.prototype.getKeyValue,"can.setKeyValue":Globals.prototype.setKeyValue,"can.deleteKeyValue":Globals.prototype.deleteKeyValue,"can.onKeyValue":Globals.prototype.onKeyValue,"can.offKeyValue":Globals.prototype.offKeyValue});var canGlobals_1_2_2_canGlobalsProto=Globals,canGlobals_1_2_2_canGlobalsInstance=createCommonjsModule(function(e){var t=new canGlobals_1_2_2_canGlobalsProto;if(canNamespace_1_0_0_canNamespace.globals)throw new Error("You can't have two versions of can-globals, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.globals=t});canGlobals_1_2_2_canGlobalsInstance.define("global",function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:"object"==typeof process&&"[object process]"==={}.toString.call(process)?commonjsGlobal:window});var global_1=canGlobals_1_2_2_canGlobalsInstance.makeExport("global");canGlobals_1_2_2_canGlobalsInstance.define("document",function(){return canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global").document});var document$1=canGlobals_1_2_2_canGlobalsInstance.makeExport("document");canGlobals_1_2_2_canGlobalsInstance.define("isNode",function(){return"object"==typeof process&&"[object process]"==={}.toString.call(process)});var isNode=canGlobals_1_2_2_canGlobalsInstance.makeExport("isNode");canGlobals_1_2_2_canGlobalsInstance.define("isBrowserWindow",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("isNode");return"undefined"!=typeof window&&"undefined"!=typeof document&&!1===e});var isBrowserWindow=canGlobals_1_2_2_canGlobalsInstance.makeExport("isBrowserWindow");function getTargetDocument(e){return e.ownerDocument||document$1()}function createEvent(e,t,n,a){var o=getTargetDocument(e),r=o.createEvent("HTMLEvents"),i;if("string"==typeof t)i=t;else for(var s in i=t.type,t)void 0===r[s]&&(r[s]=t[s]);return void 0===n&&(n=!0),r.initEvent(i,n,a),r}function isDomEventTarget(e){if(!(e&&e.nodeName))return e===window;var t=e.nodeType;return 1===t||9===t||11===t}function addDomContext(e,t){return isDomEventTarget(e)&&(t=Array.prototype.slice.call(t,0),t.unshift(e)),t}function removeDomContext(e,t){return isDomEventTarget(e)||(t=Array.prototype.slice.call(t,0),e=t.shift()),{context:e,args:t}}var fixSyntheticEventsOnDisabled=!1;(function(){if(isBrowserWindow()){var e=document.createElement("input");e.disabled=!0;var t=setTimeout(function(){fixSyntheticEventsOnDisabled=!0},50),n=function n(){clearTimeout(t),e.removeEventListener("fix_synthetic_events_on_disabled_test",n)};e.addEventListener("fix_synthetic_events_on_disabled_test",n);try{var a=document.create("HTMLEvents");a.initEvent("fix_synthetic_events_on_disabled_test",!1),e.dispatchEvent(a)}catch(t){n(),fixSyntheticEventsOnDisabled=!0}}})();function isDispatchingOnDisabled(e,t){var n=t.type,a=!!e.disabled;return("inserted"===n||"removed"===n)&&a}function forceEnabledForDispatch(e,t){return fixSyntheticEventsOnDisabled&&isDispatchingOnDisabled(e,t)}var util={createEvent:createEvent,addDomContext:addDomContext,removeDomContext:removeDomContext,isDomEventTarget:isDomEventTarget,getTargetDocument:getTargetDocument,forceEnabledForDispatch:forceEnabledForDispatch};function EventRegistry(){this._registry={}}var makeEventRegistry=function(){return new EventRegistry};EventRegistry.prototype.has=function(e){return!!this._registry[e]},EventRegistry.prototype.get=function(e){return this._registry[e]},EventRegistry.prototype.add=function(e,t){if(!e)throw new Error("An EventDefinition must be provided");if("function"!=typeof e.addEventListener)throw new TypeError("EventDefinition addEventListener must be a function");if("function"!=typeof e.removeEventListener)throw new TypeError("EventDefinition removeEventListener must be a function");if(t=t||e.defaultEventType,"string"!=typeof t)throw new TypeError("Event type must be a string, not "+t);if(this.has(t))throw new Error("Event \""+t+"\" is already registered");this._registry[t]=e;var n=this;return function(){n._registry[t]=void 0}};var useCapture=function(e){return"focus"===e||"blur"===e};function makeDelegator(e){var t=function(e){this.element=e,this.events={},this.delegated={}};return canReflect_1_18_0_canReflect.assignSymbols(t.prototype,{"can.setKeyValue":function(t,n){var a=this.delegated[t]=function(e){var t=e.target,a=!0,o=e.stopPropagation;e.stopPropagation=function(){o.apply(this,arguments),a=!1};var r=e.stopImmediatePropagation;e.stopImmediatePropagation=function(){r.apply(this,arguments),a=!1};do{var i=t===document?document.documentElement:t,s=i.matches||i.msMatchesSelector;canReflect_1_18_0_canReflect.each(n,function(t,n){s&&s.call(i,n)&&t.forEach(function(t){t.call(i,e)})}),t=t.parentNode}while(t&&t!==e.currentTarget&&a)};this.events[t]=n,e.addEventListener(this.element,t,a,useCapture(t))},"can.getKeyValue":function(e){return this.events[e]},"can.deleteKeyValue":function(t){e.removeEventListener(this.element,t,this.delegated[t],useCapture(t)),delete this.delegated[t],delete this.events[t]},"can.getOwnEnumerableKeys":function(){return Object.keys(this.events)}}),t}var MakeDelegateEventTree=function(e){var t=makeDelegator(e);return new canKeyTree_1_2_2_canKeyTree([Map,t,Object,Array])},domEvents={_eventRegistry:makeEventRegistry(),addEvent:function(e,t){return this._eventRegistry.add(e,t)},addEventListener:function(e,t){var n=domEvents._eventRegistry.has(t);if(n){var a=domEvents._eventRegistry.get(t);return a.addEventListener.apply(domEvents,arguments)}var o=Array.prototype.slice.call(arguments,1);return e.addEventListener.apply(e,o)},removeEventListener:function(e,t){var n=domEvents._eventRegistry.has(t);if(n){var a=domEvents._eventRegistry.get(t);return a.removeEventListener.apply(domEvents,arguments)}var o=Array.prototype.slice.call(arguments,1);return e.removeEventListener.apply(e,o)},addDelegateListener:function(e,t,n,a){domEvents._eventTree.add([e,t,n,a])},removeDelegateListener:function(e,t,n,a){domEvents._eventTree.delete([e,t,n,a])},dispatch:function(e,t,n,a){var o=util.createEvent(e,t,n,a),r=util.forceEnabledForDispatch(e,o);r&&(e.disabled=!1);var i=e.dispatchEvent(o);return r&&(e.disabled=!0),i}};domEvents._eventTree=MakeDelegateEventTree(domEvents);var canDomEvents_1_3_11_canDomEvents=canNamespace_1_0_0_canNamespace.domEvents=domEvents,isDomEventTarget$1=util.isDomEventTarget,metaSymbol=canSymbol_1_6_5_canSymbol.for("can.meta"),dispatchBoundChangeSymbol=canSymbol_1_6_5_canSymbol.for("can.dispatchInstanceBoundChange"),dispatchInstanceOnPatchesSymbol=canSymbol_1_6_5_canSymbol.for("can.dispatchInstanceOnPatches"),onKeyValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),offKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.offKeyValue"),onEventSymbol=canSymbol_1_6_5_canSymbol.for("can.onEvent"),offEventSymbol=canSymbol_1_6_5_canSymbol.for("can.offEvent"),onValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onValue"),offValueSymbol=canSymbol_1_6_5_canSymbol.for("can.offValue"),inSetupSymbol$1=canSymbol_1_6_5_canSymbol.for("can.initializing"),legacyMapBindings;function addHandlers(e,t){t.handlers||(t.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Object,Object,Array],{onFirst:function(){e._eventSetup!==void 0&&e._eventSetup();var t=e.constructor;t[dispatchBoundChangeSymbol]!==void 0&&e instanceof t&&t[dispatchBoundChangeSymbol](e,!0)},onEmpty:function(){e._eventTeardown!==void 0&&e._eventTeardown();var t=e.constructor;t[dispatchBoundChangeSymbol]!==void 0&&e instanceof t&&t[dispatchBoundChangeSymbol](e,!1)}})),t.listenHandlers||(t.listenHandlers=new canKeyTree_1_2_2_canKeyTree([Map,Map,Object,Array]))}var ensureMeta=function(e){var t=e[metaSymbol];return t||(t={},canReflect_1_18_0_canReflect.setKeyValue(e,metaSymbol,t)),addHandlers(e,t),t};function stopListeningArgumentsToKeys(e,t,n,a){arguments.length&&canReflect_1_18_0_canReflect.isPrimitive(e)&&(a=n,n=t,t=e,e=this.context),"function"==typeof t&&(a=n,n=t,t=void 0),"string"==typeof n&&(a=n,n=void 0);var o=[];return e&&(o.push(e),(t||n||a)&&(o.push(t),(a||n)&&(o.push(a||this.defaultQueue),n&&o.push(n)))),o}var props={dispatch:function(e,t){if(!0!==this.__inSetup&&!0!==this[inSetupSymbol$1]){"string"==typeof e&&(e={type:e});var n=ensureMeta(this),a=n.handlers,o=void 0!==e.type&&a.getNode([e.type]),r=e.patches&&this.constructor[dispatchInstanceOnPatchesSymbol],i=void 0!==e.patches&&a.getNode(["can.patches","onKeyValue"]),s=void 0!==e.keyChanged&&a.getNode(["can.keys","onKeyValue"]),l=r||o||i||s;if(l&&canQueues_1_3_1_canQueues.batch.start(),o&&(o.onKeyValue&&canQueues_1_3_1_canQueues.enqueueByQueue(o.onKeyValue,this,t,e.makeMeta,e.reasonLog),o.event)){e.batchNum=canQueues_1_3_1_canQueues.batch.number();var d=[e].concat(t);canQueues_1_3_1_canQueues.enqueueByQueue(o.event,this,d,e.makeMeta,e.reasonLog)}s&&canQueues_1_3_1_canQueues.enqueueByQueue(s,this,[e.keyChanged],e.makeMeta,e.reasonLog),i&&canQueues_1_3_1_canQueues.enqueueByQueue(i,this,[e.patches],e.makeMeta,e.reasonLog),r&&this.constructor[dispatchInstanceOnPatchesSymbol](this,e.patches),l&&canQueues_1_3_1_canQueues.batch.stop()}return e},addEventListener:function(e,t,n){return ensureMeta(this).handlers.add([e,"event",n||"mutate",t]),this},removeEventListener:function(e,t,n){if(e===void 0){var a=ensureMeta(this).handlers,o=a.getNode([]);Object.keys(o).forEach(function(e){a.delete([e,"event"])})}else t||n?t?ensureMeta(this).handlers.delete([e,"event",n||"mutate",t]):ensureMeta(this).handlers.delete([e,"event",n||"mutate"]):ensureMeta(this).handlers.delete([e,"event"]);return this},one:function(e,t){var n=function(){return legacyMapBindings.off.call(this,e,n),t.apply(this,arguments)};return legacyMapBindings.on.call(this,e,n),this},listenTo:function(e,t,n,a){return canReflect_1_18_0_canReflect.isPrimitive(e)&&(a=n,n=t,t=e,e=this),"function"==typeof t&&(a=n,n=t,t=void 0),ensureMeta(this).listenHandlers.add([e,t,a||"mutate",n]),legacyMapBindings.on.call(e,t,n,a||"mutate"),this},stopListening:function(){function e(e,t,n,a){legacyMapBindings.off.call(e,t,a,n)}var t=stopListeningArgumentsToKeys.apply({context:this,defaultQueue:"mutate"},arguments),n=ensureMeta(this).listenHandlers;return n.delete(t,e),this},on:function(e,t,n){var a=isDomEventTarget$1(this);if(a)"string"==typeof t?canDomEvents_1_3_11_canDomEvents.addDelegateListener(this,e,t,n):canDomEvents_1_3_11_canDomEvents.addEventListener(this,e,t,n);else if(this[onEventSymbol])this[onEventSymbol](e,t,n);else if("addEventListener"in this)this.addEventListener(e,t,n);else if(this[onKeyValueSymbol$1])canReflect_1_18_0_canReflect.onKeyValue(this,e,t,n);else if(!e&&this[onValueSymbol$1])canReflect_1_18_0_canReflect.onValue(this,t,n);else throw new Error("can-event-queue: Unable to bind "+e);return this},off:function(e,t,n){var a=isDomEventTarget$1(this);if(a)"string"==typeof t?canDomEvents_1_3_11_canDomEvents.removeDelegateListener(this,e,t,n):canDomEvents_1_3_11_canDomEvents.removeEventListener(this,e,t,n);else if(this[offEventSymbol])this[offEventSymbol](e,t,n);else if("removeEventListener"in this)this.removeEventListener(e,t,n);else if(this[offKeyValueSymbol])canReflect_1_18_0_canReflect.offKeyValue(this,e,t,n);else if(!e&&this[offValueSymbol])canReflect_1_18_0_canReflect.offValue(this,t,n);else throw new Error("can-event-queue: Unable to unbind "+e);return this}},symbols$1={"can.onKeyValue":function(e,t,n){ensureMeta(this).handlers.add([e,"onKeyValue",n||"mutate",t])},"can.offKeyValue":function(e,t,n){ensureMeta(this).handlers.delete([e,"onKeyValue",n||"mutate",t])},"can.isBound":function(){return!ensureMeta(this).handlers.isEmpty()},"can.getWhatIChange":function(){},"can.onPatches":function(e,t){var n=ensureMeta(this).handlers;n.add(["can.patches","onKeyValue",t||"notify",e])},"can.offPatches":function(e,t){var n=ensureMeta(this).handlers;n.delete(["can.patches","onKeyValue",t||"notify",e])}};function defineNonEnumerable(e,t,n){Object.defineProperty(e,t,{enumerable:!1,value:n})}legacyMapBindings=function(e){return canReflect_1_18_0_canReflect.assignMap(e,props),canReflect_1_18_0_canReflect.assignSymbols(e,symbols$1)},defineNonEnumerable(legacyMapBindings,"addHandlers",addHandlers),defineNonEnumerable(legacyMapBindings,"stopListeningArgumentsToKeys",stopListeningArgumentsToKeys),props.bind=props.addEventListener,props.unbind=props.removeEventListener,canReflect_1_18_0_canReflect.assignMap(legacyMapBindings,props),canReflect_1_18_0_canReflect.assignSymbols(legacyMapBindings,symbols$1),defineNonEnumerable(legacyMapBindings,"start",function(){console.warn("use can-queues.batch.start()"),canQueues_1_3_1_canQueues.batch.start()}),defineNonEnumerable(legacyMapBindings,"stop",function(){console.warn("use can-queues.batch.stop()"),canQueues_1_3_1_canQueues.batch.stop()}),defineNonEnumerable(legacyMapBindings,"flush",function(){console.warn("use can-queues.flush()"),canQueues_1_3_1_canQueues.flush()}),defineNonEnumerable(legacyMapBindings,"afterPreviousEvents",function(e){console.warn("don't use afterPreviousEvents"),canQueues_1_3_1_canQueues.mutateQueue.enqueue(function(){canQueues_1_3_1_canQueues.mutateQueue.enqueue(e)}),canQueues_1_3_1_canQueues.flush()}),defineNonEnumerable(legacyMapBindings,"after",function(e){console.warn("don't use after"),canQueues_1_3_1_canQueues.mutateQueue.enqueue(e),canQueues_1_3_1_canQueues.flush()});var map$1=legacyMapBindings,getChangesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord"),metaSymbol$1=canSymbol_1_6_5_canSymbol.for("can.meta");function ResolverObservable(e,t,n,a){this.resolver=canObservationRecorder_1_3_1_canObservationRecorder.ignore(e),this.context=t,this._valueOptions={resolve:this.resolve.bind(this),listenTo:this.listenTo.bind(this),stopListening:this.stopListening.bind(this),lastSet:new canSimpleObservable_2_5_0_canSimpleObservable(n)},this.update=this.update.bind(this),this.contextHandlers=new WeakMap,this.teardown=null,this.binder={},this[metaSymbol$1]=canReflect_1_18_0_canReflect.assignMap({},a)}ResolverObservable.prototype=Object.create(settable.prototype);function deleteHandler(e,t,n,a){map$1.off.call(e,t,a,n)}canReflect_1_18_0_canReflect.assignMap(ResolverObservable.prototype,{constructor:ResolverObservable,listenTo:function(e,t,n,a){canReflect_1_18_0_canReflect.isPrimitive(e)&&(n=t,t=e,e=this.context),"function"==typeof t&&(n=t,t=void 0);var o=this,r=n.bind(this.context);r[getChangesSymbol$1]=function(){var e=new Set([o]);return{valueDependencies:e}},this.contextHandlers.set(n,r),map$1.listenTo.call(this.binder,e,t,r,a||"notify")},stopListening:function(){var e=this.binder[canSymbol_1_6_5_canSymbol.for("can.meta")],t=e&&e.listenHandlers;if(t){var n=map$1.stopListeningArgumentsToKeys.call({context:this.context,defaultQueue:"notify"});t.delete(n,deleteHandler)}return this},resolve:function(e){if(this._value=e,this.isBinding)return this.lastValue=this._value,e;if(this._value!==this.lastValue){canQueues_1_3_1_canQueues.batch.start(),canQueues_1_3_1_canQueues.deriveQueue.enqueue(this.update,this,[],{}),canQueues_1_3_1_canQueues.batch.stop()}return e},update:function(){if(this.lastValue!==this._value){var e=this.lastValue;this.lastValue=this._value,canQueues_1_3_1_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[this._value,e])}},activate:function(){this.isBinding=!0,this.teardown=this.resolver.call(this.context,this._valueOptions),this.isBinding=!1},onUnbound:function(){this.bound=!1,map$1.stopListening.call(this.binder),null!=this.teardown&&(this.teardown(),this.teardown=null)},set:function(e){this._valueOptions.lastSet.set(e)},get:function(){if(canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&this.onBound()),!0===this.bound)return this._value;this[metaSymbol$1].resetUnboundValueInGet&&(this._value=void 0);var e=function(){};this.on(e);var t=this._value;return this.off(e),t},hasDependencies:function e(){var e=!1;if(this.bound){var t=this.binder[metaSymbol$1],n=t&&t.listenHandlers;e=!!n.size()}return e},getValueDependencies:function(){if(this.bound){var e=this.binder[canSymbol_1_6_5_canSymbol.for("can.meta")],t=e&&e.listenHandlers,n=new Map,a=new Set;if(t&&(canReflect_1_18_0_canReflect.each(t.root,function(e,t){canReflect_1_18_0_canReflect.each(e,function(e,o){if(void 0===o)a.add(t);else{var r=n.get(t);r||(r=new Set,n.set(t,r)),r.add(o)}})}),a.size||n.size)){var o={};return n.size&&(o.keyDependencies=n),a.size&&(o.valueDependencies=a),o}}}}),canReflect_1_18_0_canReflect.assignSymbols(ResolverObservable.prototype,{"can.getValue":ResolverObservable.prototype.get,"can.setValue":ResolverObservable.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return this.priority||0},"can.setPriority":function(e){this.priority=e},"can.valueHasDependencies":ResolverObservable.prototype.hasDependencies,"can.getValueDependencies":ResolverObservable.prototype.getValueDependencies});var resolver=ResolverObservable,metaSymbol$2=canSymbol_1_6_5_canSymbol.for("can.meta");function addHandlers$1(e,t){t.lifecycleHandlers||(t.lifecycleHandlers=new canKeyTree_1_2_2_canKeyTree([Object,Array])),t.instancePatchesHandlers||(t.instancePatchesHandlers=new canKeyTree_1_2_2_canKeyTree([Object,Array]))}function ensureMeta$1(e){var t=e[metaSymbol$2];return t||(t={},canReflect_1_18_0_canReflect.setKeyValue(e,metaSymbol$2,t)),addHandlers$1(e,t),t}var props$1={};function onOffAndDispatch(e,t,n){props$1["can.on"+e]=function(e,t){ensureMeta$1(this)[n].add([t||"mutate",e])},props$1["can.off"+e]=function(e,t){ensureMeta$1(this)[n].delete([t||"mutate",e])},props$1["can."+t]=function(e,t){canQueues_1_3_1_canQueues.enqueueByQueue(ensureMeta$1(this)[n].getNode([]),this,[e,t])}}onOffAndDispatch("InstancePatches","dispatchInstanceOnPatches","instancePatchesHandlers"),onOffAndDispatch("InstanceBoundChange","dispatchInstanceBoundChange","lifecycleHandlers");function mixinTypeBindings(e){return canReflect_1_18_0_canReflect.assignSymbols(e,props$1)}Object.defineProperty(mixinTypeBindings,"addHandlers",{enumerable:!1,value:addHandlers$1});var type$1=mixinTypeBindings,strUndHash=/_|-/,strColons=/\=\=/,strWords=/([A-Z]+)([A-Z][a-z])/g,strLowUp=/([a-z\d])([A-Z])/g,strDash=/([a-z\d])([A-Z])/g,strQuote=/"/g,strSingleQuote=/'/g,strHyphenMatch=/-+(.)?/g,strCamelMatch=/[a-z][A-Z]/g,convertBadValues=function(e){var t=null===e||e===void 0||isNaN(e)&&"NaN"==""+e;return""+(t?"":e)},string={esc:function(e){return convertBadValues(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(strQuote,"&#34;").replace(strSingleQuote,"&#39;")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},camelize:function(e){return convertBadValues(e).replace(strHyphenMatch,function(e,t){return t?t.toUpperCase():""})},hyphenate:function(e){return convertBadValues(e).replace(strCamelMatch,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},pascalize:function(e){return string.capitalize(string.camelize(e))},underscore:function(e){return e.replace(strColons,"/").replace(strWords,"$1_$2").replace(strLowUp,"$1_$2").replace(strDash,"_").toLowerCase()},undHash:strUndHash},canString_1_1_0_canString=string,canType_1_1_4_canType=createCommonjsModule(function(e,t){function n(e){return function(){return{type:"Or",values:e}}}function a(e){return this[v](e)?e:canReflect_1_18_0_canReflect.convert(e,this[V])}function r(e){var t=this[v](e);return t?e:s(this[V],e)}function i(e){return"false"!==e&&"0"!==e&&!!e}function s(e,t){var n=canString_1_1_0_canString.capitalize(typeof t),a=new Error("string"=="Type value "+typeof t?"\""+t+"\"":t+" ("+n+") is not of type "+canReflect_1_18_0_canReflect.getName(e)+".");throw a.type="can-type-error",a}function l(e){return v in e?e[v]:function(t){return t instanceof e}}function d(e){var t={};return t[k]=a,t[v]=l(e),t[V]=e,t[S]=n([e]),e[x]=t[x]=t,t}function p(e,t){var a=d(e);return e===Boolean&&(a[k]=i,a[S]=n([!0,!1])),a[v]=function(e){return typeof e===t},a}function c(e){if("function"==typeof e){if(canReflect_1_18_0_canReflect.hasOwnKey(e,x))return e[x];}else if(x in e)return e[x];return d(e)}function u(e){var t=e[v];return function(e){return null==e||t.call(this,e)}}function y(e){var t=canReflect_1_18_0_canReflect.getSchema(e),a=t.values.concat(L);return n(a)}function m(e,t,n){n in t&&(e[n]=t[n])}function h(e,t){var n=canReflect_1_18_0_canReflect.getName(t);return"type."+e+"("+n+")"}function g(e){return!canReflect_1_18_0_canReflect.isPrimitive(e)&&k in e&&v in e}function f(e,t){function n(e){var n=canReflect_1_18_0_canReflect.getSchema(this),a=n.keys,o={};return canReflect_1_18_0_canReflect.eachKey(e||{},function(e,t){o[t]=canReflect_1_18_0_canReflect.convert(e,a[t])}),canReflect_1_18_0_canReflect.new(t,o)}var a=e(t);return a[S]=function(){var n=canReflect_1_18_0_canReflect.getSchema(t),a=canReflect_1_18_0_canReflect.assignMap({},n);return a.keys={},canReflect_1_18_0_canReflect.eachKey(n.keys,function(t,n){a.keys[n]=e(t)}),a},canReflect_1_18_0_canReflect.setName(n,"Converted<"+canReflect_1_18_0_canReflect.getName(t)+">"),n.prototype=a,n}function b(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var a=e.call(this,n);return t.set(n,a),a}}var v=canSymbol_1_6_5_canSymbol.for("can.isMember"),k=canSymbol_1_6_5_canSymbol.for("can.new"),S=canSymbol_1_6_5_canSymbol.for("can.getSchema"),V=canSymbol_1_6_5_canSymbol.for("can.baseType"),x=canSymbol_1_6_5_canSymbol.for("can.strictTypeOf"),C=t,L=Object.freeze([null,void 0]);canReflect_1_18_0_canReflect.each({boolean:Boolean,number:Number,string:String},function(e,t){p(e,t)});var w=canReflect_1_18_0_canReflect.assignSymbols({},{"can.new":function(e){return e},"can.isMember":function(){return!0}}),D={};D[k]=function(e){return 0|e},D[v]=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},D[S]=n([Number]),canReflect_1_18_0_canReflect.setName(D,"Integer"),t.check=b(function(e){var t=Object.create(c(e));return t[k]=r,m(t,e,v),m(t,e,S),canReflect_1_18_0_canReflect.setName(t,h("check",e)),t}),t.convert=b(function(e){var t=Object.create(c(e));return m(t,e,v),m(t,e,S),canReflect_1_18_0_canReflect.setName(t,h("convert",e)),t}),t.maybe=b(function(e){var t=c(e),n={};n[k]={value:r},n[v]={value:u(t)},n[S]={value:y(t)};var a=Object.create(t,n);return canReflect_1_18_0_canReflect.setName(a,h("maybe",e)),a}),t.maybeConvert=b(function(e){var t=c(e),n={};n[v]={value:u(t)},n[S]={value:y(t)};var a=Object.create(t,n);return canReflect_1_18_0_canReflect.setName(a,h("maybeConvert",e)),a}),t.Any=w,t.Integer=D,t.late=function(e){var t=function(){return n=C.normalize(e()),t=function(){return n},n},n;return canReflect_1_18_0_canReflect.assignSymbols({},{"can.new":function(e){return canReflect_1_18_0_canReflect.new(t(),e)},"can.isMember":function(e){return t()[v](e)}})},t.isTypeObject=g,t.normalize=function(e){if(canReflect_1_18_0_canReflect.isPrimitive(e))throw new Error("can-type: Unable to normalize primitive values.");else return g(e)?e:C.check(e)},t.all=f,t.convertAll=f.bind(null,t.convert),canNamespace_1_0_0_canNamespace.type=t}),canType_1_1_4_canType_1=canType_1_1_4_canType.check,canType_1_1_4_canType_2=canType_1_1_4_canType.convert,canType_1_1_4_canType_3=canType_1_1_4_canType.maybe,canType_1_1_4_canType_4=canType_1_1_4_canType.maybeConvert,canType_1_1_4_canType_5=canType_1_1_4_canType.Any,canType_1_1_4_canType_6=canType_1_1_4_canType.Integer,canType_1_1_4_canType_7=canType_1_1_4_canType.late,canType_1_1_4_canType_8=canType_1_1_4_canType.isTypeObject,canType_1_1_4_canType_9=canType_1_1_4_canType.normalize,canType_1_1_4_canType_10=canType_1_1_4_canType.all,canType_1_1_4_canType_11=canType_1_1_4_canType.convertAll,newSymbol$1=Symbol.for("can.new"),serializeSymbol=Symbol.for("can.serialize"),inSetupSymbol$2=Symbol.for("can.initializing"),isMemberSymbol$1=Symbol.for("can.isMember"),hasBeenDefinedSymbol=Symbol.for("can.hasBeenDefined"),canMetaSymbol=Symbol.for("can.meta"),define,eventsProto,define,make,makeDefinition,getDefinitionsAndMethods,getDefinitionOrMethod;function isDefineType(e){return e&&(!0===e.canDefineType||e[newSymbol$1])}function observableType(){throw new Error("This is not currently implemented.")}var browserSupportsAsyncFunctions=function(){try{return AsyncFunction=async function(){}.constructor,!0}catch(t){return!1}}(),AsyncFunction;function isAsyncFunction(e){return!!browserSupportsAsyncFunctions&&e&&e instanceof AsyncFunction}var peek$2=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getValue.bind(canReflect_1_18_0_canReflect)),Object_defineNamedPrototypeProperty=Object.defineProperty;function defineConfigurableAndNotEnumerable(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}function defineNotWritableAndNotEnumerable(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!1})}function eachPropertyDescriptor(e,t,...n){for(var a of Object.getOwnPropertyNames(e))e.hasOwnProperty(a)&&t.call(e,a,Object.getOwnPropertyDescriptor(e,a),...n)}function getEveryPropertyAndSymbol(e){var t=Object.getOwnPropertyNames(e),n="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(e):[];return t.concat(n)}var define_1=define=function(e,t,n,a={}){var o=Object.create(n?n.dataInitializers:null),r=Object.create(n?n.computedInitializers:null),i=new Set,s=getDefinitionsAndMethods(t,n,e,a),l;if(s.dataInitializers=o,s.computedInitializers=r,s.required=i,canReflect_1_18_0_canReflect.eachKey(s.definitions,function(t,n){!0===t.required&&i.add(n),define.property(e,n,t,o,r,s.defaultDefinition)}),e.hasOwnProperty("_data"))for(l in o)canDefineLazyValue_1_1_1_defineLazyValue(e._data,l,o[l].bind(e),!0);else canDefineLazyValue_1_1_1_defineLazyValue(e,"_data",function(){var e=this,t={};for(var n in o)canDefineLazyValue_1_1_1_defineLazyValue(t,n,o[n].bind(e),!0);return t});if(e.hasOwnProperty("_computed"))for(l in r)canDefineLazyValue_1_1_1_defineLazyValue(e._computed,l,r[l].bind(e));else canDefineLazyValue_1_1_1_defineLazyValue(e,"_computed",function(){var e=this,t=Object.create(null);for(var n in r)canDefineLazyValue_1_1_1_defineLazyValue(t,n,r[n].bind(e));return t});getEveryPropertyAndSymbol(eventsProto).forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,value:eventsProto[t],configurable:!0,writable:!0})}),Object.defineProperty(e,"_define",{enumerable:!1,value:s,configurable:!0,writable:!0});var d=Symbol.iterator||Symbol.for("iterator");return e[d]||defineConfigurableAndNotEnumerable(e,d,function(){return new define.Iterator(this)}),s},onlyType=function(e){for(var t in e)if("type"!=t)return!1;return!0},callAsync=function(e){return function(t,n){let a=e.call(this,n,t);return canReflect_1_18_0_canReflect.isPromise(a)?void a.then(n):a}};define.extensions=function(){},define.isEnumerable=function(e){return"object"!=typeof e||("serialize"in e?!!e.serialize:!e.get&&!e.async&&!e.value)},define.property=function(e,t,n,a,o,r){var i=define.extensions.apply(this,arguments);i&&(n=makeDefinition(t,i,r||{},e));var s=n.type;if(s&&onlyType(n)&&s===s.Any)return void Object_defineNamedPrototypeProperty(e,t,{get:make.get.data(t),set:make.set.events(t,make.get.data(t),make.set.data(t),make.eventType.data(t)),enumerable:!0,configurable:!0});n.type=s;var l=n.get||n.async||n.value?"computed":"data",d=make.read[l](t),p=make.get[l](t),c=make.set[l](t),u=function(e){return e},y;s&&(u=make.set.type(t,s,u));var m=make.set.events(t,d,c,make.eventType[l](t));n.value?o[t]=make.resolver(t,n,u):n.default!==void 0&&(y=canObservationRecorder_1_3_1_canObservationRecorder.ignore(make.get.defaultValue(t,n,u,m))),n.get?o[t]=make.compute(t,n.get,y):n.async?o[t]=make.compute(t,callAsync(n.async),y):y&&(a[t]=y),n.get&&n.set?c=make.set.setter(t,n.set,make.read.lastSet(t),c,!0):n.set?c=make.set.setter(t,n.set,d,m,!1):"data"===l?c=m:n.get&&1>n.get.length&&(c=function(){}),s&&(c=make.set.type(t,s,c)),Object_defineNamedPrototypeProperty(e,t,{get:p,set:c,enumerable:define.isEnumerable(n),configurable:!0})},define.makeDefineInstanceKey=function(e){e[Symbol.for("can.defineInstanceKey")]=function(e,t){define.hooks.finalizeClass(this);var n=this.prototype._define;t&&"undefined"!=typeof t.value&&(t.default=t.value,t.type=canType_1_1_4_canType.Any,delete t.value);var a=getDefinitionOrMethod(e,t,n.defaultDefinition,this);a&&"object"==typeof a?(define.property(this.prototype,e,a,n.dataInitializers,n.computedInitializers,n.defaultDefinition),n.definitions[e]=a):n.methods[e]=a,this.prototype.dispatch({action:"can.keys",type:"can.keys",target:this.prototype})}},define.Constructor=function(e,t){var n=function(e){Object.defineProperty(this,inSetupSymbol$2,{configurable:!0,enumerable:!1,value:!0,writable:!0}),define.setup.call(this,e,t),this[inSetupSymbol$2]=!1},a=define(n.prototype,e);return type$1(n),define.makeDefineInstanceKey(n,a),n},make={computeObj:function(e,t,n){var a={oldValue:void 0,compute:n,count:0,handler:function(n){var o=a.oldValue;a.oldValue=n,e.dispatch({action:"prop",key:t,value:n,oldValue:o,type:t,target:e},[n,o])}};return a},resolver:function(e,t,n){var a=make.get.defaultValue(e,t,n);return function(){var n=this,o=a.call(this),r=make.computeObj(n,e,new resolver(t.value,n,o,{resetUnboundValueInGet:!0}));return r}},compute:function(e,t,n){return function(){var a=this,o=n&&n.call(this),r,i;return r=0===t.length?new canObservation_4_2_0_canObservation(t,a):1===t.length?new settable(t,a,o):new async(t,a,o),i=make.computeObj(a,e,r),i}},set:{data:function(e){return function(t){this._data[e]=t}},computed:function(e){return function(t){canReflect_1_18_0_canReflect.setValue(this._computed[e].compute,t)}},events:function(e,t,n){return function(a){if(this[inSetupSymbol$2])n.call(this,a);else{var o=t.call(this);if(a!==o){var r;n.call(this,a),r={patches:[{type:"set",key:e,value:a}],action:"prop",key:e,value:a,oldValue:o,type:e,target:this},this.dispatch(r,[a,o])}}}},eventDispatcher:function(e,t,n,a){if(!e[inSetupSymbol$2]&&a!==n){map$1.dispatch.call(e,{patches:[{type:"set",key:t,value:a}],action:"prop",key:t,value:a,oldValue:n,type:t,target:e},[a,n])}},setter:function(e,t,n,a,o){return function(e){canQueues_1_3_1_canQueues.batch.start();var r=n.call(this),i=t.call(this,e,r);if(o){if(void 0!==i)r!==i&&a.call(this,i),canQueues_1_3_1_canQueues.batch.stop();else{if(0===t.length)return a.call(this,e),void canQueues_1_3_1_canQueues.batch.stop();if(1===t.length)canQueues_1_3_1_canQueues.batch.stop();else return void canQueues_1_3_1_canQueues.batch.stop()}}else if(void 0!==i)a.call(this,i),canQueues_1_3_1_canQueues.batch.stop();else{if(0===t.length)return a.call(this,e),void canQueues_1_3_1_canQueues.batch.stop();if(1===t.length)a.call(this,void 0),canQueues_1_3_1_canQueues.batch.stop();else return void canQueues_1_3_1_canQueues.batch.stop()}}},type:function(e,t,n){function a(a){return n.call(this,t.call(this,a,e))}return isDefineType(t)?t.canDefineType?a:function(e){return n.call(this,canReflect_1_18_0_canReflect.convert(e,t))}:a}},eventType:{data:function(e){return function(t,n){return n!==void 0||this._data.hasOwnProperty(e)?"set":"add"}},computed:function(){return function(){return"set"}}},read:{data:function(e){return function(){return this._data[e]}},computed:function(e){return function(){return canReflect_1_18_0_canReflect.getValue(this._computed[e].compute)}},lastSet:function(e){return function(){var t=this._computed[e].compute;if(t.lastSetValue)return canReflect_1_18_0_canReflect.getValue(t.lastSetValue)}}},get:{defaultValue:function(e,t,n,a){return function(){var o=t.default;if(void 0!==o&&("function"==typeof o&&o.isAGetter&&(o=o.call(this)),o=n.call(this,o)),t.set){var r=!0,i=make.set.setter(e,t.set,function(){},function(e){r?s=e:a.call(this,e)},t.get),s;return i.call(this,o),r=!1,s}return o}},data:function(e){return function(){return this[inSetupSymbol$2]||canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this._data[e]}},computed:function(e){return function(){var t=this._computed[e].compute;return canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),!canReflect_1_18_0_canReflect.isBound(t)&&canObservation_4_2_0_canObservation.temporarilyBind(t)),peek$2(t)}}}},define.behaviors=["get","set","value","type","serialize"];var addBehaviorToDefinition=function(e,t,n,a,o,r){if("enumerable"===t)e.serialize=!!a[t];else if("type"===t){var i=a[t];"undefined"!=typeof i&&(e[t]=i)}else{var s=n.get||n.value;n.get&&(s.isAGetter=!0),"async"==t&&1===s.length&&isAsyncFunction(s)&&dev.warn(`${canReflect_1_18_0_canReflect.getName(r)}: async property [${o}] should not be an async function and also use the resolve() argument. Remove the argument and return a value from the async function instead.`),e[t]=s}};makeDefinition=function(e,t,n,a){var o={};if(eachPropertyDescriptor(t,function(n,r){addBehaviorToDefinition(o,n,r,t,e,a)}),canReflect_1_18_0_canReflect.eachKey(n,function(e,t){void 0===o[t]&&"type"!==t&&(o[t]=e)}),t.type){var r=t.type,i=r[serializeSymbol];i&&(o.serialize=function(e){return i.call(e)}),o.type=canType_1_1_4_canType.normalize(r)}var s=!o.type&&(!n.type||n.type&&n.typeSetByDefault);if(o.hasOwnProperty("default")&&("function"==typeof o.default&&!o.default.isAGetter&&s&&(o.type=canType_1_1_4_canType.normalize(Function)),canReflect_1_18_0_canReflect.isPrimitive(o.default)&&s&&(null===o.default||"undefined"==typeof o.default?o.type=canType_1_1_4_canType.Any:o.type=canType_1_1_4_canType.normalize(o.default.constructor))),!o.type){var l=canReflect_1_18_0_canReflect.assignMap({},n);o=canReflect_1_18_0_canReflect.assignMap(l,o)}return 0===canReflect_1_18_0_canReflect.size(o)&&(o.type=canType_1_1_4_canType.Any,o.typeSetByDefault=!0),o},getDefinitionOrMethod=function(e,t,n,a){var o,r;return canReflect_1_18_0_canReflect.isPrimitive(t)?(r=null===t||"undefined"==typeof t?canType_1_1_4_canType.Any:n.typeSetByDefault?canType_1_1_4_canType.normalize(t.constructor):n.type,o={default:t,type:r}):t&&(t[serializeSymbol]||t[newSymbol$1])?t[isMemberSymbol$1]?o={type:t}:o={type:canType_1_1_4_canType.normalize(t)}:"function"==typeof t?canReflect_1_18_0_canReflect.isConstructorLike(t)?o={type:canType_1_1_4_canType.normalize(t)}:o={default:t,type:Function}:Array.isArray(t)?o={type:canType_1_1_4_canType.normalize(Array)}:canReflect_1_18_0_canReflect.isPlainObject(t)&&(o=t),o?makeDefinition(e,o,n,a):t},getDefinitionsAndMethods=function(e,t,n,a){function o(e,t,a){var o;if(o=t.get||t.set?{get:t.get,set:t.set}:t.value,"constructor"===e||a&&"function"==typeof o)return void(i[e]=o);var l=getDefinitionOrMethod(e,o,s,n),d=typeof l;l&&"object"===d&&0<canReflect_1_18_0_canReflect.size(l)?r[e]=l:"function"===d&&(i[e]=l)}var r=Object.create(t?t.definitions:null),i={},s;return s=a?getDefinitionOrMethod("*",a,{},n):Object.create(null),eachPropertyDescriptor(n,o,!0),eachPropertyDescriptor(e,o),a&&defineConfigurableAndNotEnumerable(e,"*",a),{definitions:r,methods:i,defaultDefinition:s}},eventsProto=map$1({});function setupComputed(e,t){var n=e._computed&&e._computed[t];n&&n.compute&&(n.count?n.count++:(n.count=1,canReflect_1_18_0_canReflect.onValue(n.compute,n.handler,"notify"),n.oldValue=peek$2(n.compute)))}function teardownComputed(e,t){var n=e._computed&&e._computed[t];n&&(1===n.count?(n.count=0,canReflect_1_18_0_canReflect.offValue(n.compute,n.handler,"notify")):n.count--)}canAssign_1_3_3_canAssign(eventsProto,{_eventSetup:function(){},_eventTeardown:function(){},addEventListener:function(e){return setupComputed(this,e),map$1.addEventListener.apply(this,arguments)},removeEventListener:function(e){return teardownComputed(this,e),map$1.removeEventListener.apply(this,arguments)}}),eventsProto.on=eventsProto.bind=eventsProto.addEventListener,eventsProto.off=eventsProto.unbind=eventsProto.removeEventListener;var onKeyValueSymbol$2=Symbol.for("can.onKeyValue"),offKeyValueSymbol$1=Symbol.for("can.offKeyValue");canReflect_1_18_0_canReflect.assignSymbols(eventsProto,{"can.onKeyValue":function(e){return setupComputed(this,e),map$1[onKeyValueSymbol$2].apply(this,arguments)},"can.offKeyValue":function(e){return teardownComputed(this,e),map$1[offKeyValueSymbol$1].apply(this,arguments)}}),delete eventsProto.one,define.finalizeInstance=function(){defineNotWritableAndNotEnumerable(this,"constructor",this.constructor),defineNotWritableAndNotEnumerable(this,canMetaSymbol,Object.create(null))},define.setup=function(e,t){var n=new Set(this._define.required),a=this._define.definitions,o=Object.create(null),r=this;if(canReflect_1_18_0_canReflect.eachKey(e,function(e,o){if(n.has(o)&&n.delete(o),void 0!==a[o])r[o]=e;else{if(t)throw new Error(`The type ${canReflect_1_18_0_canReflect.getName(r.constructor)} is sealed, but the property [${o}] has no definition.`);define.expando(r,o,e)}}),0<canReflect_1_18_0_canReflect.size(o)&&defineConfigurableAndNotEnumerable(this,"_instanceDefinitions",o),n.size){var i=Array.from(n),s;let e=canReflect_1_18_0_canReflect.getName(this);throw s=1===n.size?`${e}: Missing required property [${i[0]}].`:`${e}: Missing required properties [${i.join(", ")}].`,new Error(s)}};var returnFirstArg=function(e){return e};define.normalizeTypeDefinition=canType_1_1_4_canType.normalize,define.expando=function(e,t,n){if(define._specialKeys[t])return!0;var a=e._define.definitions;if(!(a&&a[t])){var o=e._instanceDefinitions;if(!o){if(Object.isSealed(e)){let n=`Cannot set property [${t}] on sealed instance of ${canReflect_1_18_0_canReflect.getName(e)}`;throw new Error(n)}Object.defineProperty(e,"_instanceDefinitions",{configurable:!0,enumerable:!1,writable:!0,value:{}}),o=e._instanceDefinitions}if(!o[t]){var r=e._define.defaultDefinition||{type:observableType};return define.property(e,t,r,{},{}),e._data[t]=r.type?define.make.set.type(t,r.type,returnFirstArg).call(e,n):observableType(n),o[t]=r,e[inSetupSymbol$2]||(canQueues_1_3_1_canQueues.batch.start(),e.dispatch({action:"can.keys",type:"can.keys",target:e}),Object.prototype.hasOwnProperty.call(e._data,t)?e.dispatch({action:"add",key:t,type:t,value:e._data[t],target:e,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]):e.dispatch({action:"set",type:"set",value:e._data[t],target:e,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]),canQueues_1_3_1_canQueues.batch.stop()),!0}}},define.replaceWith=canDefineLazyValue_1_1_1_defineLazyValue,define.eventsProto=eventsProto,define.defineConfigurableAndNotEnumerable=defineConfigurableAndNotEnumerable,define.make=make,define.getDefinitionOrMethod=getDefinitionOrMethod,define._specialKeys={_data:!0,_computed:!0};var simpleGetterSetters={};define.makeSimpleGetterSetter=function(e){if(simpleGetterSetters[e]===void 0){var t=make.set.events(e,make.get.data(e),make.set.data(e),make.eventType.data(e));simpleGetterSetters[e]={get:make.get.data(e),set:function(e){return t.call(this,observableType(e))},enumerable:!0,configurable:!0}}return simpleGetterSetters[e]},define.Iterator=function(e){this.obj=e,this.definitions=Object.keys(e._define.definitions),this.instanceDefinitions=e._instanceDefinitions?Object.keys(e._instanceDefinitions):Object.keys(e),this.hasGet="function"==typeof e.get},define.Iterator.prototype.next=function(){var e;if(this.definitions.length){e=this.definitions.shift();var t=this.obj._define.definitions[e];if(t.get)return this.next()}else if(this.instanceDefinitions.length)e=this.instanceDefinitions.shift();else return{value:void 0,done:!0};return{value:[e,this.hasGet?this.obj.get(e):this.obj[e]],done:!1}},define.updateSchemaKeys=function(e,t){for(var n in t){var a=t[n];!1!==a.serialize&&(e.keys[n]=a.type?a.type:function(e){return e},!0===t[n].identity&&e.identity.push(n))}return e},define.hooks={finalizeClass:function(e){let t=e.hasOwnProperty(hasBeenDefinedSymbol);if(!t){let t=e.prototype,n="object"==typeof e.props?e.props:"object"==typeof e.define?e.define:{};define(t,n,null,e.propertyDefaults),e[hasBeenDefinedSymbol]=!0}},initialize:function(e,t){var n=!e.hasOwnProperty(canMetaSymbol),a=e.constructor.seal;n&&define.finalizeInstance.call(e),e[canMetaSymbol].initialized||(defineConfigurableAndNotEnumerable(e,inSetupSymbol$2,!0),define.setup.call(e,t,a),e[inSetupSymbol$2]=!1,e[canMetaSymbol].initialized=!0)},expando:define.expando,normalizeTypeDefinition:canType_1_1_4_canType.normalize};var ensureMeta$2=function(e){var t=Symbol.for("can.meta"),n=e[t];return n||(n={},canReflect_1_18_0_canReflect.setKeyValue(e,t,n)),n};const defineHelpers={defineExpando:define_1.expando,reflectSerialize:function(e){var t=this._define.definitions,n=this._define.defaultDefinition;return this.forEach(function(a,o){var r=t[o];a=r&&"function"==typeof r.serialize?r.serialize.call(this,a,o):n&&"function"==typeof n.serialize?n.serialize.call(this,a,o):canReflect_1_18_0_canReflect.serialize(a),void 0!==a&&(e[o]=a)},this),e},reflectUnwrap:function(e){return this.forEach(function(t,n){void 0!==t&&(e[n]=canReflect_1_18_0_canReflect.unwrap(t))}),e},log:function(e){var t=this,n=function(e){return"string"==typeof e?JSON.stringify(e):e},a=ensureMeta$2(t),o=a.allowedLogKeysSet||new Set;a.allowedLogKeysSet=o,e&&o.add(e),a._log=function(a,r){var i=a.type;"can.onPatches"===i||e&&!o.has(i)||"can.keys"===i||e&&!o.has(i)||("add"===i||"remove"===i?dev.log(canReflect_1_18_0_canReflect.getName(t),"\n how   ",n(i),"\n what  ",n(r[0]),"\n index ",n(r[1])):dev.log(canReflect_1_18_0_canReflect.getName(t),"\n key ",n(i),"\n is  ",n(r[0]),"\n was ",n(r[1])))}},deleteKey:function(e){var t=this._instanceDefinitions;if(t&&Object.prototype.hasOwnProperty.call(t,e)&&!Object.isSealed(this)){delete t[e],delete this[e],canQueues_1_3_1_canQueues.batch.start(),this.dispatch({action:"can.keys",type:"can.keys",target:this});var n=this._data[e];n!==void 0&&(delete this._data[e],this.dispatch({action:"delete",key:e,oldValue:n,type:e,target:this,patches:[{type:"delete",key:e}]},[void 0,n])),canQueues_1_3_1_canQueues.batch.stop()}else this.set(e,void 0);return this}};var defineHelpers_1=defineHelpers;const{updateSchemaKeys,hooks,isEnumerable}=define_1,getSchemaSymbol$1=Symbol.for("can.getSchema");function keysForDefinition(e){const t=[];for(let n in e)isEnumerable(e[n])&&t.push(n);return t}function assign(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignMap(this,e||{}),canQueues_1_3_1_canQueues.batch.stop()}function update(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.updateList(this,e):canReflect_1_18_0_canReflect.updateMap(this,e||{}),canQueues_1_3_1_canQueues.batch.stop()}function assignDeep(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignDeepMap(this,e||{}),canQueues_1_3_1_canQueues.batch.stop()}function updateDeep(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.updateDeepList(this,e):canReflect_1_18_0_canReflect.updateDeepMap(this,e||{}),canQueues_1_3_1_canQueues.batch.stop()}function setKeyValue(e,t){var n=defineHelpers_1.defineExpando(this,e,t);n||(this[e]=t)}function getKeyValue(e){var t=this[e];return void 0!==t||e in this||Object.isSealed(this)?t:(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this[e])}var mixinMapprops=function(e){return class extends e{static[getSchemaSymbol$1](){hooks.finalizeClass(this);let e=this.prototype._define,t=e?e.definitions:{};return updateSchemaKeys({type:"map",identity:[],keys:{}},t)}get(e){return e?getKeyValue.call(this,e):canReflect_1_18_0_canReflect.unwrap(this,Map)}set(e,t){return"object"==typeof e?!0===t?updateDeep.call(this,e):assignDeep.call(this,e):setKeyValue.call(this,e,t),this}assignDeep(e){return assignDeep.call(this,e),this}updateDeep(e){return updateDeep.call(this,e),this}assign(e){return assign.call(this,e),this}update(e){return update.call(this,e),this}serialize(){return canReflect_1_18_0_canReflect.serialize(this,Map)}deleteKey(){return defineHelpers_1.deleteKey.apply(this,arguments)}forEach(e,t,n){function a(e,t,n){return canReflect_1_18_0_canReflect.eachKey(e,t,n)}return!1===n?void canObservationRecorder_1_3_1_canObservationRecorder.ignore(a)(this,e,t):a(this,e,t)}static[Symbol.for("can.new")](...e){return new this(...e)}get[Symbol.for("can.isMapLike")](){return!0}get[Symbol.for("can.isListLike")](){return!1}get[Symbol.for("can.isValueLike")](){return!1}[Symbol.for("can.getKeyValue")](...e){return getKeyValue.apply(this,e)}[Symbol.for("can.deleteKeyValue")](...e){return defineHelpers_1.deleteKey.call(this,...e)}[Symbol.for("can.getOwnKeys")](){var e=canReflect_1_18_0_canReflect.getOwnEnumerableKeys(this);if(this._computed)for(var t=canReflect_1_18_0_canReflect.getOwnKeys(this._computed),n=0,a;n<t.length;n++)a=t[n],0>e.indexOf(a)&&e.push(a);return e}[Symbol.for("can.getOwnEnumerableKeys")](){return canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.keys"),canObservationRecorder_1_3_1_canObservationRecorder.add(Object.getPrototypeOf(this),"can.keys"),keysForDefinition(this._define.definitions).concat(keysForDefinition(this._instanceDefinitions))}[Symbol.for("can.serialize")](...e){return defineHelpers_1.reflectSerialize.apply(this,e)}[Symbol.for("can.unwrap")](...e){return defineHelpers_1.reflectUnwrap.apply(this,e)}[Symbol.for("can.hasKey")](e){return e in this._define.definitions||this._instanceDefinitions!==void 0&&e in this._instanceDefinitions}[Symbol.for("can.updateDeep")](...e){return this.updateDeep(...e)}}};const eventDispatcher=define_1.make.set.eventDispatcher,inSetupSymbol$3=canSymbol_1_6_5_canSymbol.for("can.initializing");let isProtoReadOnSuper=!1;(function(){if("function"==typeof Proxy){let e=new Proxy(class{fn(){}},{get(e,t,n){return"__proto__"===t&&(isProtoReadOnSuper=!0),Reflect.get(e,t,n)}});new class extends e{fn(){super.fn()}}().fn()}})();function proxyPrototype(e){function t(){let t=Reflect.construct(e,arguments,new.target);return n.add(t),t}const n=new WeakSet,a=Object.create(e.prototype),o=isProtoReadOnSuper?function(e,t,n){return this[inSetupSymbol$3]||"symbol"==typeof t||"__proto__"===t||canObservationRecorder_1_3_1_canObservationRecorder.add(n,t),Reflect.get(e,t,n)}:function(e,t,n){return this[inSetupSymbol$3]||"symbol"==typeof t||canObservationRecorder_1_3_1_canObservationRecorder.add(n,t),Reflect.get(e,t,n)},r={get:o,set(e,t,a,o){if("symbol"==typeof t)return Reflect.set(e,t,a,o),!0;if(t in e||!n.has(o)){let n=Reflect.get(e,t,o);Reflect.set(e,t,a,o),eventDispatcher(o,t,n,a)}else define_1.expando(o,t,a);return!0}};return t.prototype="function"==typeof Proxy?new Proxy(a,r):a,t}var mixinProxy=proxyPrototype;function mixinTypeEvents(e){let t=class extends e{};return type$1(t),map$1(t),t}var mixinTypeevents=mixinTypeEvents;const{hooks:hooks$1,makeDefineInstanceKey}=define_1,constructorPropsSymbol=Symbol.for("can.constructorProps"),renderedSymbol=Symbol.for("can.rendered");var mixinElement=function(e){let t=class extends mixinProxy(e){constructor(e){super(),hooks$1.finalizeClass(this.constructor),this[constructorPropsSymbol]=e}initialize(e){super.initialize&&super.initialize(e),hooks$1.initialize(this,e||this[constructorPropsSymbol])}render(e){super.render&&super.render(e),hooks$1.initialize(this,e||this[constructorPropsSymbol]),this[renderedSymbol]=!0}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[renderedSymbol]||this.render()}};return t=mixinTypeevents(mixinMapprops(t)),makeDefineInstanceKey(t),t},createConstructorFunction_1$1=createConstructorFunction_1,makeDefineInstanceKey$1=define_1.makeDefineInstanceKey,mixins_1=define_1.hooks,mixinElement_1=mixinElement,mixinMapProps_1=mixinMapprops,mixinProxy_1=mixinProxy,mixinTypeEvents_1=mixinTypeevents,mixins={createConstructorFunction:createConstructorFunction_1$1,makeDefineInstanceKey:makeDefineInstanceKey$1,mixins:mixins_1,mixinElement:mixinElement_1,mixinMapProps:mixinMapProps_1,mixinProxy:mixinProxy_1,mixinTypeEvents:mixinTypeEvents_1};const{mixinElement:mixinElement$1}=mixins,eventTargetInstalledSymbol=Symbol.for("can.eventTargetInstalled");var mixinProps=function(e=HTMLElement){function t(e){if(e[eventTargetInstalledSymbol])return;const t=e.prototype.addEventListener,o=e.prototype.removeEventListener;e.prototype.addEventListener=function(){return t.apply(this,arguments),n.apply(this,arguments)},e.prototype.removeEventListener=function(){return o.apply(this,arguments),a.apply(this,arguments)},e[eventTargetInstalledSymbol]=!0}const n=e.prototype.addEventListener,a=e.prototype.removeEventListener;class o extends mixinElement$1(e){constructor(){super(),t(this.constructor)}intialize(e){super.intialize(e)}}return o},canAttributeEncoder_1_1_4_canAttributeEncoder=createCommonjsModule(function(e){function t(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function n(e,t,n){return t+"-"+n.toLowerCase()}function a(e,t){return 0===e.indexOf(t)}function o(e,t){return e.length-e.lastIndexOf(t)===t.length}var r=function(e){var n={},a=e.split(",");return t(a,function(e){n[e]=!0}),n}("allowReorder,attributeName,attributeType,autoReverse,baseFrequency,baseProfile,calcMode,clipPathUnits,contentScriptType,contentStyleType,diffuseConstant,edgeMode,externalResourcesRequired,filterRes,filterUnits,glyphRef,gradientTransform,gradientUnits,kernelMatrix,kernelUnitLength,keyPoints,keySplines,keyTimes,lengthAdjust,limitingConeAngle,markerHeight,markerUnits,markerWidth,maskContentUnits,maskUnits,patternContentUnits,patternTransform,patternUnits,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,repeatCount,repeatDur,requiredExtensions,requiredFeatures,specularConstant,specularExponent,spreadMethod,startOffset,stdDeviation,stitchTiles,surfaceScale,systemLanguage,tableValues,textLength,viewBox,viewTarget,xChannelSelector,yChannelSelector,controlsList"),i={leftParens:/\(/g,rightParens:/\)/g,leftBrace:/\{/g,rightBrace:/\}/g,camelCase:/([a-z]|[0-9]|^)([A-Z])/g,forwardSlash:/\//g,space:/\s/g,uppercase:/[A-Z]/g,uppercaseDelimiterThenChar:/:u:([a-z])/g,caret:/\^/g,dollar:/\$/g,at:/@/g},s={prependUppercase:":u:",replaceSpace:":s:",replaceForwardSlash:":f:",replaceLeftParens:":lp:",replaceRightParens:":rp:",replaceLeftBrace:":lb:",replaceRightBrace:":rb:",replaceCaret:":c:",replaceDollar:":d:",replaceAt:":at:"},l={};if(l.encode=function(e){var t=e;return!r[t]&&t.match(i.camelCase)&&(a(t,"on:")||o(t,":to")||o(t,":from")||o(t,":bind")||o(t,":raw")?t=t.replace(i.uppercase,function(e){return s.prependUppercase+e.toLowerCase()}):(a(t,"(")||a(t,"{"))&&(t=t.replace(i.camelCase,n))),t=t.replace(i.space,s.replaceSpace).replace(i.forwardSlash,s.replaceForwardSlash).replace(i.leftParens,s.replaceLeftParens).replace(i.rightParens,s.replaceRightParens).replace(i.leftBrace,s.replaceLeftBrace).replace(i.rightBrace,s.replaceRightBrace).replace(i.caret,s.replaceCaret).replace(i.dollar,s.replaceDollar).replace(i.at,s.replaceAt),t},l.decode=function(e){var t=e;return!r[t]&&i.uppercaseDelimiterThenChar.test(t)&&(a(t,"on:")||o(t,":to")||o(t,":from")||o(t,":bind")||o(t,":raw"))&&(t=t.replace(i.uppercaseDelimiterThenChar,function(e,t){return t.toUpperCase()})),t=t.replace(s.replaceLeftParens,"(").replace(s.replaceRightParens,")").replace(s.replaceLeftBrace,"{").replace(s.replaceRightBrace,"}").replace(s.replaceForwardSlash,"/").replace(s.replaceSpace," ").replace(s.replaceCaret,"^").replace(s.replaceDollar,"$").replace(s.replaceAt,"@"),t},canNamespace_1_0_0_canNamespace.encoder)throw new Error("You can't have two versions of can-attribute-encoder, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.encoder=l});function each(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function makeMap$1(e){var t={},n=e.split(",");return each(n,function(e){t[e]=!0}),t}function handleIntermediate(e,t){for(var n=0,a=e.length,o;n<a;n++)o=e[n],t[o.tokenType].apply(t,o.args);return e}var alphaNumeric="A-Za-z0-9",alphaNumericHU="-:_A-Za-z0-9",magicStart="{{",endTag=/^<\/([-:_A-Za-z0-9]+)[^>]*>/,magicMatch=/\{\{(![\s\S]*?!|[\s\S]*?)\}\}\}?/g,space=/\s/,alphaRegex=/[A-Za-z0-9]/,attributeRegexp=/[-:_A-Za-z0-9]+s*=s*("[^"]*"|'[^']*')/,empty=makeMap$1("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),caseMattersElements=makeMap$1("altGlyph,altGlyphDef,altGlyphItem,animateColor,animateMotion,animateTransform,clipPath,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,foreignObject,glyphRef,linearGradient,radialGradient,textPath"),closeSelf=makeMap$1("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),special=makeMap$1("script"),tokenTypes=["start","end","close","attrStart","attrEnd","attrValue","chars","comment","special","done"],startOppositesMap={"{":"}","(":")"},fn=function(){},HTMLParser=function(e,t,n){function a(e,n,a,r){n=caseMattersElements[n]?n:n.toLowerCase(),closeSelf[n]&&l.last()===n&&o("",n),r=empty[n]||!!r,t.start(n,r,h),r||l.push(n),HTMLParser.parseAttrs(a,t,h),t.end(n,r,h),"html"===n&&(y=!0)}function o(e,n){var a;if(!n)a=0;else for(n=caseMattersElements[n]?n:n.toLowerCase(),a=l.length-1;0<=a&&l[a]!==n;a--);if(0<=a){for(var o=l.length-1;o>=a;o--)t.close&&t.close(l[o],h);l.length=a,"body"===n&&(y=!0)}}function r(e,n){t.special&&t.special(n,h)}if("object"==typeof e)return handleIntermediate(e,t);var i=[];t=t||{},n&&each(tokenTypes,function(e){var n=t[e]||fn;t[e]=function(){if(!1!==n.apply(this,arguments)){var t=arguments.length;void 0===arguments[t-1]&&(t=arguments.length-1),i.push({tokenType:e,args:[].slice.call(arguments,0,t)})}}});var s=function(){p&&!y&&t.chars&&t.chars(p,h),y=!1,p=""},l=[],d=e,p="",c,u,y,m,h;for(l.last=function(){return this[this.length-1]};e;){if(u=!0,!l.last()||!special[l.last()]){if(0===e.indexOf("<!--"))c=e.indexOf("-->"),0<=c&&(s(),t.comment&&t.comment(e.substring(4,c),h),e=e.substring(c+3),u=!1);else if(0===e.indexOf("</"))m=e.match(endTag),m&&(s(),m[0].replace(endTag,o),e=e.substring(m[0].length),u=!1);else if(0===e.indexOf("<")){var g=HTMLParser.searchStartTag(e);g&&(s(),a.apply(null,g.match),e=g.html,u=!1)}else 0===e.indexOf(magicStart)&&(m=e.match(magicMatch),m&&(s(),m[0].replace(magicMatch,r),e=e.substring(m[0].length)));if(u){c=findBreak(e,magicStart),0===c&&e===d&&(p+=e.charAt(0),e=e.substr(1),c=findBreak(e,magicStart));var f=0>c?e:e.substring(0,c);e=0>c?"":e.substring(c),f&&(p+=f)}}else e=e.replace(new RegExp("([\\s\\S]*?)</"+l.last()+"[^>]*>"),function(e,n){return n=n.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(n,h),""}),o("",l.last());if(e===d)throw new Error("Parse Error: "+e);d=e}return s(),o(),t.done(h),i},callAttrStart=function(e,t,n,a,o){var r=a.substring("number"==typeof e.nameStart?e.nameStart:t,t),i=canAttributeEncoder_1_1_4_canAttributeEncoder.encode(r);e.attrStart=i,n.attrStart(e.attrStart,o),e.inName=!1},callAttrEnd=function(e,t,n,a,o){if(e.valueStart!==void 0&&e.valueStart<t){var r=a.substring(e.valueStart,t);n.attrValue(r,o)}n.attrEnd(e.attrStart,o),e.attrStart=void 0,e.valueStart=void 0,e.inValue=!1,e.inName=!1,e.lookingForEq=!1,e.inQuote=!1,e.lookingForName=!0},findBreak=function(e,t){for(var n=t.length,a=0,o=e.length;a<o;a++)if("<"===e[a]||e.substr(a,n)===t)return a;return-1};HTMLParser.parseAttrs=function(e,t,n){if(e){for(var a=0,o={inName:!1,nameStart:void 0,inValue:!1,valueStart:void 0,inQuote:!1,attrStart:void 0,lookingForName:!0,lookingForValue:!1,lookingForEq:!1},r;a<e.length;){r=a;var s=e.charAt(a);if(a++,magicStart===e.substr(r,magicStart.length)){o.inValue&&r>o.valueStart?t.attrValue(e.substring(o.valueStart,r),n):o.inName&&o.nameStart<r?(callAttrStart(o,r,t,e,n),callAttrEnd(o,r,t,e,n)):o.lookingForValue?o.inValue=!0:o.lookingForEq&&o.attrStart&&callAttrEnd(o,r,t,e,n),magicMatch.lastIndex=r;var l=magicMatch.exec(e);l&&(t.special(l[1],n),a=r+l[0].length,o.inValue&&(o.valueStart=r+l[0].length))}else if(o.inValue)o.inQuote?s===o.inQuote&&callAttrEnd(o,r,t,e,n):space.test(s)&&callAttrEnd(o,r,t,e,n);else if("="===s&&(o.lookingForEq||o.lookingForName||o.inName))o.attrStart||callAttrStart(o,r,t,e,n),o.lookingForValue=!0,o.lookingForEq=!1,o.lookingForName=!1;else if(o.inName){var d=e[o.nameStart],p,c;startOppositesMap[d]===s?(p="{"===d?"(":"{",c=startOppositesMap[p],e[r+1]===c?(callAttrStart(o,r+2,t,e,n),a++):callAttrStart(o,r+1,t,e,n),o.lookingForEq=!0):space.test(s)&&"{"!==d&&"("!==d&&(callAttrStart(o,r,t,e,n),o.lookingForEq=!0)}else o.lookingForName?space.test(s)||(o.attrStart&&callAttrEnd(o,r,t,e,n),o.nameStart=r,o.inName=!0):o.lookingForValue&&(space.test(s)?a===e.length&&callAttrEnd(o,r,t,e,n):(o.lookingForValue=!1,o.inValue=!0,"'"===s||"\""===s?(o.inQuote=s,o.valueStart=r+1):o.valueStart=r))}o.inName?(callAttrStart(o,r+1,t,e,n),callAttrEnd(o,r+1,t,e,n)):(o.lookingForEq||o.lookingForValue||o.inValue)&&callAttrEnd(o,r+1,t,e,n),magicMatch.lastIndex=0}},HTMLParser.searchStartTag=function(e){for(var t=e.indexOf(">"),n=attributeRegexp.exec(e.substring(1)),a=1;n&&t>=a+n.index;){for(a+=n.index+n[0].length;t<a;)t+=e.substring(t+1).indexOf(">")+1;n=attributeRegexp.exec(e.substring(a))}if(-1===t||!alphaRegex.test(e[1]))return null;var o="",r="",i=e.substring(0,t+1),s="/"===i[i.length-2],l=i.search(space),d,p,c;return s?(r="/",p=i.substring(1,i.length-2).trim()):p=i.substring(1,i.length-1).trim(),-1===l?d=p:(l--,d=p.substring(0,l),o=p.substring(l)),c=[i,d,o,r],{match:c,html:e.substring(i.length)}};var canViewParser_4_1_3_canViewParser=canNamespace_1_0_0_canNamespace.HTMLParser=HTMLParser;canGlobals_1_2_2_canGlobalsInstance.define("location",function(){return canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global").location});var location_1=canGlobals_1_2_2_canGlobalsInstance.makeExport("location");canGlobals_1_2_2_canGlobalsInstance.define("MutationObserver",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global");return e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver});var mutationObserver=canGlobals_1_2_2_canGlobalsInstance.makeExport("MutationObserver");canGlobals_1_2_2_canGlobalsInstance.define("customElements",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global");return e.customElements});var customElements=canGlobals_1_2_2_canGlobalsInstance.makeExport("customElements"),canGlobals_1_2_2_canGlobals=canGlobals_1_2_2_canGlobalsInstance;function eliminate(e,t){var n=e.indexOf(t);0<=n&&e.splice(n,1)}function wasNotInSet(e,t){var n=t.has(e);return!1===n&&t.add(e),!n}function contains(e,t){return t&&t.nodeType===Node.TEXT_NODE?contains(e,t.parentNode):e.contains?e.contains(t):e.nodeType===Node.DOCUMENT_NODE&&e.documentElement?contains(e.documentElement,t):(t=t.parentNode,t===e)}function isDocumentElement(e){return document$1().documentElement===e}function isFragment(e){return!!(e&&11===e.nodeType)}function isElementNode(e){return!!(e&&1===e.nodeType)}function getChildren(e){for(var t=[],n=e.firstChild;n;)t.push(n),n=n.nextSibling;return t}function getParents(e){var t;return t=isFragment(e)?getChildren(e):[e],t}function getNodesLegacyB(e){var t=0,n=isFragment(e)?[]:[e],a,o;if(null==e.firstChild)return n;do!a&&(o=e.firstChild)?(t++,n.push(o)):(o=e.nextSibling)?(a=!1,n.push(o)):(o=e.parentNode,t--,a=!0),e=o;while(0<t);return n}function treeWalkerFilterFunction(){return NodeFilter.FILTER_ACCEPT}var treeWalkerFilter=treeWalkerFilterFunction;treeWalkerFilter.acceptNode=treeWalkerFilterFunction;function getNodesWithTreeWalker(e){for(var t=isFragment(e)?[]:[e],n=isElementNode(e)&&document$1().createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,treeWalkerFilter,!1),a;a=n&&n.nextNode();)t.push(a);return t}function getAllNodes(e){return void 0===document$1().createTreeWalker?getNodesLegacyB(e):getNodesWithTreeWalker(e)}function subscription(e){return function(){var t=e.apply(this,arguments),n=!1;return function(){if(n){var a=e.name||e.displayName||"an anonymous function";throw new Error("Disposal function returned by "+a+" called more than once.")}t.apply(this,arguments),n=!0}}}var canDomMutate_2_0_8_Util={eliminate:eliminate,getDocument:document$1,isDocumentElement:isDocumentElement,isFragment:isFragment,getParents:getParents,getAllNodes:getAllNodes,getChildren:getChildren,subscription:subscription,wasNotInSet:wasNotInSet,contains:contains},contains$1=canDomMutate_2_0_8_Util.contains,mutate={},isConnected;function getIsConnectedFromNode(e){return e.isConnected}function getIsConnectedFromDocument(e){var t=e.ownerDocument;return null===t||t===e||contains$1(t,e)}function setIsConnected(e){if(e){var t=e.createTextNode("");isConnected="isConnected"in t.constructor.prototype?getIsConnectedFromNode:getIsConnectedFromDocument,mutate&&(mutate.isConnected=isConnected)}else mutate.isConnected=getIsConnectedFromNode}setIsConnected(canGlobals_1_2_2_canGlobals.getKeyValue("document")),canGlobals_1_2_2_canGlobals.onKeyValue("document",setIsConnected);var canDomMutate_2_0_8_IsConnected=mutate,eliminate$1=canDomMutate_2_0_8_Util.eliminate,subscription$1=canDomMutate_2_0_8_Util.subscription,isDocumentElement$1=canDomMutate_2_0_8_Util.isDocumentElement,getAllNodes$1=canDomMutate_2_0_8_Util.getAllNodes,dataStore=new WeakMap,domMutate,dispatchNodeInserted,dispatchNodeConnected,dispatchGlobalConnected,dispatchNodeRemoved,dispatchNodeDisconnected,dispatchGlobalDisconnected,dispatchAttributeChange,queue;function getRelatedData(e,t){var n=dataStore.get(e);if(n)return n[t]}function setRelatedData(e,t,n){var a=dataStore.get(e);a||(a={},dataStore.set(e,a)),a[t]=n}function deleteRelatedData(e,t){var n=dataStore.get(e);return delete n[t]}function toMutationEvent(e,t){return{target:e,sourceMutation:t}}function getDocumentListeners(e,t){var n=document$1(),a=getRelatedData(n,t);if(a)return a.listeners}function getTargetListeners(e,t){var n=document$1(),a=getRelatedData(n,t);return a?a.get(e):void 0}function addTargetListener(e,t,n){var a=document$1(),o=getRelatedData(a,t);o||(o=new WeakMap,setRelatedData(a,t,o));var r=o.get(e);r||(r=[],o.set(e,r)),r.push(n)}function removeTargetListener(e,t,n){var a=document$1(),o=getRelatedData(a,t);if(o){var r=o.get(e);r&&(eliminate$1(r,n),0===r.length&&(o["delete"](e),0===o.size&&deleteRelatedData(a,t)))}}var promise=Promise.resolve();function nextTick(e){promise.then(e)}function flushCallbacks(e,t){for(var n=e.length,a=e.slice(0),o=0;o<n;o++)a[o](t)}function dispatch$1(e,t){return function(n){var a=e(n.target,t);a&&flushCallbacks(a,n)}}var count=0;function observeMutations(e,t,n,a){var o=getRelatedData(e,t);o||(o={observingCount:0},setRelatedData(e,t,o));var r=function(){o.observer&&(o.observer.disconnect(),o.observer=null);var t=mutationObserver();if(t){var r=global_1().Node;if(!!(r&&e instanceof r)){var i=new t(a);i.id=count++,i.observe(e,n),o.observer=i}}};return 0===o.observingCount&&(canGlobals_1_2_2_canGlobals.onKeyValue("MutationObserver",r),r()),o.observingCount++,function(){var n=getRelatedData(e,t);n&&(n.observingCount--,0>=n.observingCount&&(n.observer&&n.observer.disconnect(),deleteRelatedData(e,t),canGlobals_1_2_2_canGlobals.offKeyValue("MutationObserver",r)))}}var treeMutationConfig={subtree:!0,childList:!0},attributeMutationConfig={attributes:!0,attributeOldValue:!0};function addNodeListener(e,t,n){return subscription$1(function(a,o){if(11===a.nodeType)return Function.prototype;var r;return r=n?observeMutations(a,t,attributeMutationConfig,queue.enqueueAndFlushMutations):observeMutations(document$1(),t,treeMutationConfig,queue.enqueueAndFlushMutations),addTargetListener(a,e,o),function(){r&&r(),removeTargetListener(a,e,o)}})}function addGlobalListener(e,t){return subscription$1(function(n,a){if(!isDocumentElement$1(n))throw new Error("Global mutation listeners must pass a documentElement");var o=document$1(),r=getRelatedData(o,e);r||(r={listeners:[]},setRelatedData(o,e,r));var i=r.listeners;return 0===i.length&&(r.removeListener=t(o,function(){})),i.push(a),function(){var t=getRelatedData(o,e);if(t){var n=t.listeners;eliminate$1(n,a),0===n.length&&(t.removeListener(),deleteRelatedData(o,e))}}})}var domMutationPrefix="domMutation",connectedDataKey="domMutationConnectedData",disconnectedDataKey="domMutationDisconnectedData",insertedDataKey="domMutationInsertedData",removedDataKey="domMutationRemovedData",attributeChangeDataKey="domMutationAttributeChangeData",documentConnectedDataKey="domMutationDocumentConnectedData",documentDisconnectedDataKey="domMutationDocumentDisconnectedData",documentAttributeChangeDataKey="domMutationDocumentAttributeChangeData",treeDataKey="domMutationTreeData",attributeDataKey="domMutationAttributeData";dispatchNodeInserted=dispatch$1(getTargetListeners,insertedDataKey),dispatchNodeConnected=dispatch$1(getTargetListeners,connectedDataKey),dispatchGlobalConnected=dispatch$1(getDocumentListeners,documentConnectedDataKey),dispatchNodeRemoved=dispatch$1(getTargetListeners,removedDataKey),dispatchNodeDisconnected=dispatch$1(getTargetListeners,disconnectedDataKey),dispatchGlobalDisconnected=dispatch$1(getDocumentListeners,documentDisconnectedDataKey),dispatchAttributeChange=dispatch$1(getTargetListeners,attributeChangeDataKey);var addNodeConnectedListener=addNodeListener(connectedDataKey,treeDataKey),addNodeDisconnectedListener=addNodeListener(disconnectedDataKey,treeDataKey),addNodeInsertedListener=addNodeListener(insertedDataKey,treeDataKey),addNodeRemovedListener=addNodeListener(removedDataKey,treeDataKey),addNodeAttributeChangeListener=addNodeListener(attributeChangeDataKey,attributeDataKey,!0),addConnectedListener=addGlobalListener(documentConnectedDataKey,addNodeConnectedListener),addDisconnectedListener=addGlobalListener(documentDisconnectedDataKey,addNodeDisconnectedListener),addAttributeChangeListener=addGlobalListener(documentAttributeChangeDataKey,addNodeAttributeChangeListener);function dispatchTreeMutation(e,t){for(var n=!0===e.isConnected||e.isConnected===void 0,o=e.removedNodes.length,i=0,s;i<o;i++)s=getAllNodes$1(e.removedNodes[i]),s.forEach(function(a){var o=toMutationEvent(a,e);canDomMutate_2_0_8_Util.wasNotInSet(a,t.removed)&&dispatchNodeRemoved(o),n&&canDomMutate_2_0_8_Util.wasNotInSet(a,t.disconnected)&&(dispatchNodeDisconnected(o),dispatchGlobalDisconnected(o))});for(var l=e.addedNodes.length,d=0,p;d<l;d++)p=getAllNodes$1(e.addedNodes[d]),p.forEach(function(a){var o=toMutationEvent(a,e);canDomMutate_2_0_8_Util.wasNotInSet(a,t.inserted)&&dispatchNodeInserted(o),n&&canDomMutate_2_0_8_Util.wasNotInSet(a,t.connected)&&(dispatchNodeConnected(o),dispatchGlobalConnected(o))})}var FLUSHING_MUTATIONS=[],IS_FLUSHING=!1,IS_FLUSH_PENDING=!1,ENQUEUED_MUTATIONS=[];queue={enqueueAndFlushMutations:function(e){if(IS_FLUSH_PENDING&&(FLUSHING_MUTATIONS.push.apply(FLUSHING_MUTATIONS,ENQUEUED_MUTATIONS),IS_FLUSH_PENDING=!1,ENQUEUED_MUTATIONS=[]),FLUSHING_MUTATIONS.push.apply(FLUSHING_MUTATIONS,e),!IS_FLUSHING){IS_FLUSHING=!0;for(var t=0,n={connected:new Set,disconnected:new Set,inserted:new Set,removed:new Set},a;t<FLUSHING_MUTATIONS.length;)a=FLUSHING_MUTATIONS[t],"childList"===a.type?dispatchTreeMutation(a,n):"attributes"===a.type&&dispatchAttributeChange(a),t++;FLUSHING_MUTATIONS=[],IS_FLUSHING=!1}},enqueueMutationsAndFlushAsync:function(e){ENQUEUED_MUTATIONS.push.apply(ENQUEUED_MUTATIONS,e),IS_FLUSH_PENDING||(IS_FLUSH_PENDING=!0,nextTick(function(){if(IS_FLUSH_PENDING){IS_FLUSH_PENDING=!1;var e=ENQUEUED_MUTATIONS;ENQUEUED_MUTATIONS=[],queue.enqueueAndFlushMutations(e)}else;}))}},domMutate={dispatchNodeInsertion:function(e,t){queue.enqueueMutationsAndFlushAsync([{type:"childList",target:t,addedNodes:[e],isConnected:canDomMutate_2_0_8_IsConnected.isConnected(t),removedNodes:[]}])},dispatchNodeRemoval:function(e,t){queue.enqueueMutationsAndFlushAsync([{type:"childList",target:t,addedNodes:[],removedNodes:[e],isConnected:canDomMutate_2_0_8_IsConnected.isConnected(t)}])},dispatchNodeAttributeChange:function(e,t,n){queue.enqueueMutationsAndFlushAsync([{type:"attributes",target:e,attributeName:t,oldValue:n}])},onNodeConnected:addNodeConnectedListener,onNodeInsertion:function(){return console.warn("can-dom-mutate: Use onNodeConnected instead of onNodeInsertion"),addNodeConnectedListener.apply(this,arguments)},onNodeDisconnected:addNodeDisconnectedListener,onNodeRemoval:function(){return console.warn("can-dom-mutate: Use onNodeDisconnected instead of onNodeRemoval"),addNodeDisconnectedListener.apply(this,arguments)},onNodeAttributeChange:addNodeAttributeChangeListener,onDisconnected:addDisconnectedListener,onRemoval:function(){return console.warn("can-dom-mutate: Use onDisconnected instead of onRemoval"),addDisconnectedListener.apply(this,arguments)},onConnected:addConnectedListener,onInsertion:function(){return console.warn("can-dom-mutate: Use onConnected instead of onInsertion"),addConnectedListener.apply(this,arguments)},onAttributeChange:addAttributeChangeListener,flushRecords:function(e){e=e||document$1();var t=dataStore.get(e),n=[];t&&t.domMutationTreeData&&t.domMutationTreeData.observer&&(n=t.domMutationTreeData.observer.takeRecords()),queue.enqueueAndFlushMutations(n)},onNodeInserted:addNodeInsertedListener,onNodeRemoved:addNodeRemovedListener};var canDomMutate_2_0_8_canDomMutate=canNamespace_1_0_0_canNamespace.domMutate=domMutate,getParents$1=canDomMutate_2_0_8_Util.getParents,compat={replaceChild:function(e,t){var n=getParents$1(e),a=this.replaceChild(e,t);canDomMutate_2_0_8_canDomMutate.dispatchNodeRemoval(t,this);for(var o=0;o<n.length;o++)canDomMutate_2_0_8_canDomMutate.dispatchNodeInsertion(n[o],this);return a},setAttribute:function(e,t){var n=this.getAttribute(e),a=this.setAttribute(e,t),o=this.getAttribute(e);return n!==o&&canDomMutate_2_0_8_canDomMutate.dispatchNodeAttributeChange(this,e,n),a},setAttributeNS:function(e,t,n){var a=this.getAttribute(t),o=this.setAttributeNS(e,t,n),r=this.getAttribute(t);return a!==r&&canDomMutate_2_0_8_canDomMutate.dispatchNodeAttributeChange(this,t,a),o},removeAttribute:function(e){var t=this.getAttribute(e),n=this.removeAttribute(e);return t&&canDomMutate_2_0_8_canDomMutate.dispatchNodeAttributeChange(this,e,t),n}},compatData=[["appendChild","Insertion"],["insertBefore","Insertion"],["removeChild","Removal"]];compatData.forEach(function(e){var t=e[0],n="dispatchNode"+e[1];compat[t]=function(e){for(var a=getParents$1(e),o=this[t].apply(this,arguments),r=0;r<a.length;r++)canDomMutate_2_0_8_canDomMutate[n](a[r],this);return o}});var normal={},nodeMethods=["appendChild","insertBefore","removeChild","replaceChild","setAttribute","setAttributeNS","removeAttribute"];nodeMethods.forEach(function(e){normal[e]=function(){return canDomMutate_2_0_8_IsConnected.isConnected(this)?this[e].apply(this,arguments):compat[e].apply(this,arguments)}});var mutate$1={};function setMutateStrategy(e){var t=e?normal:compat;for(var n in t)mutate$1[n]=t[n]}var mutationObserverKey="MutationObserver";setMutateStrategy(canGlobals_1_2_2_canGlobals.getKeyValue("MutationObserver")),canGlobals_1_2_2_canGlobals.onKeyValue("MutationObserver",setMutateStrategy);var node=canNamespace_1_0_0_canNamespace.domMutateNode=canDomMutate_2_0_8_canDomMutate.node=mutate$1,canDomMutate_2_0_8_node=canNamespace_1_0_0_canNamespace.node=node;function childNodes(e){var t=e.childNodes;if("length"in t)return t;for(var n=e.firstChild,a=[];n;)a.push(n),n=n.nextSibling;return a}var canChildNodes_1_2_1_canChildNodes=canNamespace_1_0_0_canNamespace.childNodes=childNodes,fragmentRE=/^\s*<(\w+)[^>]*>/,toString={}.toString,toDOMSymbol=canSymbol_1_6_5_canSymbol.for("can.toDOM");function makeFragment(e,t,n){void 0===t&&(t=fragmentRE.test(e)&&RegExp.$1),e&&"[object Function]"===toString.call(e.replace)&&(e=e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>"));var a=n.createElement("div"),o=n.createElement("div");return"tbody"===t||"tfoot"===t||"thead"===t||"colgroup"===t?(o.innerHTML="<table>"+e+"</table>",a=3===o.firstChild.nodeType?o.lastChild:o.firstChild):"col"===t?(o.innerHTML="<table><colgroup>"+e+"</colgroup></table>",a=3===o.firstChild.nodeType?o.lastChild:o.firstChild.firstChild):"tr"===t?(o.innerHTML="<table><tbody>"+e+"</tbody></table>",a=3===o.firstChild.nodeType?o.lastChild:o.firstChild.firstChild):"td"===t||"th"===t?(o.innerHTML="<table><tbody><tr>"+e+"</tr></tbody></table>",a=3===o.firstChild.nodeType?o.lastChild:o.firstChild.firstChild.firstChild):"option"===t?(o.innerHTML="<select>"+e+"</select>",a=3===o.firstChild.nodeType?o.lastChild:o.firstChild):a.innerHTML=""+e,[].slice.call(canChildNodes_1_2_1_canChildNodes(a))}function fragment(e,t){if(e&&11===e.nodeType)return e;t?t.length&&(t=t[0]):t=document$1();for(var n=makeFragment(e,void 0,t),a=(t||document).createDocumentFragment(),o=0,r=n.length;o<r;o++)a.appendChild(n[o]);return a}var makeFrag=function(e,t){var n=t||document$1(),a;if(!e||"string"==typeof e)a=fragment(null==e?"":""+e,n);else{if("function"==typeof e[toDOMSymbol])return makeFrag(e[toDOMSymbol]());if(11===e.nodeType)return e;if("number"==typeof e.nodeType)return a=n.createDocumentFragment(),a.appendChild(e),a;canReflect_1_18_0_canReflect.isListLike(e)?(a=n.createDocumentFragment(),canReflect_1_18_0_canReflect.eachIndex(e,function(e){a.appendChild(makeFrag(e))})):a=fragment(""+e,n)}return canChildNodes_1_2_1_canChildNodes(a).length||a.appendChild(n.createTextNode("")),a},canFragment_1_3_1_canFragment=canNamespace_1_0_0_canNamespace.fragment=canNamespace_1_0_0_canNamespace.frag=makeFrag,canViewCallbacks_5_0_0_canViewCallbacks=createCommonjsModule(function(e){var t=canSymbol_1_6_5_canSymbol.for("can.callbackMap"),n=canSymbol_1_6_5_canSymbol.for("can.initialize"),a={},o=function(){var e=canGlobals_1_2_2_canGlobals.getKeyValue("document");return null!=e&&null!=e.documentElement&&"false"!==e.documentElement.getAttribute("data-can-automount")},r=new WeakMap,s=function(e){var t=e.tagName&&e.tagName.toLowerCase(),n=a[t];n&&b.tagHandler(e,t,{})},l=!1,d=function(){var e=document$1().documentElement;if(l){if(l===e)return;v()}var t=canDomMutate_2_0_8_canDomMutate.onConnected(e,function(e){s(e.target)});l=!0,v=function(){t(),l=!1}},p=function(e){for(var t=document$1().getElementsByTagName(e),n=0,a;void 0!==(a=t[n]);n++)s(a)},c=function(e,t){if(t)"string"==typeof e?u[e]=t:y.push({match:e,handler:t});else{var n=u[e];if(!n)for(var a=0,o=y.length,r;a<o;a++)if(r=y[a],r.match.test(e))return r.handler;return n}},u={},y=[],m=new WeakMap,h=/[-\:]/,g=function(){},f=function(e,t){if(t){var n=h.test(e),r="undefined"!=typeof a[e.toLowerCase()],i;if(a[e.toLowerCase()]=t,o()){var s=canGlobals_1_2_2_canGlobals.getKeyValue("customElements");if(!s)d(),p(e);else if(i=s.get(e.toLowerCase()),n&&!i){var c=function(){return Reflect.construct(HTMLElement,[],c)};c.prototype=Object.create(HTMLElement.prototype),c.prototype.constructor=c,c.prototype.connectedCallback=function(){b.tagHandler(this,e.toLowerCase(),{})},s.define(e,c)}}else l&&v()}else{var u;return null===t?delete a[e.toLowerCase()]:u=a[e.toLowerCase()],!u&&h.test(e)&&(u=g),u}},b={_tags:a,_attributes:u,_regExpAttributes:y,defaultCallback:g,tag:f,attr:c,attrs:function(e){var n=canReflect_1_18_0_canReflect.getKeyValue(e,t)||e;m.has(n)||(m.set(n,!0),canReflect_1_18_0_canReflect.eachKey(n,function(e,t){c(t,e)}))},tagHandler:function(e,t,o){if(!r.has(e)){var i=o.scope,s=i&&i.templateContext.tags.get(t),l=s||a[t]||e[n],d;if(l?(d=canObservationRecorder_1_3_1_canObservationRecorder.ignore(l)(e,o),r.set(e,!0)):d=i,d&&o.subtemplate){i!==d&&(i=i.add(d));var p=o.subtemplate(i,o.options),c="string"==typeof p?canFragment_1_3_1_canFragment(p):p;canDomMutate_2_0_8_node.appendChild.call(e,c)}}}},v;if(canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{},canNamespace_1_0_0_canNamespace.view.callbacks)throw new Error("You can't have two versions of can-view-callbacks, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.view.callbacks=b}),processNodes=function(e,t,n,a){for(var o=a.createDocumentFragment(),r=0,s=e.length,l;r<s;r++)l=e[r],o.appendChild(processNode(l,t,n.concat(r),a));return o},keepsTextNodes="undefined"!=typeof document&&function(){var e=document.createDocumentFragment(),t=document.createElement("div");t.appendChild(document.createTextNode("")),t.appendChild(document.createTextNode("")),e.appendChild(t);var n=e.cloneNode(!0);return 2===n.firstChild.childNodes.length}(),clonesWork="undefined"!=typeof document&&function(){var e=document.createElement("a");e.innerHTML="<xyz></xyz>";var t=e.cloneNode(!0),n="<xyz></xyz>"===t.innerHTML,a,o;return n?(e=document.createDocumentFragment(),e.appendChild(document.createTextNode("foo-bar")),a=mutationObserver(),a?(o=new a(function(){}),o.observe(document.documentElement,{childList:!0,subtree:!0}),t=e.cloneNode(!0),o.disconnect()):t=e.cloneNode(!0),1===t.childNodes.length):n}(),namespacesWork="undefined"!=typeof document&&!!document.createElementNS,cloneNode=clonesWork?function(e){return e.cloneNode(!0)}:function(e){var t=e.ownerDocument,n;if(1===e.nodeType?"http://www.w3.org/1999/xhtml"!==e.namespaceURI&&namespacesWork&&t.createElementNS?n=t.createElementNS(e.namespaceURI,e.nodeName):n=t.createElement(e.nodeName):3===e.nodeType?n=t.createTextNode(e.nodeValue):8===e.nodeType?n=t.createComment(e.nodeValue):11===e.nodeType&&(n=t.createDocumentFragment()),e.attributes)for(var a=e.attributes,o=0,r;o<a.length;o++)r=a[o],r&&r.specified&&(r.namespaceURI?n.setAttributeNS(r.namespaceURI,r.nodeName||r.name,r.nodeValue||r.value):n.setAttribute(r.nodeName||r.name,r.nodeValue||r.value));if(e&&e.firstChild)for(var s=e.firstChild;s;)n.appendChild(cloneNode(s)),s=s.nextSibling;return n};function processNode(e,t,n,a){var o=n,r=typeof e,s=function(){return l||(l={path:n,callbacks:[]},t.push(l),o=[]),l},l,d,c,u,y;if(!("object"==r))"string"===r?d=a.createTextNode(e):"function"===r&&(keepsTextNodes?(d=a.createTextNode(""),s().callbacks.push({callback:e})):(d=a.createComment("~"),s().callbacks.push({callback:function(){var t=a.createTextNode("");return canDomMutate_2_0_8_node.replaceChild.call(this.parentNode,t,this),e.apply(t,arguments)}})));else if(e.tag){if(d=namespacesWork&&e.namespace?a.createElementNS(e.namespace,e.tag):a.createElement(e.tag),e.attrs)for(var m in e.attrs){var h=e.attrs[m];"function"==typeof h?s().callbacks.push({callback:h}):null!==h&&"object"==typeof h&&h.namespaceURI?d.setAttributeNS(h.namespaceURI,m,h.value):canDomMutate_2_0_8_node.setAttribute.call(d,m,h)}if(e.attributes)for(u=0,y=e.attributes.length;u<y;u++)s().callbacks.push({callback:e.attributes[u]});e.children&&e.children.length&&(c=l?l.paths=[]:t,d.appendChild(processNodes(e.children,c,o,a)))}else if(e.comment&&(d=a.createComment(e.comment),e.callbacks))for(u=0,y=e.callbacks.length;u<y;u++)s().callbacks.push({callback:e.callbacks[u]});return d}function getCallbacks(e,t,n){for(var a=t.path,o=t.callbacks,r=t.paths,s=e,l=a?a.length:0,d=r?r.length:0,p=0;p<l;p++)s=s.childNodes.item(a[p]);for(p=0;p<d;p++)getCallbacks(s,r[p],n);n.push({element:s,callbacks:o})}function hydrateCallbacks(e,t){for(var n=e.length,a=0,o,r,s;a<n;a++){s=e[a],o=s.callbacks.length,r=s.element;for(var l=0;l<o;l++)s.callbacks[l].callback.apply(r,t)}}function makeTarget(e,t){var n=[],a=processNodes(e,n,[],t||document$1());return{paths:n,clone:a,hydrate:function(){for(var e=cloneNode(this.clone),t=[],o=0,r=t.length=arguments.length;o<r;o++)t[o]=arguments[o];for(var s=[],l=0;l<n.length;l++)getCallbacks(e,n[l],s);return hydrateCallbacks(s,t),e}}}makeTarget.keepsTextNodes=keepsTextNodes,makeTarget.cloneNode=cloneNode,canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{};var canViewTarget_5_0_0_canViewTarget=canNamespace_1_0_0_canNamespace.view.target=makeTarget,getKeyValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getKeyValue"),observeDataSymbol=canSymbol_1_6_5_canSymbol.for("can.meta"),promiseDataPrototype={isPending:!0,state:"pending",isResolved:!1,isRejected:!1,value:void 0,reason:void 0};function setVirtualProp(e,t,n){var a=e[observeDataSymbol],o=a[t];a[t]=n,canQueues_1_3_1_canQueues.enqueueByQueue(a.handlers.getNode([t]),e,[n,o],function(){return{}},["Promise",e,"resolved with value",n,"and changed virtual property: "+t])}function initPromise(e){var t=e[observeDataSymbol];t||(Object.defineProperty(e,observeDataSymbol,{enumerable:!1,configurable:!1,writable:!1,value:Object.create(promiseDataPrototype)}),t=e[observeDataSymbol],t.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Object,Array])),e.then(function(t){canQueues_1_3_1_canQueues.batch.start(),setVirtualProp(e,"isPending",!1),setVirtualProp(e,"isResolved",!0),setVirtualProp(e,"value",t),setVirtualProp(e,"state","resolved"),canQueues_1_3_1_canQueues.batch.stop()},function(t){canQueues_1_3_1_canQueues.batch.start(),setVirtualProp(e,"isPending",!1),setVirtualProp(e,"isRejected",!0),setVirtualProp(e,"reason",t),setVirtualProp(e,"state","rejected"),canQueues_1_3_1_canQueues.batch.stop()})}function setupPromise(e){var t="getPrototypeOf"in Object?Object.getPrototypeOf(e):e.__proto__,n;e[getKeyValueSymbol$2]&&e[observeDataSymbol]||((null===t||t===Object.prototype)&&(t=e,"function"==typeof t.promise&&(n=t.promise,t.promise=function(){var e=n.call(t);return setupPromise(e),e})),canReflect_1_18_0_canReflect.assignSymbols(t,{"can.getKeyValue":function(e){return this[observeDataSymbol]||initPromise(this),canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),"state"===e||"isPending"===e||"isResolved"===e||"isRejected"===e||"value"===e||"reason"===e?this[observeDataSymbol][e]:this[e]},"can.getValue":function(){return this[getKeyValueSymbol$2]("value")},"can.isValueLike":!1,"can.onKeyValue":function(e,t,n){this[observeDataSymbol]||initPromise(this),this[observeDataSymbol].handlers.add([e,n||"mutate",t])},"can.offKeyValue":function(e,t,n){this[observeDataSymbol]||initPromise(this),this[observeDataSymbol].handlers.delete([e,n||"mutate",t])},"can.hasOwnKey":function(e){return this[observeDataSymbol]||initPromise(this),e in this[observeDataSymbol]}}))}var canReflectPromise_2_2_1_canReflectPromise=setupPromise,getValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getValue"),setValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.setValue"),isValueLikeSymbol=canSymbol_1_6_5_canSymbol.for("can.isValueLike"),peek$3=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getKeyValue.bind(canReflect_1_18_0_canReflect)),isPromiseLike=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e){return"object"==typeof e&&e&&"function"==typeof e.then}),bindName=Function.prototype.bind,isAt=function(e,t){var n=t[e-1];return n&&n.at},readValue=function(e,t,n,a,o,r){var s;do{s=!1;for(var l=0,d=observeReader.valueReaders.length;l<d;l++)observeReader.valueReaders[l].test(e,t,n,a)&&(e=observeReader.valueReaders[l].read(e,t,n,a,o,r))}while(s);return e},checkForObservableAndNotify=function(e,t,n,a,o){e.foundObservable&&!t.foundObservable&&canObservationRecorder_1_3_1_canObservationRecorder.trapsCount()&&(canObservationRecorder_1_3_1_canObservationRecorder.addMany(n()),e.foundObservable(a,o),t.foundObservable=!0)},objHasKeyAtIndex=function(e,t,n){return!!(t&&t.length&&canReflect_1_18_0_canReflect.hasKey(e,t[n].key))},observeReader;observeReader={read:function(e,t,n){n=n||{};var a={foundObservable:!1},o;n.foundObservable&&(o=canObservationRecorder_1_3_1_canObservationRecorder.trap());var s=readValue(e,0,t,n,a),l=t.length,d=0,p,c;for(checkForObservableAndNotify(n,a,o,e,0);d<l;){p=s;for(var u=0,y=observeReader.propertyReaders.length,m;u<y;u++)if(m=observeReader.propertyReaders[u],m.test(s)){s=m.read(s,t[d],d,n,a);break}if(checkForObservableAndNotify(n,a,o,p,d),++d,s=readValue(s,d,t,n,a,p),checkForObservableAndNotify(n,a,o,p,d-1),d<t.length&&(null===s||void 0===s))return c=objHasKeyAtIndex(p,t,d-1),n.earlyExit&&!c&&n.earlyExit(p,d-1,s),{value:void 0,parent:p,parentHasKey:c,foundLastParent:!1}}return c=objHasKeyAtIndex(p,t,t.length-1),void 0===s&&!c&&n.earlyExit&&n.earlyExit(p,d-1),{value:s,parent:p,parentHasKey:c,foundLastParent:!0}},get:function(e,t,n){return observeReader.read(e,observeReader.reads(t),n||{}).value},valueReadersMap:{},valueReaders:[{name:"function",test:function(e){return e&&canReflect_1_18_0_canReflect.isFunctionLike(e)&&!canReflect_1_18_0_canReflect.isConstructorLike(e)},read:function(e,t,n,a,o,r){return a.callMethodsOnObservables&&canReflect_1_18_0_canReflect.isObservableLike(r)&&canReflect_1_18_0_canReflect.isMapLike(r)?(dev.warn("can-stache-key: read() called with `callMethodsOnObservables: true`."),e.apply(r,a.args||[])):!1===a.proxyMethods?e:bindName.call(e,r)}},{name:"isValueLike",test:function(e,t,n,a){return e&&e[getValueSymbol$1]&&!1!==e[isValueLikeSymbol]&&(a.foundAt||!isAt(t,n))},read:function(e,t,n,a){return!1===a.readCompute&&t===n.length?e:canReflect_1_18_0_canReflect.getValue(e)},write:function(e,t){e[setValueSymbol$1]?e[setValueSymbol$1](t):e.set?e.set(t):e(t)}}],propertyReadersMap:{},propertyReaders:[{name:"map",test:function(e){return(canReflect_1_18_0_canReflect.isPromise(e)||isPromiseLike(e))&&canReflectPromise_2_2_1_canReflectPromise(e),canReflect_1_18_0_canReflect.isObservableLike(e)&&canReflect_1_18_0_canReflect.isMapLike(e)},read:function(e,t){var n=canReflect_1_18_0_canReflect.getKeyValue(e,t.key);return void 0===n?e[t.key]:n},write:canReflect_1_18_0_canReflect.setKeyValue},{name:"object",test:function(){return!0},read:function(e,t){if(null!=e)return"object"==typeof e?t.key in e?e[t.key]:void 0:e[t.key]},write:function(e,t,n){var a=e[t];null!=n&&"object"==typeof n&&canReflect_1_18_0_canReflect.isMapLike(a)?(dev.warn("can-stache-key: Merging data into \""+t+"\" because its parent is non-observable"),canReflect_1_18_0_canReflect.update(a,n)):null!=a&&a[setValueSymbol$1]!==void 0?canReflect_1_18_0_canReflect.setValue(a,n):e[t]=n}}],reads:function(e){var t=""+e,n=[],a=0,o=!1;"@"===t.charAt(0)&&(a=1,o=!0);for(var r="",s=a,l;s<t.length;s++)l=t.charAt(s),"."===l||"@"===l?"\\"===t.charAt(s-1)?r=r.substr(0,r.length-1)+".":(n.push({key:r,at:o}),o="@"===l,r=""):r+=l;return n.push({key:r,at:o}),n},write:function(e,t,n,a){var o="string"==typeof t?observeReader.reads(t):t,r;if(a=a||{},1<o.length?(r=o.pop(),e=observeReader.read(e,o,a).value,o.push(r)):r=o[0],!!e){var i=peek$3(e,r.key);observeReader.valueReadersMap.isValueLike.test(i,o.length-1,o,a)?observeReader.valueReadersMap.isValueLike.write(i,n,a):(observeReader.valueReadersMap.isValueLike.test(e,o.length-1,o,a)&&(e=e[getValueSymbol$1]()),observeReader.propertyReadersMap.map.test(e)?observeReader.propertyReadersMap.map.write(e,r.key,n,a):observeReader.propertyReadersMap.object.test(e)&&(observeReader.propertyReadersMap.object.write(e,r.key,n,a),a.observation&&a.observation.update()))}}},observeReader.propertyReaders.forEach(function(e){observeReader.propertyReadersMap[e.name]=e}),observeReader.valueReaders.forEach(function(e){observeReader.valueReadersMap[e.name]=e}),observeReader.set=observeReader.write;var canStacheKey_1_4_3_canStacheKey=observeReader,inSetupSymbol$4=canSymbol_1_6_5_canSymbol.for("can.initializing"),initializing=0,Construct=function(){if(arguments.length)return Construct.extend.apply(Construct,arguments)},canGetDescriptor;try{canGetDescriptor=!0}catch(t){canGetDescriptor=!1}var getDescriptor=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return n&&(n.get||n.set)?n:null},inheritGetterSetter=function(e,t,n){n=n||e;var a;for(var o in e)(a=getDescriptor(e,o))?this._defineProperty(n,t,o,a):Construct._overwrite(n,t,o,e[o])},simpleInherit=function(e,t,n){for(var a in n=n||e,e)Construct._overwrite(n,t,a,e[a])},defineNonEnumerable$1=function(e,t,n){Object.defineProperty(e,t,{configurable:!0,writable:!0,enumerable:!1,value:n})};canReflect_1_18_0_canReflect.assignMap(Construct,{constructorExtends:!0,newInstance:function(){var e=this.instance(),t;if(e.setup){if(Object.defineProperty(e,"__inSetup",{configurable:!0,enumerable:!1,value:!0,writable:!0}),Object.defineProperty(e,inSetupSymbol$4,{configurable:!0,enumerable:!1,value:!0,writable:!0}),t=e.setup.apply(e,arguments),t instanceof Construct.ReturnValue)return t.value;e.__inSetup=!1,e[inSetupSymbol$4]=!1}return e.init&&e.init.apply(e,t||arguments),e},_inherit:canGetDescriptor?inheritGetterSetter:simpleInherit,_defineProperty:function(e,t,n,a){Object.defineProperty(e,n,a)},_overwrite:function(e,t,n,a){Object.defineProperty(e,n,{value:a,configurable:!0,enumerable:!0,writable:!0})},setup:function(e){var t=e.defaults?canReflect_1_18_0_canReflect.serialize(e.defaults):{};this.defaults=canReflect_1_18_0_canReflect.assignDeepMap(t,this.defaults)},instance:function(){initializing=1;var e=new this;return initializing=0,e},extend:function(e,n,a){function o(){if(!initializing)return(!this||this.constructor!==p)&&arguments.length&&p.constructorExtends?p.extend.apply(p,arguments):p.newInstance.apply(p,arguments)}var r=e,i=n,s=a;"string"!=typeof r&&(s=i,i=r,r=null),s||(s=i,i=null),s=s||{};var l=this,d=this.prototype,p,c;for(var u in c=this.instance(),Construct._inherit(s,d,c),r||(i&&i.shortName?r=i.shortName:this.shortName&&(r=this.shortName)),p="function"==typeof namedCtor?namedCtor(constructorName,o):function(){return o.apply(this,arguments)},l)l.hasOwnProperty(u)&&(p[u]=l[u]);if(Construct._inherit(i,l,p),canReflect_1_18_0_canReflect.assignMap(p,{constructor:p,prototype:c}),void 0!==r){if(Object.getOwnPropertyDescriptor){var y=Object.getOwnPropertyDescriptor(p,"name");(!y||y.configurable)&&Object.defineProperty(p,"name",{writable:!0,value:r,configurable:!0})}p.shortName=r}defineNonEnumerable$1(p.prototype,"constructor",p);var m=[l].concat(Array.prototype.slice.call(arguments)),t=p.setup.apply(p,m);return p.init&&p.init.apply(p,t||m),p},ReturnValue:function(e){this.value=e}}),defineNonEnumerable$1(Construct.prototype,"setup",function(){}),defineNonEnumerable$1(Construct.prototype,"init",function(){});var canConstruct_3_5_6_canConstruct=canNamespace_1_0_0_canNamespace.Construct=Construct,SimpleMap=canConstruct_3_5_6_canConstruct.extend("SimpleMap",{setup:function(e){this._data={},e&&"object"==typeof e&&this.attr(e)},attr:function(e,t){var n=this;if(0===arguments.length){canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.keys");var a={};return canReflect_1_18_0_canReflect.eachKey(this._data,function(e,t){canObservationRecorder_1_3_1_canObservationRecorder.add(this,t),a[t]=e},this),a}if(1<arguments.length){var o=this._data.hasOwnProperty(e),r=this._data[e];if(this._data[e]=t,r!==t){var i={keyChanged:o?void 0:e,type:e};this.dispatch(i,[t,r])}}else if("object"==typeof e)canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.eachKey(e,function(e,t){n.attr(t,e)}),canQueues_1_3_1_canQueues.batch.stop();else return"constructor"===e?this.constructor:(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this._data[e])},serialize:function(){return canReflect_1_18_0_canReflect.serialize(this,Map)},get:function(){return this.attr.apply(this,arguments)},set:function(){return this.attr.apply(this,arguments)},log:function(){}});map$1(SimpleMap.prototype);var simpleMapProto={"can.isMapLike":!0,"can.isListLike":!1,"can.isValueLike":!1,"can.getKeyValue":SimpleMap.prototype.get,"can.setKeyValue":SimpleMap.prototype.set,"can.deleteKeyValue":function(e){var t;if(this._data.hasOwnProperty(e)){var n=this._data[e];delete this._data[e],t={keyChanged:e,type:e},this.dispatch(t,[void 0,n])}},"can.getOwnEnumerableKeys":function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.keys"),Object.keys(this._data)},"can.assignDeep":function(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignMap(this,e),canQueues_1_3_1_canQueues.batch.stop()},"can.updateDeep":function(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.updateMap(this,e),canQueues_1_3_1_canQueues.batch.stop()},"can.keyHasDependencies":function(){return!1},"can.getKeyDependencies":function(){},"can.hasOwnKey":function(e){return this._data.hasOwnProperty(e)}};canReflect_1_18_0_canReflect.assignSymbols(SimpleMap.prototype,simpleMapProto);var canSimpleMap_4_3_3_canSimpleMap=SimpleMap,TemplateContext=function(e){e=e||{},this.vars=new canSimpleMap_4_3_3_canSimpleMap(e.vars||{}),this.helpers=new canSimpleMap_4_3_3_canSimpleMap(e.helpers||{}),this.partials=new canSimpleMap_4_3_3_canSimpleMap(e.partials||{}),this.tags=new canSimpleMap_4_3_3_canSimpleMap(e.tags||{})},canViewScope_4_13_6_templateContext=TemplateContext,canCid_1_3_1_canCid=createCommonjsModule(function(e){var t=0,n="can"+new Date,a=function(e,a){var o=e.nodeName?n:"_cid";return e[o]||(t++,e[o]=(a||"")+t),e[o]};if(a.domExpando=n,a.get=function(e){var t=typeof e;return null!==t&&("object"===t||"function"===t)?a(e):t+":"+e},canNamespace_1_0_0_canNamespace.cid)throw new Error("You can't have two versions of can-cid, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.cid=a}),singleReference;function getKeyName(e,t){var n=t?canCid_1_3_1_canCid(e)+":"+t:canCid_1_3_1_canCid(e);return n||e}singleReference={set:function(e,t,n,a){e[getKeyName(t,a)]=n},getAndDelete:function(e,t,n){var a=getKeyName(t,n),o=e[a];return delete e[a],o}};var canSingleReference_1_3_0_canSingleReference=singleReference,Compute=function(e){return arguments.length?canReflect_1_18_0_canReflect.setValue(this,e):canReflect_1_18_0_canReflect.getValue(this)},canViewScope_4_13_6_makeComputeLike=function(e){var t=Compute.bind(e);return t.on=t.bind=t.addEventListener=function(n,a){var o=function(e,n){a.call(t,{type:"change"},e,n)};canSingleReference_1_3_0_canSingleReference.set(a,this,o),e.on(o)},t.off=t.unbind=t.removeEventListener=function(t,n){e.off(canSingleReference_1_3_0_canSingleReference.getAndDelete(n,this))},canReflect_1_18_0_canReflect.assignSymbols(t,{"can.getValue":function(){return canReflect_1_18_0_canReflect.getValue(e)},"can.setValue":function(t){return canReflect_1_18_0_canReflect.setValue(e,t)},"can.onValue":function(t,n){return canReflect_1_18_0_canReflect.onValue(e,t,n)},"can.offValue":function(t,n){return canReflect_1_18_0_canReflect.offValue(e,t,n)},"can.valueHasDependencies":function(){return canReflect_1_18_0_canReflect.valueHasDependencies(e)},"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(e)},"can.setPriority":function(t){canReflect_1_18_0_canReflect.setPriority(e,t)},"can.isValueLike":!0,"can.isFunctionLike":!1}),t.isComputed=!0,t},makeDependencyRecord=function(){return{keyDependencies:new Map,valueDependencies:new Set}},makeRootRecord=function(){return{mutateDependenciesForKey:new Map,mutateDependenciesForValue:makeDependencyRecord()}},addMutatedBy=function(e){return function(t,n,a){var o=3===arguments.length;if(2===arguments.length&&(a=n,n=void 0),!a.keyDependencies&&!a.valueDependencies){var r=new Set;r.add(a),a={valueDependencies:r}}var i=e.get(t);i||(i=makeRootRecord(),e.set(t,i)),o&&!i.mutateDependenciesForKey.get(n)&&i.mutateDependenciesForKey.set(n,makeDependencyRecord());var s=o?i.mutateDependenciesForKey.get(n):i.mutateDependenciesForValue;a.valueDependencies&&canReflect_1_18_0_canReflect.addValues(s.valueDependencies,a.valueDependencies),a.keyDependencies&&canReflect_1_18_0_canReflect.each(a.keyDependencies,function(e,t){var n=s.keyDependencies.get(t);n||(n=new Set,s.keyDependencies.set(t,n)),canReflect_1_18_0_canReflect.addValues(n,e)})}},deleteMutatedBy=function(e){return function(t,n,a){var o=3===arguments.length,r=e.get(t);if(2===arguments.length&&(a=n,n=void 0),!a.keyDependencies&&!a.valueDependencies){var i=new Set;i.add(a),a={valueDependencies:i}}var s=o?r.mutateDependenciesForKey.get(n):r.mutateDependenciesForValue;a.valueDependencies&&canReflect_1_18_0_canReflect.removeValues(s.valueDependencies,a.valueDependencies),a.keyDependencies&&canReflect_1_18_0_canReflect.each(a.keyDependencies,function(e,t){var n=s.keyDependencies.get(t);n&&(canReflect_1_18_0_canReflect.removeValues(n,e),!n.size&&s.keyDependencies.delete(t))})}},isFunction=function(e){return"function"==typeof e},getWhatIChangeSymbol=canSymbol_1_6_5_canSymbol.for("can.getWhatIChange"),getKeyDependenciesSymbol=canSymbol_1_6_5_canSymbol.for("can.getKeyDependencies"),getValueDependenciesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getValueDependencies"),getKeyDependencies=function(e,t){if(isFunction(e[getKeyDependenciesSymbol]))return canReflect_1_18_0_canReflect.getKeyDependencies(e,t)},getValueDependencies=function(e){if(isFunction(e[getValueDependenciesSymbol$1]))return canReflect_1_18_0_canReflect.getValueDependencies(e)},getMutatedKeyDependencies=function(e,t,n){var a=e.get(t),o;return a&&a.mutateDependenciesForKey.has(n)&&(o=a.mutateDependenciesForKey.get(n)),o},getMutatedValueDependencies=function(e,t){var n=e.get(t),a;if(n){var o=n.mutateDependenciesForValue;o.keyDependencies.size&&(a=a||{},a.keyDependencies=o.keyDependencies),o.valueDependencies.size&&(a=a||{},a.valueDependencies=o.valueDependencies)}return a},getWhatIChange=function(e,t){if(isFunction(e[getWhatIChangeSymbol])){var n=2===arguments.length;return n?canReflect_1_18_0_canReflect.getWhatIChange(e,t):canReflect_1_18_0_canReflect.getWhatIChange(e)}},isEmptyRecord=function(e){return null==e||!Object.keys(e).length||e.keyDependencies&&!e.keyDependencies.size&&e.valueDependencies&&!e.valueDependencies.size},getWhatChangesMe=function(e,t,n){var a=3===arguments.length,o=a?getMutatedKeyDependencies(e,t,n):getMutatedValueDependencies(e,t),r=a?getKeyDependencies(t,n):getValueDependencies(t);if(!isEmptyRecord(o)||!isEmptyRecord(r))return canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},o?{mutate:o}:null),r?{derive:r}:null)},getDependencyDataOf=function(e){return function(t,n){var a=2===arguments.length,o=a?getWhatChangesMe(e,t,n):getWhatChangesMe(e,t),r=a?getWhatIChange(t,n):getWhatIChange(t);if(o||r)return canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},r?{whatIChange:r}:null),o?{whatChangesMe:o}:null)}},mutatedByMap=new WeakMap,canReflectDependencies_1_1_2_canReflectDependencies={addMutatedBy:addMutatedBy(mutatedByMap),deleteMutatedBy:deleteMutatedBy(mutatedByMap),getDependencyDataOf:getDependencyDataOf(mutatedByMap)},canStacheHelpers_1_2_0_canStacheHelpers=createCommonjsModule(function(e){if(canNamespace_1_0_0_canNamespace.stacheHelpers)throw new Error("You can't have two versions of can-stache-helpers, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.stacheHelpers={}}),dispatchSymbol$2=canSymbol_1_6_5_canSymbol.for("can.dispatch"),setElementSymbol=canSymbol_1_6_5_canSymbol.for("can.setElement"),getFastPathRoot=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e){if(e.reads&&1===e.reads.length){var t=e.root;return t&&t[canSymbol_1_6_5_canSymbol.for("can.getValue")]&&(t=canReflect_1_18_0_canReflect.getValue(t)),t&&canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t)&&"function"!=typeof t[e.reads[0].key]&&t}}),isEventObject=function(e){return e&&"number"==typeof e.batchNum&&"string"==typeof e.type},ScopeKeyData=function(e,t,n){this.startingScope=e,this.key=t,this.read=this.read.bind(this),this.dispatch=this.dispatch.bind(this),"debugger"===t&&(this.startingScope={_context:canStacheHelpers_1_2_0_canStacheHelpers},this.read=function(){var t=canStacheHelpers_1_2_0_canStacheHelpers["debugger"];return t({scope:e})});var a=this.observation=new canObservation_4_2_0_canObservation(this.read,this);this.options=canAssign_1_3_3_canAssign({observation:this.observation},n),this.fastPath=void 0,this.root=void 0,this.reads=void 0,this.setRoot=void 0,this._thisArg=new canSimpleObservable_2_5_0_canSimpleObservable,this.parentHasKey=void 0;var o=new Set;o.add(a),this.dependencies={valueDependencies:o},this._latestValue=void 0};value(ScopeKeyData.prototype);function fastOnBoundSet_Value(){this._value=this.newVal}function fastOnBoundSetValue(){this.value=this.newVal}canAssign_1_3_3_canAssign(ScopeKeyData.prototype,{constructor:ScopeKeyData,dispatch:function(e){var t=this.value;this._latestValue=this.value=e,this[dispatchSymbol$2].call(this,this.value,t)},onBound:function(){this.bound=!0,canReflect_1_18_0_canReflect.onValue(this.observation,this.dispatch,"notify");var e=getFastPathRoot(this);e&&this.toFastPath(e),this._latestValue=this.value=canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this.observation)},onUnbound:function(){this.bound=!1,canReflect_1_18_0_canReflect.offValue(this.observation,this.dispatch,"notify"),this.toSlowPath()},set:function(e){var t=this.root||this.setRoot;t?this.reads.length?canStacheKey_1_4_3_canStacheKey.write(t,this.reads,e,this.options):canReflect_1_18_0_canReflect.setValue(t,e):this.startingScope.set(this.key,e,this.options)},get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&canObservation_4_2_0_canObservation.temporarilyBind(this)),!0===this.bound&&!0===this.fastPath?this._latestValue:canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this.observation)},toFastPath:function(e){var t=this,n=this.observation;this.fastPath=!0,n.dependencyChange=function(n,a){if(isEventObject(a))throw"no event objects!";return n===e&&"function"!=typeof a?(t._latestValue=a,this.newVal=a):t.toSlowPath(),canObservation_4_2_0_canObservation.prototype.dependencyChange.apply(this,arguments)},n.onBound=n.hasOwnProperty("_value")?fastOnBoundSet_Value:fastOnBoundSetValue},toSlowPath:function(){this.observation.dependencyChange=canObservation_4_2_0_canObservation.prototype.dependencyChange,this.observation.onBound=canObservation_4_2_0_canObservation.prototype.onBound,this.fastPath=!1},read:function(){var e;return this.root?(e=canStacheKey_1_4_3_canStacheKey.read(this.root,this.reads,this.options),this.thisArg=e.parent,e.value):(e=this.startingScope.read(this.key,this.options),this.scope=e.scope,this.reads=e.reads,this.root=e.rootObserve,this.setRoot=e.setRoot,this.thisArg=e.thisArg,this.parentHasKey=e.parentHasKey,e.value)},hasDependencies:function(){return this.bound||canObservation_4_2_0_canObservation.temporarilyBind(this),canReflect_1_18_0_canReflect.valueHasDependencies(this.observation)}}),Object.defineProperty(ScopeKeyData.prototype,"thisArg",{get:function(){return this._thisArg.get()},set:function(e){this._thisArg.set(e)}});var scopeKeyDataPrototype={"can.getValue":ScopeKeyData.prototype.get,"can.setValue":ScopeKeyData.prototype.set,"can.valueHasDependencies":ScopeKeyData.prototype.hasDependencies,"can.getValueDependencies":function(){return this.dependencies},"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(this.observation)},"can.setPriority":function(e){canReflect_1_18_0_canReflect.setPriority(this.observation,e)},"can.setElement":function(e){this.observation[setElementSymbol](e)}};canReflect_1_18_0_canReflect.assignSymbols(ScopeKeyData.prototype,scopeKeyDataPrototype),Object.defineProperty(ScopeKeyData.prototype,"compute",{get:function(){var e=canViewScope_4_13_6_makeComputeLike(this);return Object.defineProperty(this,"compute",{value:e,writable:!1,configurable:!1}),e},configurable:!0}),Object.defineProperty(ScopeKeyData.prototype,"initialValue",{get:function(){return this.bound||canObservation_4_2_0_canObservation.temporarilyBind(this),canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this)},set:function(){throw new Error("initialValue should not be set")},configurable:!0});var canViewScope_4_13_6_scopeKeyData=ScopeKeyData,canViewScope_4_13_6_compute_data=function(e,t,n){return new canViewScope_4_13_6_scopeKeyData(e,t,n||{args:[]})};function objectCreateWithSymbolsAndSpecificProperties(e,t){var n={};return"getOwnPropertySymbols"in Object&&Object.getOwnPropertySymbols(e).forEach(function(t){n[t]=e[t]}),Object.getOwnPropertyNames(e).forEach(function(a){(0<=t.indexOf(a)||0===a.indexOf("@@symbol"))&&(n[a]=e[a])}),Object.create(n)}var LetContext=canSimpleMap_4_3_3_canSimpleMap.extend("LetContext",{});LetContext.prototype=objectCreateWithSymbolsAndSpecificProperties(canSimpleMap_4_3_3_canSimpleMap.prototype,["setup","attr","serialize","get","set","log","dispatch","constructorExtends","newInstance","_inherit","_defineProperty","_overwrite","instance","extend","ReturnValue","setup","init"]),LetContext.prototype.constructor=LetContext;var canViewScope_4_13_6_letContext=LetContext;function canHaveProperties(e){return null!=e}function returnFalse(){return!1}function Scope(e,t,n){this._context=e,this._parent=t,this._meta=n||{},this.__cache={}}var parentContextSearch=/(\.\.\/)|(\.\/)|(this[\.@])/g;canAssign_1_3_3_canAssign(Scope,{read:canStacheKey_1_4_3_canStacheKey.read,TemplateContext:canViewScope_4_13_6_templateContext,keyInfo:function(e){"./"===e&&(e="this");var t={remainingKey:e,isScope:"scope"===e};if(t.isScope)return t;var n=e.substr(0,6);return(t.isInScope="scope."===n||"scope@"===n,t.isInScope)?(t.remainingKey=e.substr(6),t):"scope/"===n?(t.walkScope=!0,t.remainingKey=e.substr(6),t):"@scope/"===e.substr(0,7)?(t.walkScope=!0,t.remainingKey=e.substr(7),t):(t.parentContextWalkCount=0,t.remainingKey=e.replace(parentContextSearch,function(e,n){return t.isContextBased=!0,void 0!==n&&t.parentContextWalkCount++,""}),".."===t.remainingKey?(t.parentContextWalkCount++,t.remainingKey="this"):("."===t.remainingKey||""===t.remainingKey)&&(t.remainingKey="this"),"this"===t.remainingKey&&(t.isContextBased=!0),t)},isTemplateContextOrCanNotHaveProperties:function(e){var t=e._context;if(t instanceof canViewScope_4_13_6_templateContext)return!0;return!canHaveProperties(t)},shouldSkipIfSpecial:function(e){var t=!0===e._meta.special;return!(!0!=t)||!!Scope.isTemplateContextOrCanNotHaveProperties(e)},shouldSkipEverythingButSpecial:function(e){var t=!0===e._meta.special;return!(!1!=t)||!!Scope.isTemplateContextOrCanNotHaveProperties(e)},makeShouldExitOnSecondNormalContext:function(){var e=!1;return function(t){var n=!t.isSpecial(),a=n&&e;return n&&(e=!0),a}},makeShouldExitAfterFirstNormalContext:function(){var e=!1;return function(t){if(e)return!0;var n=!t.isSpecial();return n&&(e=!0),!1}},makeShouldSkipSpecialContexts:function(e){var t=e||0;return function(e){return!(0>t&&e._meta.notContext)&&(!!e.isSpecial()||(t--,!(0>t)))}}}),canAssign_1_3_3_canAssign(Scope.prototype,{add:function(e,t){return e===this._context?this:new this.constructor(e,this,t)},find:function(e,t){var n=canStacheKey_1_4_3_canStacheKey.reads(e),a={shouldExit:returnFalse,shouldSkip:Scope.shouldSkipIfSpecial,shouldLookForHelper:!0,read:canStacheKey_1_4_3_canStacheKey.read},o=this._walk(n,t,a);return o.value},readFromSpecialContext:function(e){return this._walk([{key:e,at:!1}],{special:!0},{shouldExit:returnFalse,shouldSkip:Scope.shouldSkipEverythingButSpecial,shouldLookForHelper:!1,read:canStacheKey_1_4_3_canStacheKey.read})},readFromTemplateContext:function(e,t){var n=canStacheKey_1_4_3_canStacheKey.reads(e);return canStacheKey_1_4_3_canStacheKey.read(this.templateContext,n,t)},read:function(e,t){return t=t||{},this.readKeyInfo(Scope.keyInfo(e),t||{})},readKeyInfo:function(e,t){var n={read:t.read||canStacheKey_1_4_3_canStacheKey.read},a,o;if(e.isScope)return{value:this};if(e.isInScope)return o=canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey),a=canStacheKey_1_4_3_canStacheKey.read(this,o,t),"undefined"!=typeof a.value||a.parentHasKey||(a=this.readFromTemplateContext(e.remainingKey,t)),canAssign_1_3_3_canAssign(a,{thisArg:0<o.length?a.parent:void 0});if(e.isContextBased)return o="this"===e.remainingKey?[]:canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey),n.shouldExit=Scope.makeShouldExitOnSecondNormalContext(),n.shouldSkip=Scope.makeShouldSkipSpecialContexts(e.parentContextWalkCount),n.shouldLookForHelper=!0,this._walk(o,t,n);if(e.walkScope)return n.shouldExit=returnFalse,n.shouldSkip=Scope.shouldSkipIfSpecial,n.shouldLookForHelper=!0,o=canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey),this._walk(o,t,n);o=canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey);var r=t&&!0===t.special;return n.shouldExit=Scope.makeShouldExitOnSecondNormalContext(),n.shouldSkip=r?Scope.shouldSkipEverythingButSpecial:Scope.shouldSkipIfSpecial,n.shouldLookForHelper=!r,this._walk(o,t,n)},_walk:function(e,t,n){for(var a=this,o=[],r=-1,i=canAssign_1_3_3_canAssign({foundObservable:function(t,n){p=t,c=e.slice(n)},earlyExit:function(t,n){var o=!0===a._meta.variable,i=!1;i=!0==o&&0===n?canReflect_1_18_0_canReflect.hasKey(t,e[n].key):n>r||n===r&&"object"==typeof t&&canReflect_1_18_0_canReflect.hasOwnKey(t,e[n].key),i&&(y=p,u=c,r=n)}},t),s=canObservationRecorder_1_3_1_canObservationRecorder.isRecording(),l=!1,d,p,c,u,y;a;){if(!0===n.shouldSkip(a)){a=a._parent;continue}if(!0===n.shouldExit(a))break;l=!0,d=a._context;var m=canObservationRecorder_1_3_1_canObservationRecorder.trap(),h=n.read(d,e,i),g=m();if(void 0!==h.value||h.parentHasKey)return!g.length&&s?(p=h.parent,c=e.slice(e.length-1)):canObservationRecorder_1_3_1_canObservationRecorder.addMany(g),{scope:a,rootObserve:p,value:h.value,reads:c,thisArg:h.parent,parentHasKey:h.parentHasKey};o.push.apply(o,g),a=a._parent}if(n.shouldLookForHelper){var f=this.getHelperOrPartial(e);if(f&&f.value)return{value:f.value}}return canObservationRecorder_1_3_1_canObservationRecorder.addMany(o),{setRoot:y,reads:u,value:void 0,noContextAvailable:!l}},getDataForScopeSet:function(e,t){var n=Scope.keyInfo(e),a=canAssign_1_3_3_canAssign({read:function(e,n){if(void 0!==r||e instanceof canViewScope_4_13_6_letContext||(r=e),1<n.length){var a=n.slice(0,n.length-1),o=canStacheKey_1_4_3_canStacheKey.read(e,a,t).value;return null!=o&&canReflect_1_18_0_canReflect.hasKey(o,n[n.length-1].key)?{parent:o,parentHasKey:!0,value:void 0}:{}}return 1===n.length?canReflect_1_18_0_canReflect.hasKey(e,n[0].key)?{parent:e,parentHasKey:!0,value:void 0}:{}:{value:e}}},t),o=this.readKeyInfo(n,a),r;if("this"===n.remainingKey)return{parent:o.value,how:"setValue"};var i=n.remainingKey.split("."),s=i.pop(),l;return o.thisArg?l=o.thisArg:r&&(l=r),void 0===l?{error:"Attempting to set a value at "+e+" where the context is undefined."}:!canReflect_1_18_0_canReflect.isObservableLike(l)&&canReflect_1_18_0_canReflect.isObservableLike(l[s])?canReflect_1_18_0_canReflect.isMapLike(l[s])?{parent:l,key:s,how:"updateDeep",warn:"can-view-scope: Merging data into \""+s+"\" because its parent is non-observable"}:canReflect_1_18_0_canReflect.isValueLike(l[s])?{parent:l,key:s,how:"setValue"}:{parent:l,how:"write",key:s,passOptions:!0}:{parent:l,how:"write",key:s,passOptions:!0}},getHelper:function(e){return console.warn(".getHelper is deprecated, use .getHelperOrPartial"),this.getHelperOrPartial(e)},getHelperOrPartial:function(e){for(var t=this,n,a;t;){if(n=t._context,n instanceof canViewScope_4_13_6_templateContext){if(a=canStacheKey_1_4_3_canStacheKey.read(n.helpers,e,{proxyMethods:!1}),void 0!==a.value)return a;if(a=canStacheKey_1_4_3_canStacheKey.read(n.partials,e,{proxyMethods:!1}),void 0!==a.value)return a}t=t._parent}return canStacheKey_1_4_3_canStacheKey.read(canStacheHelpers_1_2_0_canStacheHelpers,e,{proxyMethods:!1})},get:function(e,t){t=canAssign_1_3_3_canAssign({isArgument:!0},t);var n=this.read(e,t);return n.value},peek:canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t){return this.get(e,t)}),peak:canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t){return this.peek(e,t)}),getScope:function(e){for(var t=this;t;){if(e(t))return t;t=t._parent}},getContext:function(e){var t=this.getScope(e);return t&&t._context},getTemplateContext:function(){var e=this.getScope(function(e){return t=e,e._context instanceof canViewScope_4_13_6_templateContext}),t;return e||(e=new Scope(new canViewScope_4_13_6_templateContext()),t._parent=e),e},addTemplateContext:function(){return this.add(new canViewScope_4_13_6_templateContext)},addLetContext:function(e){return this.add(new canViewScope_4_13_6_letContext(e||{}),{variable:!0})},getRoot:function(){for(var e=this,t=this;e._parent;)t=e,e=e._parent;return e._context instanceof canViewScope_4_13_6_templateContext&&(e=t),e._context},getViewModel:function(){var e=this.getScope(function(e){return e._meta.viewModel});return e&&e._context},getTop:function(){var e;return this.getScope(function(t){return t._meta.viewModel&&(e=t),!1}),e&&e._context},getPathsForKey:function(){},hasKey:function(e){var t=canStacheKey_1_4_3_canStacheKey.reads(e),n;return n="scope"===t[0].key?canStacheKey_1_4_3_canStacheKey.read(this,t.slice(1),e):canStacheKey_1_4_3_canStacheKey.read(this._context,t,e),n.foundLastParent&&n.parentHasKey},set:function(e,t,n){n=n||{};var a=this.getDataForScopeSet(e,n),o=a.parent;switch(a.warn&&dev.warn(a.warn),a.how){case"set":o.set(a.key,t,a.passOptions?n:void 0);break;case"write":canStacheKey_1_4_3_canStacheKey.write(o,a.key,t,n);break;case"setValue":canReflect_1_18_0_canReflect.setValue("key"in a?o[a.key]:o,t);break;case"setKeyValue":canReflect_1_18_0_canReflect.setKeyValue(o,a.key,t);break;case"updateDeep":canReflect_1_18_0_canReflect.updateDeep(o[a.key],t);}},attr:canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t,n){return dev.warn("can-view-scope::attr is deprecated, please use peek, get or set"),n=canAssign_1_3_3_canAssign({isArgument:!0},n),2===arguments.length?this.set(e,t,n):this.get(e,n)}),computeData:function(e,t){return canViewScope_4_13_6_compute_data(this,e,t)},compute:function(e,t){return this.computeData(e,t).compute},cloneFromRef:function(){for(var e=[],t=this,n,a;t;){if(n=t._context,n instanceof canViewScope_4_13_6_templateContext){a=t._parent;break}e.unshift(t),t=t._parent}return a?(e.forEach(function(e){a=a.add(e._context,e._meta)}),a):this},isSpecial:function(){return this._meta.notContext||this._meta.special||this._context instanceof canViewScope_4_13_6_templateContext||this._meta.variable}}),Scope.prototype._read=Scope.prototype._walk,canReflect_1_18_0_canReflect.assignSymbols(Scope.prototype,{"can.hasKey":Scope.prototype.hasKey});var templateContextPrimitives=["filename","lineNumber"];templateContextPrimitives.forEach(function(e){Object.defineProperty(Scope.prototype,e,{get:function(){return this.readFromTemplateContext(e).value},set:function(t){this.templateContext[e]=t}})}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"templateContext",function(){return this.getTemplateContext()._context}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"root",function(){return dev.warn("`scope.root` is deprecated. Use either `scope.top`: https://canjs.com/doc/can-stache/keys/scope.html#scope_top or `scope.vm`: https://canjs.com/doc/can-stache/keys/scope.html#scope_vm instead."),this.getRoot()}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"vm",function(){return this.getViewModel()}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"top",function(){return this.getTop()}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"helpers",function(){return canStacheHelpers_1_2_0_canStacheHelpers});var specialKeywords=["index","key","element","event","viewModel","arguments","helperOptions","args"];specialKeywords.forEach(function(e){Object.defineProperty(Scope.prototype,e,{get:function(){return this.readFromSpecialContext(e).value}})}),canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{};var canViewScope_4_13_6_canViewScope=canNamespace_1_0_0_canNamespace.view.Scope=Scope;function KeyObservable(e,t){t=""+t,this.key=t,this.root=e,settable.call(this,function(){return canStacheKey_1_4_3_canStacheKey.get(this,t)},e)}KeyObservable.prototype=Object.create(settable.prototype),KeyObservable.prototype.set=function(e){canStacheKey_1_4_3_canStacheKey.set(this.root,this.key,e)};var keyObservable=KeyObservable,isViewSymbol=canSymbol_1_6_5_canSymbol.for("can.isView"),createNoOpRenderer=function(e){return function(){e&&(e.rendered=!0)}},utils={last:function(e){return null!=e&&e[e.length-1]},emptyHandler:function(){},jsonParse:function(e){return"'"===e[0]?e.substr(1,e.length-2):"undefined"===e?void 0:JSON.parse(e)},mixins:{last:function(){return this.stack[this.stack.length-1]},add:function(e){this.last().add(e)},subSectionDepth:function(){return this.stack.length-1}},createRenderers:function(e,t,n,a,o){e.fn=n?this.makeRendererConvertScopes(n,t,o,e.metadata):createNoOpRenderer(e.metadata),e.inverse=a?this.makeRendererConvertScopes(a,t,o,e.metadata):createNoOpRenderer(e.metadata),e.isSection=!!(n||a)},makeRendererConvertScopes:function(e,t,n,a){var o=function(n){n===void 0||n instanceof canViewScope_4_13_6_canViewScope||(t?n=t.add(n):n=new canViewScope_4_13_6_canViewScope(n||{})),a&&(a.rendered=!0);var o=e(n||t);return o};return n?o:canObservationRecorder_1_3_1_canObservationRecorder.ignore(o)},makeView:function(e){var t=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(t){return t instanceof canViewScope_4_13_6_canViewScope||(t=new canViewScope_4_13_6_canViewScope(t)),e(t)});return t[isViewSymbol]=!0,t},getItemsStringContent:function(e,t,n){for(var a="",o=canStacheKey_1_4_3_canStacheKey.get(e,"length"),r=canReflect_1_18_0_canReflect.isObservableLike(e),s=0,l;s<o;s++)l=r?new keyObservable(e,s):e[s],a+=n.fn(l);return a},getItemsFragContent:function(e,t,n){var a=[],o=canStacheKey_1_4_3_canStacheKey.get(e,"length"),r=canReflect_1_18_0_canReflect.isObservableLike(e),s=t.exprData&&t.exprData.hashExprs,l;0<canReflect_1_18_0_canReflect.size(s)&&(l={},canReflect_1_18_0_canReflect.eachKey(s,function(e,t){l[e.key]=t}));for(var d=0;d<o;d++){var p={},c=r?new keyObservable(e,d):e[d];0<canReflect_1_18_0_canReflect.size(l)&&(l.value&&(p[l.value]=c),l.index&&(p[l.index]=d)),a.push(t.fn(n.add(p,{notContext:!0}).add({index:d},{special:!0}).add(c)))}return a}},last=utils.last,decodeHTML="undefined"!=typeof document&&function(){var e=document$1().createElement("div");return function(t){return-1===t.indexOf("&")?t.replace(/\r\n/g,"\n"):(e.innerHTML=t,0===e.childNodes.length?"":e.childNodes.item(0).nodeValue)}}(),HTMLSectionBuilder=function(e){e&&(this.filename=e),this.stack=[new HTMLSection]};canAssign_1_3_3_canAssign(HTMLSectionBuilder.prototype,utils.mixins),canAssign_1_3_3_canAssign(HTMLSectionBuilder.prototype,{startSubSection:function(e){var t=new HTMLSection(e);return this.stack.push(t),t},endSubSectionAndReturnRenderer:function(){if(this.last().isEmpty())return this.stack.pop(),null;var e=this.endSection();return utils.makeView(e.compiled.hydrate.bind(e.compiled))},startSection:function(e,t){var n=new HTMLSection(e);this.last().add({comment:t||"#section",callbacks:[n.targetCallback]}),this.last().add({comment:"can-end-placeholder"}),this.stack.push(n)},endSection:function(){return this.last().compile(),this.stack.pop()},inverse:function(){this.last().inverse()},compile:function(){var e=this.stack.pop().compile();return utils.makeView(e.hydrate.bind(e))},push:function(e){this.last().push(e)},pop:function(){return this.last().pop()},removeCurrentNode:function(){this.last().removeCurrentNode()}});var HTMLSection=function(e){this.data="targetData",this.targetData=[],this.targetStack=[];var t=this;this.targetCallback=function(n){e.call(this,n,t.compiled.hydrate.bind(t.compiled),t.inverseCompiled&&t.inverseCompiled.hydrate.bind(t.inverseCompiled))}};canAssign_1_3_3_canAssign(HTMLSection.prototype,{inverse:function(){this.inverseData=[],this.data="inverseData"},push:function(e){this.add(e),this.targetStack.push(e)},pop:function(){return this.targetStack.pop()},add:function(e){"string"==typeof e&&(e=decodeHTML(e)),this.targetStack.length?last(this.targetStack).children.push(e):this[this.data].push(e)},compile:function(){return this.compiled=canViewTarget_5_0_0_canViewTarget(this.targetData,document$1()),this.inverseData&&(this.inverseCompiled=canViewTarget_5_0_0_canViewTarget(this.inverseData,document$1()),delete this.inverseData),this.targetStack=this.targetData=null,this.compiled},removeCurrentNode:function(){var e=this.children();return e.pop()},children:function(){return this.targetStack.length?last(this.targetStack).children:this[this.data]},isEmpty:function(){return!this.targetData.length}}),HTMLSectionBuilder.HTMLSection=HTMLSection;var html_section=HTMLSectionBuilder,canDomData_1_0_3_canDomData=createCommonjsModule(function(e){var t=function(e){for(var t in e)return!1;return!0},n=new WeakMap,a=function(e){var t=!1;return n.has(e)&&(t=!0,n.delete(e)),t};if(canNamespace_1_0_0_canNamespace.domData)throw new Error("You can't have two versions of can-dom-data, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.domData={_data:n,get:function(e,t){var a=n.get(e);return t===void 0?a:a&&a[t]},set:function(e,t,a){var o=n.get(e);return void 0===o&&(o={},n.set(e,o)),void 0!==t&&(o[t]=a),o},clean:function(e,o){var r=n.get(e);r&&r[o]&&delete r[o],t(r)&&a(e)},delete:a}}),slice$1=[].slice;function defaultIdentity(e,t){return e===t}function makeIdentityFromMapSchema(e){return e.identity&&e.identity.length?function(t,n){var a=canReflect_1_18_0_canReflect.getIdentity(t,e),o=canReflect_1_18_0_canReflect.getIdentity(n,e);return a===o}:defaultIdentity}function makeIdentityFromListSchema(e){return null==e.values?defaultIdentity:makeIdentityFromMapSchema(canReflect_1_18_0_canReflect.getSchema(e.values))}function makeIdentity(e,t){var n=canReflect_1_18_0_canReflect.getSchema(e),a;if(null!=n)if(null!=n.values)a=canReflect_1_18_0_canReflect.getSchema(n.values);else return defaultIdentity;return null==a&&0<t&&(a=canReflect_1_18_0_canReflect.getSchema(canReflect_1_18_0_canReflect.getKeyValue(e,0))),a?makeIdentityFromMapSchema(a):defaultIdentity}function reverseDiff(e,t,n,a,o){for(var r=n.length-1,i=a.length-1;r>e&&i>t;){var s=n[r],l=a[i];if(o(s,l,r)){r--,i--;continue}else return[{type:"splice",index:t,deleteCount:r-e+1,insert:slice$1.call(a,t,i+1)}]}return[{type:"splice",index:t,deleteCount:r-e+1,insert:slice$1.call(a,t,i+1)}]}var list=function(e,t,n){var a=0,o=0,r=canReflect_1_18_0_canReflect.size(e),i=canReflect_1_18_0_canReflect.size(t),s=[],l;for(l="function"===typeof n?n:null==n?makeIdentity(e,r):"map"===n.type?makeIdentityFromMapSchema(n):makeIdentityFromListSchema(n);a<r&&o<i;){var d=e[a],p=t[o];if(l(d,p,a)){a++,o++;continue}if(o+1<i&&l(d,t[o+1],a)){s.push({index:o,deleteCount:0,insert:[t[o]],type:"splice"}),a++,o+=2;continue}else if(a+1<r&&l(e[a+1],p,a+1)){s.push({index:o,deleteCount:1,insert:[],type:"splice"}),a+=2,o++;continue}else return s.push.apply(s,reverseDiff(a,o,e,t,l)),s}return o===i&&a===r?s:(s.push({type:"splice",index:o,deleteCount:r-a,insert:slice$1.call(t,o)}),s)},global$1=global_1(),xmlnsAttrNamespaceURI="http://www.w3.org/2000/xmlns/",xlinkHrefAttrNamespaceURI="http://www.w3.org/1999/xlink",attrsNamespacesURI={xmlns:xmlnsAttrNamespaceURI,"xlink:href":xlinkHrefAttrNamespaceURI},formElements={INPUT:!0,TEXTAREA:!0,SELECT:!0,BUTTON:!0},toString$1=function(e){return null==e?"":""+e},isSVG=function(e){return"http://www.w3.org/2000/svg"===e.namespaceURI},truthy=function(){return!0},getSpecialTest=function(e){return e&&e.test||truthy},propProp=function(e,t){return t=t||{},t.get=function(){return this[e]},t.set=function(t){this[e]!==t&&(this[e]=t)},t},booleanProp=function(e){return{isBoolean:!0,set:function(t){e in this?this[e]=t:canDomMutate_2_0_8_node.setAttribute.call(this,e,"")},remove:function(){this[e]=!1}}},setupMO=function(e,t){var n=canDomData_1_0_3_canDomData.get(e,"attrMO");if(!n){var a=function(){t.call(e)},o=mutationObserver();if(o){var r=new o(a);r.observe(e,{childList:!0,subtree:!0}),canDomData_1_0_3_canDomData.set(e,"attrMO",r)}else canDomData_1_0_3_canDomData.set(e,"attrMO",!0),canDomData_1_0_3_canDomData.set(e,"canBindingCallback",{onMutation:a})}},_findOptionToSelect=function(e,t){for(var n=e.firstChild;n;){if("OPTION"===n.nodeName&&t===n.value)return n;if("OPTGROUP"===n.nodeName){var a=_findOptionToSelect(n,t);if(a)return a}n=n.nextSibling}},setChildOptions=function(e,t){var n;null!=t&&(n=_findOptionToSelect(e,t)),n?n.selected=!0:e.selectedIndex=-1},forEachOption=function(e,t){for(var n=e.firstChild;n;)"OPTION"===n.nodeName&&t(n),"OPTGROUP"===n.nodeName&&forEachOption(n,t),n=n.nextSibling},collectSelectedOptions=function(e){var t=[];return forEachOption(e,function(e){e.selected&&t.push(e.value)}),t},markSelectedOptions=function(e,t){forEachOption(e,function(e){e.selected=-1!==t.indexOf(e.value)})},setChildOptionsOnChange=function(e,t){var n=canDomData_1_0_3_canDomData.get(e,"attrSetChildOptions");return n?Function.prototype:(n=function(){setChildOptions(e,e.value)},canDomData_1_0_3_canDomData.set(e,"attrSetChildOptions",n),t.call(e,"change",n),function(t){canDomData_1_0_3_canDomData.clean(e,"attrSetChildOptions"),t.call(e,"change",n)})},behaviorRules=new Map,isPropWritable=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);if(n)return n.writable||n.set;var a=Object.getPrototypeOf(e);return!!a&&isPropWritable(a,t)},cacheRule=function(e,t,n){var a;return a=behaviorRules.get(e.prototype),a||(a={},behaviorRules.set(e.constructor,a)),a[t]=n,n},specialAttributes={checked:{get:function(){return this.checked},set:function(e){var t=!!e||""===e||0===arguments.length;this.checked=t,t&&"radio"===this.type&&(this.defaultChecked=!0)},remove:function(){this.checked=!1},test:function(){return"INPUT"===this.nodeName}},class:{get:function(){return isSVG(this)?this.getAttribute("class"):this.className},set:function(e){e=e||"",isSVG(this)?canDomMutate_2_0_8_node.setAttribute.call(this,"class",""+e):this.className=e}},disabled:booleanProp("disabled"),focused:{get:function(){return this===document.activeElement},set:function(e){function t(){e?o.focus():o.blur()}var n=attr.get(this,"focused"),a=this.ownerDocument.documentElement,o=this;if(n!==e)if(!a.contains(o))var r=canDomMutate_2_0_8_canDomMutate.onNodeConnected(o,function(){r(),t()});else canQueues_1_3_1_canQueues.enqueueByQueue({mutate:[t]},null,[]);return!0},addEventListener:function(e,t,n){return n.call(this,"focus",t),n.call(this,"blur",t),function(e){e.call(this,"focus",t),e.call(this,"blur",t)}},test:function(){return"INPUT"===this.nodeName}},for:propProp("htmlFor"),innertext:propProp("innerText"),innerhtml:propProp("innerHTML"),innerHTML:propProp("innerHTML",{addEventListener:function(e,t){var n=[],a=this;return["change","blur"].forEach(function(e){var o=function(){t.apply(this,arguments)};canDomEvents_1_3_11_canDomEvents.addEventListener(a,e,o),n.push([e,o])}),function(e){n.forEach(function(t){e.call(a,t[0],t[1])})}}}),required:booleanProp("required"),readonly:booleanProp("readOnly"),selected:{get:function(){return this.selected},set:function(e){e=!!e,canDomData_1_0_3_canDomData.set(this,"lastSetValue",e),this.selected=e},addEventListener:function(e,t,n){var a=this,o=this.parentNode,r=a.selected,i=function(){var t=a.selected;r=canDomData_1_0_3_canDomData.get(a,"lastSetValue")||r,t!==r&&(r=t,canDomEvents_1_3_11_canDomEvents.dispatch(a,e))},s=setChildOptionsOnChange(o,n);return canDomEvents_1_3_11_canDomEvents.addEventListener(o,"change",i),n.call(a,e,t),function(n){s(n),canDomEvents_1_3_11_canDomEvents.removeEventListener(o,"change",i),n.call(a,e,t)}},test:function(){return"OPTION"===this.nodeName&&this.parentNode&&"SELECT"===this.parentNode.nodeName}},style:{set:function(){var e=global$1.document&&document$1().createElement("div");return e&&e.style&&"cssText"in e.style?function(e){this.style.cssText=e||""}:function(e){canDomMutate_2_0_8_node.setAttribute.call(this,"style",e)}}()},textcontent:propProp("textContent"),value:{get:function(){var e=this.value;return"SELECT"===this.nodeName&&"selectedIndex"in this&&-1===this.selectedIndex&&(e=void 0),e},set:function(e){var t=this.nodeName.toLowerCase();if(("input"===t||"textarea"===t)&&(e=toString$1(e)),(this.value!==e||"option"===t)&&(this.value=e),("input"===t||"textarea"===t)&&(this.defaultValue=e),"select"===t){canDomData_1_0_3_canDomData.set(this,"attrValueLastVal",e),setChildOptions(this,null===e?e:this.value);var n=this.ownerDocument.documentElement;if(!n.contains(this))var a=this,o=canDomMutate_2_0_8_canDomMutate.onNodeConnected(a,function(){o(),setChildOptions(a,null===e?e:a.value)});setupMO(this,function(){var e=canDomData_1_0_3_canDomData.get(this,"attrValueLastVal");attr.set(this,"value",e),canDomEvents_1_3_11_canDomEvents.dispatch(this,"change")})}},test:function(){return formElements[this.nodeName]}},values:{get:function(){return collectSelectedOptions(this)},set:function(e){e=e||[],markSelectedOptions(this,e),canDomData_1_0_3_canDomData.set(this,"stickyValues",attr.get(this,"values")),setupMO(this,function(){var e=canDomData_1_0_3_canDomData.get(this,"stickyValues");attr.set(this,"values",e);var t=canDomData_1_0_3_canDomData.get(this,"stickyValues"),n=list(e.slice().sort(),t.slice().sort());n.length&&canDomEvents_1_3_11_canDomEvents.dispatch(this,"values")})},addEventListener:function(e,t,n){var a=function(){canDomEvents_1_3_11_canDomEvents.dispatch(this,"values")};return canDomEvents_1_3_11_canDomEvents.addEventListener(this,"change",a),n.call(this,e,t),function(n){canDomEvents_1_3_11_canDomEvents.removeEventListener(this,"change",a),n.call(this,e,t)}}}},attr={rules:behaviorRules,specialAttributes:specialAttributes,getRule:function(e,t){var n=specialAttributes[t];if(n)return n;var a=behaviorRules.get(e.constructor),o=a&&a[t];if(o)return o;if(!(t in e))return this.attribute(t);var r=isPropWritable(e,t)?this.property(t):this.attribute(t);return cacheRule(e,t,r)},attribute:function(e){return{get:function(){return this.getAttribute(e)},set:function(t){attrsNamespacesURI[e]?canDomMutate_2_0_8_node.setAttributeNS.call(this,attrsNamespacesURI[e],e,t):canDomMutate_2_0_8_node.setAttribute.call(this,e,t)}}},property:function(e){return{get:function(){return this[e]},set:function(t){this[e]=t}}},findSpecialListener:function(e){return specialAttributes[e]&&specialAttributes[e].addEventListener},setAttrOrProp:function(e,t,n){return this.set(e,t,n)},set:function(e,t,n){var a=this.getRule(e,t),o=a&&a.set;if(o)return o.call(e,n)},get:function(e,t){var n=this.getRule(e,t),a=n&&n.get;if(a)return n.test?n.test.call(e)&&a.call(e):a.call(e)},remove:function(e,t){t=t.toLowerCase();var n=specialAttributes[t],a=n&&n.set,o=n&&n.remove,r=getSpecialTest(n);"function"==typeof o&&r.call(e)?o.call(e):"function"==typeof a&&r.call(e)?a.call(e,void 0):canDomMutate_2_0_8_node.removeAttribute.call(e,t)}},canAttributeObservable_2_0_2_behaviors=attr,setElementSymbol$1=canSymbol_1_6_5_canSymbol.for("can.setElement"),elementSymbol=canSymbol_1_6_5_canSymbol.for("can.element");function ListenUntilRemovedAndInitialize(e,t,n,a){this.observable=e,this.handler=t,this.placeholder=n,this.queueName=a,this.handler[elementSymbol]=n,e[setElementSymbol$1]?e[setElementSymbol$1](n):console.warn("no can.setElement symbol on observable",e),this.setup()}ListenUntilRemovedAndInitialize.prototype.setup=function(){if(this.setupNodeReinserted){if(!canDomMutate_2_0_8_IsConnected.isConnected(this.placeholder))return;this.setupNodeReinserted()}this.teardownNodeRemoved=canDomMutate_2_0_8_canDomMutate.onNodeRemoved(this.placeholder,this.teardown.bind(this)),canReflect_1_18_0_canReflect.onValue(this.observable,this.handler,this.queueName),this.handler(canReflect_1_18_0_canReflect.getValue(this.observable))},ListenUntilRemovedAndInitialize.prototype.teardown=function(){canDomMutate_2_0_8_IsConnected.isConnected(this.placeholder)||(this.teardownNodeRemoved(),this.setupNodeReinserted=canDomMutate_2_0_8_canDomMutate.onNodeInserted(this.placeholder,this.setup.bind(this)),canReflect_1_18_0_canReflect.offValue(this.observable,this.handler,this.queueName))};var helpers$1={range:{create:function(e,t){var n,a,o;return e.nodeType===Node.COMMENT_NODE?(n=e,o=e.nextSibling,o&&o.nodeType===Node.COMMENT_NODE&&"can-end-placeholder"===o.nodeValue?(a=o,a.nodeValue="/"+(n.nodeValue=t)):dev.warn("can-view-live: creating an end comment for ",t,e)):(dev.warn("can-view-live: forcing a comment range for ",t,e),n=e.ownerDocument.createComment(t),e.parentNode.replaceChild(n,e)),a||(a=e.ownerDocument.createComment("/"+t),n.parentNode.insertBefore(a,n.nextSibling)),{start:n,end:a}},remove:function(e){for(var t=e.start.parentNode,n=e.end.previousSibling,a;n&&n!==e.start;)a=n,n=n.previousSibling,canDomMutate_2_0_8_node.removeChild.call(t,a);canDomMutate_2_0_8_canDomMutate.flushRecords()},update:function(e,t){var n=e.start.parentNode;n&&(canDomMutate_2_0_8_node.insertBefore.call(n,t,e.end),canDomMutate_2_0_8_canDomMutate.flushRecords())}},ListenUntilRemovedAndInitialize:ListenUntilRemovedAndInitialize,getAttributeParts:function(e){var t={},n;return canViewParser_4_1_3_canViewParser.parseAttrs(e,{attrStart:function(e){t[e]="",n=e},attrValue:function(e){t[n]+=e},attrEnd:function(){}}),t},addTextNodeIfNoChildren:function(e){e.firstChild||e.appendChild(e.ownerDocument.createTextNode(""))},makeString:function(e){return null==e?"":""+e}},attr_1=function(e,t,n){new helpers$1.ListenUntilRemovedAndInitialize(n,function(n){canAttributeObservable_2_0_2_behaviors.set(e,t,n)},e,"dom","")},attrs=function(e,t,n,a){if(!canReflect_1_18_0_canReflect.isObservableLike(t)){var o=helpers$1.getAttributeParts(t);for(var r in o)canDomMutate_2_0_8_node.setAttribute.call(e,r,o[r]);return}var i={};new helpers$1.ListenUntilRemovedAndInitialize(t,function(t){var o=helpers$1.getAttributeParts(t),r;for(r in o){var s=o[r],l=i[r];if(s!==l){canDomMutate_2_0_8_node.setAttribute.call(e,r,s);var d=canViewCallbacks_5_0_0_canViewCallbacks.attr(r);d&&d(e,{attributeName:r,scope:n,options:a})}delete i[r]}for(r in i)canDomMutate_2_0_8_node.removeAttribute.call(e,r);i=o},e,"dom","")},viewInsertSymbol=canSymbol_1_6_5_canSymbol.for("can.viewInsert");function makeCommentFragment(e){var t=document$1();return canFragment_1_3_1_canFragment([t.createComment(e),t.createComment("can-end-placeholder")])}var html=function(e,t,n){var a=helpers$1.range.update;if(e.nodeType!==Node.COMMENT_NODE){var o=makeCommentFragment(""),r=o.firstChild;e.parentNode.replaceChild(o,e),e=r}var i=helpers$1.range.create(e,""),s=!1;new helpers$1.ListenUntilRemovedAndInitialize(t,function(e){e&&"function"==typeof e[viewInsertSymbol]&&(e=e[viewInsertSymbol](n));var t="function"==typeof e,o=t?makeCommentFragment(""):canFragment_1_3_1_canFragment(e);t&&e(o.firstChild),!0===s?(helpers$1.range.remove(i),a(i,o)):(helpers$1.range.update(i,o),s=!0)},i.start,"dom","live.html replace::")},onValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.onValue"),offValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offValue"),onPatchesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onPatches"),offPatchesSymbol=canSymbol_1_6_5_canSymbol.for("can.offPatches"),Patcher=function(e,t){this.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Array],{onFirst:this.setup.bind(this),onEmpty:this.teardown.bind(this)}),this.observableOrList=e,this.isObservableValue=canReflect_1_18_0_canReflect.isValueLike(this.observableOrList)||canReflect_1_18_0_canReflect.isObservableLike(this.observableOrList),this.priority=this.isObservableValue?canReflect_1_18_0_canReflect.getPriority(e):t||0,this.onList=this.onList.bind(this),this.onPatchesNotify=this.onPatchesNotify.bind(this),this.onPatchesDerive=this.onPatchesDerive.bind(this),this.patches=[]};Patcher.prototype={constructor:Patcher,setup:function(){this.observableOrList[onValueSymbol$2]?(canReflect_1_18_0_canReflect.onValue(this.observableOrList,this.onList,"notify"),this.setupList(canReflect_1_18_0_canReflect.getValue(this.observableOrList))):this.setupList(this.observableOrList)},teardown:function(){this.observableOrList[offValueSymbol$1]&&canReflect_1_18_0_canReflect.offValue(this.observableOrList,this.onList,"notify"),this.currentList&&this.currentList[offPatchesSymbol]&&this.currentList[offPatchesSymbol](this.onPatchesNotify,"notify")},setupList:function(e){this.currentList=e,e&&e[onPatchesSymbol$1]&&e[onPatchesSymbol$1](this.onPatchesNotify,"notify")},onList:function(e){var t=this.currentList||[];e=e||[],t[offPatchesSymbol]&&t[offPatchesSymbol](this.onPatchesNotify,"notify");var n=list(t,e);this.currentList=e,this.onPatchesNotify(n),e[onPatchesSymbol$1]&&e[onPatchesSymbol$1](this.onPatchesNotify,"notify")},onPatchesNotify:function(e){this.patches.push.apply(this.patches,e),canQueues_1_3_1_canQueues.deriveQueue.enqueue(this.onPatchesDerive,this,[],{priority:this.priority})},onPatchesDerive:function(){var e=this.patches;this.patches=[],canQueues_1_3_1_canQueues.enqueueByQueue(this.handlers.getNode([]),this.currentList,[e,this.currentList],null,["Apply patches",e])}},canReflect_1_18_0_canReflect.assignSymbols(Patcher.prototype,{"can.onPatches":function(e,t){this.handlers.add([t||"mutate",e])},"can.offPatches":function(e,t){this.handlers.delete([t||"mutate",e])}});var patcher=Patcher,patchSort=function(e){var t=[];if(e.forEach(function(e){"move"===e.type?t.push({patch:e,kind:"move"}):(e.deleteCount&&t.push({type:"splice",index:e.index,deleteCount:e.deleteCount,insert:[]}),e.insert&&e.insert.length&&t.push({type:"splice",index:e.index,deleteCount:0,insert:e.insert}))}),2!==e.length)return e;var n=t[0],a=t[1];if(n.insert&&n.insert.length&&a.deleteCount){var o=n,r=a;if(o.index<r.index)r.index-=o.insert.length;else if(o.index>r.index)o.index-=r.deleteCount;else throw"indexes the same!";return[r,o]}return e};function SetObservable(e,t){this.setter=t,canSimpleObservable_2_5_0_canSimpleObservable.call(this,e)}SetObservable.prototype=Object.create(canSimpleObservable_2_5_0_canSimpleObservable.prototype),SetObservable.prototype.constructor=SetObservable,SetObservable.prototype.set=function(e){this.setter(e)},canReflect_1_18_0_canReflect.assignSymbols(SetObservable.prototype,{"can.setValue":SetObservable.prototype.set});var setObservable=SetObservable,splice=[].splice,renderAndAddRangeNode=function(e,t,n,a){var o=e.apply(t,n.concat()),r=canFragment_1_3_1_canFragment(o),i=a.createTextNode("");return r.appendChild(i),r};function getFrag(e,t){for(var n=e.ownerDocument.createDocumentFragment(),a,o;t!==e;)a=t,t=a.previousSibling,n.insertBefore(a,o),o=a;return n.insertBefore(t,o),n}var onPatchesSymbol$2=canSymbol_1_6_5_canSymbol.for("can.onPatches"),offPatchesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offPatches");function ListDOMPatcher(e,t,n,a,o){this.patcher=new patcher(t);var r=canReflect_1_18_0_canReflect.getName(t);this.value=t,this.render=n,this.context=a,this.falseyRender=o,this.range=helpers$1.range.create(e,r),this.indexMap=[],this.itemEndNode=[],this.domQueue=[],this.isValueLike=canReflect_1_18_0_canReflect.isValueLike(this.value),this.isObservableLike=canReflect_1_18_0_canReflect.isObservableLike(this.value),this.onPatches=this.onPatches.bind(this),this.processDomQueue=this.processDomQueue.bind(this),this.teardownValueBinding=this.teardownValueBinding.bind(this),this.meta={reasonLog:"live.html add::"+r,element:this.range.start},this.setupValueBinding()}var onPatchesSymbol$2=canSymbol_1_6_5_canSymbol.for("can.onPatches"),offPatchesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offPatches");ListDOMPatcher.prototype={setupValueBinding:function(){this.teardownNodeRemoved=canDomMutate_2_0_8_canDomMutate.onNodeRemoved(this.range.start,this.teardownValueBinding),this.patcher[onPatchesSymbol$2](this.onPatches,"notify"),this.patcher.currentList&&this.patcher.currentList.length?this.add(this.patcher.currentList,0):this.addFalseyIfEmpty()},teardownValueBinding:function(){this.exit=!0,this.teardownNodeRemoved(),this.patcher[offPatchesSymbol$1](this.onPatches,"notify")},onPatches:function(e){if(!this.exit){var t=[];e.forEach(function(e){t.push.apply(t,patchSort([e]))});for(var n=0,a=t.length,o;n<a;n++)o=t[n],"move"===o.type?this.addToDomQueue(this.move,[o.toIndex,o.fromIndex]):(o.deleteCount&&this.addToDomQueue(this.remove,[{length:o.deleteCount},o.index]),o.insert&&o.insert.length&&this.addToDomQueue(this.add,[o.insert,o.index]))}},addToDomQueue:function(e,t){this.domQueue.push({fn:e,args:t}),canQueues_1_3_1_canQueues.domQueue.enqueue(this.processDomQueue,this,[this.domQueue],this.meta)},processDomQueue:function(){this.domQueue.forEach(function(e){var t=e.fn,n=e.args;t.apply(this,n)}.bind(this)),this.domQueue=[]},add:function(e,t){var n=this.range.start.ownerDocument,a=n.createDocumentFragment(),o=[],r=[],s=this.render,l=this.context;e.forEach(function(e,i){var d=new canSimpleObservable_2_5_0_canSimpleObservable(i+t),p=new setObservable(e,function(e){canReflect_1_18_0_canReflect.setKeyValue(this.patcher.currentList,d.get(),e)}.bind(this)),c=renderAndAddRangeNode(s,l,[p,d],n);o.push(c.lastChild),a.appendChild(c),r.push(d)},this),this.indexMap.length||(helpers$1.range.remove(this.range),this.itemEndNode=[]);var d=this.itemEndNode.length,p;if(t===d)p=this.range.end;else if(0===t)p=this.range.start.nextSibling;else if(t<d)p=this.itemEndNode[t-1].nextSibling;else throw new Error("Unable to place item");canDomMutate_2_0_8_node.insertBefore.call(p.parentNode,a,p),splice.apply(this.itemEndNode,[t,0].concat(o)),splice.apply(this.indexMap,[t,0].concat(r));for(var c=t+r.length,u=this.indexMap.length;c<u;c++)this.indexMap[c].set(c)},remove:function(e,t){0>t&&(t=this.indexMap.length+t);var n=e.length,a=t+n-1,o,r;o=0===t?this.range.start:this.itemEndNode[t-1],r=this.itemEndNode[a].nextSibling,this.itemEndNode.splice(t,e.length),o&&r&&helpers$1.range.remove({start:o,end:r});var s=this.indexMap;s.splice(t,e.length);for(var l=t,d=s.length;l<d;l++)s[l].set(l);this.exit||this.addFalseyIfEmpty()},addFalseyIfEmpty:function(){if(this.falseyRender&&0===this.indexMap.length){var e=renderAndAddRangeNode(this.falseyRender,this.currentList,[this.currentList],this.range.start.ownerDocument);helpers$1.range.update(this.range,e)}},move:function(e,t){var n=this.itemEndNode[t],a;a=0<t?this.itemEndNode[t-1].nextSibling:this.range.start.nextSibling;var o=t<e?this.itemEndNode[e].nextSibling:0<e?this.itemEndNode[e-1].nextSibling:this.range.start.nextSibling;var r=getFrag(a,n);o.parentNode.insertBefore(r,o),this.itemEndNode.splice(t,1),this.itemEndNode.splice(e,0,n),++e,++t;var s=this.indexMap;--e,--t;var l=s[t];[].splice.apply(s,[t,1]),[].splice.apply(s,[e,0,l]);var d=Math.min(t,e),p=s.length;for(p;d<p;d++)s[d].set(d)}};var list$1=function(e,t,n,a,o){new ListDOMPatcher(e,t,n,a,o)},text=function(e,t){if(e.nodeType!==Node.TEXT_NODE){var n;n=document.createTextNode(""),e.parentNode.replaceChild(n,e),e=n}new helpers$1.ListenUntilRemovedAndInitialize(t,function(t){e.nodeValue=helpers$1.makeString(t)},e,"dom","")},live={};live.attr=attr_1,live.attrs=attrs,live.html=html,live.list=list$1,live.text=text;var canViewLive_5_0_3_canViewLive=live,noop=function(){},TextSectionBuilder=function(e){e&&(this.filename=e),this.stack=[new TextSection]};canAssign_1_3_3_canAssign(TextSectionBuilder.prototype,utils.mixins),canAssign_1_3_3_canAssign(TextSectionBuilder.prototype,{startSection:function(e){var t=new TextSection;this.last().add({process:e,truthy:t}),this.stack.push(t)},endSection:function(){this.stack.pop()},inverse:function(){this.stack.pop();var e=new TextSection;this.last().last().falsey=e,this.stack.push(e)},compile:function(e){var t=this.stack[0].compile();return function(n){var a=new canObservation_4_2_0_canObservation(function(){return t(n)},null,{isObservable:!1});canReflect_1_18_0_canReflect.onValue(a,noop);var o=canReflect_1_18_0_canReflect.getValue(a);canReflect_1_18_0_canReflect.valueHasDependencies(a)?(e.textContentOnly?canViewLive_5_0_3_canViewLive.text(this,a):e.attr?canViewLive_5_0_3_canViewLive.attr(this,e.attr,a):canViewLive_5_0_3_canViewLive.attrs(this,a,n),canReflect_1_18_0_canReflect.offValue(a,noop)):e.textContentOnly?this.nodeValue=o:e.attr?canDomMutate_2_0_8_node.setAttribute.call(this,e.attr,o):canViewLive_5_0_3_canViewLive.attrs(this,o)}}});var passTruthyFalsey=function(e,t,n){return function(a){return e.call(this,a,t,n)}},TextSection=function(){this.values=[]};canAssign_1_3_3_canAssign(TextSection.prototype,{add:function(e){this.values.push(e)},last:function(){return this.values[this.values.length-1]},compile:function(){for(var e=this.values,t=e.length,n=0,a;n<t;n++)a=this.values[n],"object"==typeof a&&(e[n]=passTruthyFalsey(a.process,a.truthy&&a.truthy.compile(),a.falsey&&a.falsey.compile()));return function(n){for(var a="",o=0,r;o<t;o++)r=e[o],a+="string"==typeof r?r:r.call(this,n);return a}}});var text_section=TextSectionBuilder,Arg=function(e,t){this.expr=e,this.modifiers=t||{},this.isCompute=!1};Arg.prototype.value=function(){return this.expr.value.apply(this.expr,arguments)};var arg=Arg,Literal=function(e){this._value=e};Literal.prototype.value=function(){return this._value};var literal=Literal,setElementSymbol$2=canSymbol_1_6_5_canSymbol.for("can.setElement");function SetterObservable(e,t){this.setter=t,this.observation=new canObservation_4_2_0_canObservation(e),this.handler=this.handler.bind(this)}SetterObservable.prototype=Object.create(settable.prototype),SetterObservable.prototype.constructor=SetterObservable,SetterObservable.prototype.set=function(e){this.setter(e)},SetterObservable.prototype.hasDependencies=function(){return canReflect_1_18_0_canReflect.valueHasDependencies(this.observation)},canReflect_1_18_0_canReflect.assignSymbols(SetterObservable.prototype,{"can.setValue":SetterObservable.prototype.set,"can.valueHasDependencies":SetterObservable.prototype.hasDependencies,"can.setElement":function(e){this.observation[setElementSymbol$2](e)}});var setter=SetterObservable;function getObservableValue_fromDynamicKey_fromObservable(e,t){var n=function(){return canStacheKey_1_4_3_canStacheKey.reads((""+canReflect_1_18_0_canReflect.getValue(e)).replace(/\./g,"\\."))},a=new setter(function(){var e=canStacheKey_1_4_3_canStacheKey.read(canReflect_1_18_0_canReflect.getValue(t),n());return o=e.parentHasKey,e.value},function(e){canStacheKey_1_4_3_canStacheKey.write(canReflect_1_18_0_canReflect.getValue(t),n(),e)}),o;return canObservation_4_2_0_canObservation.temporarilyBind(a),a.initialValue=canObservationRecorder_1_3_1_canObservationRecorder.peekValue(a),a.parentHasKey=o,a}function convertToArgExpression(e){return e instanceof arg||e instanceof literal?e:new arg(e)}function toComputeOrValue(e){return canReflect_1_18_0_canReflect.isObservableLike(e)?canReflect_1_18_0_canReflect.isValueLike(e)&&!1===canReflect_1_18_0_canReflect.valueHasDependencies(e)?canReflect_1_18_0_canReflect.getValue(e):e.compute?e.compute:canViewScope_4_13_6_makeComputeLike(e):e}function toCompute(e){return e?e.isComputed?e:e.compute?e.compute:canViewScope_4_13_6_makeComputeLike(e):e}var expressionHelpers={getObservableValue_fromDynamicKey_fromObservable:getObservableValue_fromDynamicKey_fromObservable,convertToArgExpression:convertToArgExpression,toComputeOrValue:toComputeOrValue,toCompute:toCompute},Hashes=function(e){this.hashExprs=e};Hashes.prototype.value=function(){var e={};for(var t in this.hashExprs){var n=expressionHelpers.convertToArgExpression(this.hashExprs[t]),a=n.value.apply(n,arguments);e[t]={call:!n.modifiers||!n.modifiers.compute,value:a}}return new canObservation_4_2_0_canObservation(function(){var t={};for(var n in e)t[n]=e[n].call?canReflect_1_18_0_canReflect.getValue(e[n].value):expressionHelpers.toComputeOrValue(e[n].value);return t})};var hashes=Hashes,Bracket=function(e,t){this.root=t,this.key=e};Bracket.prototype.value=function(e,t){var n=this.root?this.root.value(e,t):e.peek("this");return expressionHelpers.getObservableValue_fromDynamicKey_fromObservable(this.key.value(e,t),n,e,t,{})},Bracket.prototype.closingTag=function(){};var bracket=Bracket,setIdentifier=function(e){this.value=e},sourceTextSymbol=canSymbol_1_6_5_canSymbol.for("can-stache.sourceText"),isViewSymbol$1=canSymbol_1_6_5_canSymbol.for("can.isView"),Call=function(e,t){this.methodExpr=e,this.argExprs=t.map(expressionHelpers.convertToArgExpression)};Call.prototype.args=function(e,t){for(var n={},a=[],o=0,r=this.argExprs.length,s;o<r;o++)if(s=this.argExprs[o],s.expr instanceof hashes&&canAssign_1_3_3_canAssign(n,s.expr.hashExprs),!("function"==typeof t)||!t(o)){var l=s.value.apply(s,arguments);a.push({call:!s.modifiers||!s.modifiers.compute,value:l})}return function(e){var t=[];0<canReflect_1_18_0_canReflect.size(n)&&(t.hashExprs=n);for(var o=0,r=a.length;o<r;o++)t[o]=e?a[o].value:a[o].call?canReflect_1_18_0_canReflect.getValue(a[o].value):expressionHelpers.toCompute(a[o].value);return t}},Call.prototype.value=function(e,t){var n=this,a=this.methodExpr.value(e,{proxyMethods:!1});canObservation_4_2_0_canObservation.temporarilyBind(a);var o=canReflect_1_18_0_canReflect.getValue(a),r=n.args(e,o&&o.ignoreArgLookup),i=function(n){var o=canReflect_1_18_0_canReflect.getValue(a);if("function"==typeof o){canReflect_1_18_0_canReflect.isObservableLike(o)&&(o=canReflect_1_18_0_canReflect.getValue(o));var i=r(o.isLiveBound);return o.requiresOptionsArgument&&(i.hashExprs&&t&&t.exprData&&(t.exprData.hashExprs=i.hashExprs),void 0!==t&&i.push(t)),!0!==o[isViewSymbol$1]||i[0]instanceof canViewScope_4_13_6_canViewScope||(i[0]=e.getTemplateContext().add(i[0])),arguments.length&&i.unshift(new setIdentifier(n)),o.apply(a.thisArg||e.peek("this"),i)}};if(t&&t.doNotWrapInObservation)return i();var s=new setter(i,i);return s},Call.prototype.closingTag=function(){return this.methodExpr.key};var call$1=Call,Helper=function(e,t,n){this.methodExpr=e,this.argExprs=t,this.hashExprs=n,this.mode=null};Helper.prototype.args=function(){for(var e=[],t=0,n=this.argExprs.length,a;t<n;t++)a=this.argExprs[t],e.push(expressionHelpers.toComputeOrValue(a.value.apply(a,arguments)));return e},Helper.prototype.hash=function(){var e={};for(var t in this.hashExprs){var n=this.hashExprs[t];e[t]=expressionHelpers.toComputeOrValue(n.value.apply(n,arguments))}return e},Helper.prototype.value=function(e,t){var n=this.methodExpr instanceof literal?""+this.methodExpr._value:this.methodExpr.key,a=this,o=e.computeData(n,{proxyMethods:!1}),r=o&&o.initialValue,i=o&&o.thisArg;return"function"==typeof r&&(o=function(){var n=a.args(e),o=canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},t),{hash:a.hash(e),exprData:a});return n.push(o),r.apply(i||e.peek("this"),n)}),o},Helper.prototype.closingTag=function(){return this.methodExpr.key};var helper=Helper,sourceTextSymbol$1=canSymbol_1_6_5_canSymbol.for("can-stache.sourceText"),Lookup=function(e,t,n){this.key=e,this.rootExpr=t,canReflect_1_18_0_canReflect.setKeyValue(this,sourceTextSymbol$1,n)};Lookup.prototype.value=function(e,t){return this.rootExpr?expressionHelpers.getObservableValue_fromDynamicKey_fromObservable(this.key,this.rootExpr.value(e),e,{},{}):e.computeData(this.key,canAssign_1_3_3_canAssign({warnOnMissingKey:!0},t))};var lookup=Lookup,last$1=utils.last,sourceTextSymbol$2=canSymbol_1_6_5_canSymbol.for("can-stache.sourceText"),Hash=function(){},keyRegExp=/[\w\.\\\-_@\/\&%]+/,tokensRegExp=/('.*?'|".*?"|=|[\w\.\\\-_@\/*%\$]+|[\(\)]|,|\~|\[|\]\s*|\s*(?=\[))/g,bracketSpaceRegExp=/\]\s+/,literalRegExp=/^('.*?'|".*?"|-?[0-9]+\.?[0-9]*|true|false|null|undefined)$/,isTokenKey=function(e){return keyRegExp.test(e)},testDot=/^[\.@]\w/,isAddingToExpression=function(e){return isTokenKey(e)&&testDot.test(e)},ensureChildren=function(e){return e.children||(e.children=[]),e},Stack=function(){this.root={children:[],type:"Root"},this.current=this.root,this.stack=[this.root]};canAssign_1_3_3_canAssign(Stack.prototype,{top:function(){return last$1(this.stack)},isRootTop:function(){return this.top()===this.root},popTo:function(e){this.popUntil(e),this.pop()},pop:function(){this.isRootTop()||this.stack.pop()},first:function(e){for(var t=this.stack.length-1;0<t&&-1===e.indexOf(this.stack[t].type);)t--;return this.stack[t]},firstParent:function(e){for(var t=this.stack.length-2;0<t&&-1===e.indexOf(this.stack[t].type);)t--;return this.stack[t]},popUntil:function(e){for(;-1===e.indexOf(this.top().type)&&!this.isRootTop();)this.stack.pop();return this.top()},addTo:function(e,t){var n=this.popUntil(e);ensureChildren(n).children.push(t)},addToAndPush:function(e,t){this.addTo(e,t),this.stack.push(t)},push:function(e){this.stack.push(e)},topLastChild:function(){return last$1(this.top().children)},replaceTopLastChild:function(e){var t=ensureChildren(this.top()).children;return t.pop(),t.push(e),e},replaceTopLastChildAndPush:function(e){this.replaceTopLastChild(e),this.stack.push(e)},replaceTopAndPush:function(e){var t;return this.top()===this.root?t=ensureChildren(this.top()).children:(this.stack.pop(),t=ensureChildren(this.top()).children),t.pop(),t.push(e),this.stack.push(e),e}});var convertKeyToLookup=function(e){var t=e.lastIndexOf("./"),n=e.lastIndexOf(".");if(n>t)return e.substr(0,n)+"@"+e.substr(n+1);var a=-1===t?0:t+2,o=e.charAt(a);return"."===o||"@"===o?e.substr(0,a)+"@"+e.substr(a+1):e.substr(0,a)+"@"+e.substr(a)},convertToAtLookup=function(e){return"Lookup"===e.type&&(canReflect_1_18_0_canReflect.setKeyValue(e,sourceTextSymbol$2,e.key),e.key=convertKeyToLookup(e.key)),e},convertToHelperIfTopIsLookup=function(e){var t=e.top();if(t&&"Lookup"===t.type){var n=e.stack[e.stack.length-2];"Helper"!==n.type&&n&&e.replaceTopAndPush({type:"Helper",method:t})}},expression={toComputeOrValue:expressionHelpers.toComputeOrValue,convertKeyToLookup:convertKeyToLookup,Literal:literal,Lookup:lookup,Arg:arg,Hash:Hash,Hashes:hashes,Call:call$1,Helper:helper,Bracket:bracket,SetIdentifier:setIdentifier,tokenize:function(e){var t=[];return(e.trim()+" ").replace(tokensRegExp,function(e,n){bracketSpaceRegExp.test(n)?(t.push(n[0]),t.push(n.slice(1))):t.push(n)}),t},lookupRules:{default:function(e){return"Helper"===e.type?helper:lookup},method:function(){return lookup}},methodRules:{default:function(e){return"Call"===e.type?call$1:helper},call:function(){return call$1}},parse:function(e,t){t=t||{};var n=this.ast(e);t.lookupRule||(t.lookupRule="default"),"string"==typeof t.lookupRule&&(t.lookupRule=expression.lookupRules[t.lookupRule]),t.methodRule||(t.methodRule="default"),"string"==typeof t.methodRule&&(t.methodRule=expression.methodRules[t.methodRule]);var a=this.hydrateAst(n,t,t.baseMethodType||"Helper");return a},hydrateAst:function(e,t,n,a){var o;if("Lookup"===e.type){var r=t.lookupRule(e,n,a),s=new r(e.key,e.root&&this.hydrateAst(e.root,t,n),e[sourceTextSymbol$2]);return s}if("Literal"===e.type)return new literal(e.value);if("Arg"===e.type)return new arg(this.hydrateAst(e.children[0],t,n,a),{compute:!0});if("Hash"===e.type)throw new Error("");else{if("Hashes"===e.type)return o={},e.children.forEach(function(e){o[e.prop]=this.hydrateAst(e.children[0],t,n,!0)},this),new hashes(o);if("Call"===e.type||"Helper"===e.type){o={};var l=[],d=e.children,p=t.methodRule(e);if(d)for(var c=0,u;c<d.length;c++)u=d[c],"Hashes"===u.type&&"Helper"===e.type&&p!==call$1?u.children.forEach(function(n){o[n.prop]=this.hydrateAst(n.children[0],t,e.type,!0)},this):l.push(this.hydrateAst(u,t,e.type,!0));return new p(this.hydrateAst(e.method,t,e.type),l,o)}if("Bracket"===e.type){var y;return new bracket(this.hydrateAst(e.children[0],t),e.root?this.hydrateAst(e.root,t):void 0,y)}}},ast:function(e){var t=this.tokenize(e);return this.parseAst(t,{index:0})},parseAst:function(e,t){for(var n=new Stack,a,o,r;t.index<e.length;){var i=e[t.index],s=e[t.index+1];if(t.index++,"="===s){a=n.top(),a&&"Lookup"===a.type&&(o=n.firstParent(["Call","Helper","Hash"]),("Call"===o.type||"Root"===o.type)&&(n.popUntil(["Call"]),a=n.top(),n.replaceTopAndPush({type:"Helper",method:"Root"===a.type?last$1(a.children):a}))),o=n.first(["Call","Helper","Hashes","Root"]);var l={type:"Hash",prop:i};"Hashes"===o.type?n.addToAndPush(["Hashes"],l):(n.addToAndPush(["Helper","Call","Root"],{type:"Hashes",children:[l]}),n.push(l)),t.index++}else if(literalRegExp.test(i))convertToHelperIfTopIsLookup(n),o=n.first(["Helper","Call","Hash","Bracket"]),"Hash"===o.type&&o.children&&0<o.children.length?n.addTo(["Helper","Call","Bracket"],{type:"Literal",value:utils.jsonParse(i)}):"Bracket"===o.type&&o.children&&0<o.children.length?n.addTo(["Helper","Call","Hash"],{type:"Literal",value:utils.jsonParse(i)}):n.addTo(["Helper","Call","Hash","Bracket"],{type:"Literal",value:utils.jsonParse(i)});else if(keyRegExp.test(i))r=n.topLastChild(),o=n.first(["Helper","Call","Hash","Bracket"]),r&&("Call"===r.type||"Bracket"===r.type)&&isAddingToExpression(i)?n.replaceTopLastChildAndPush({type:"Lookup",root:r,key:i.slice(1)}):"Bracket"===o.type?o.children&&0<o.children.length?"Helper"===n.first(["Helper","Call","Hash","Arg"]).type&&"."!==i[0]?n.addToAndPush(["Helper"],{type:"Lookup",key:i}):n.replaceTopAndPush({type:"Lookup",key:i.slice(1),root:o}):n.addToAndPush(["Bracket"],{type:"Lookup",key:i}):(convertToHelperIfTopIsLookup(n),n.addToAndPush(["Helper","Call","Hash","Arg","Bracket"],{type:"Lookup",key:i}));else if("~"===i)convertToHelperIfTopIsLookup(n),n.addToAndPush(["Helper","Call","Hash"],{type:"Arg",key:i});else if("("===i){if(a=n.top(),r=n.topLastChild(),"Lookup"===a.type)n.replaceTopAndPush({type:"Call",method:convertToAtLookup(a)});else if(r&&"Call"===r.type)n.replaceTopAndPush({type:"Call",method:r});else throw new Error("Unable to understand expression "+e.join(""));}else if(")"===i)n.popTo(["Call"]);else if(","===i){var d=n.first(["Call"]);"Call"===d.type?n.popUntil(["Call"]):n.popUntil(["Hash"])}else if("["!==i)"]"===i?n.pop():" "===i&&n.push(i);else if(a=n.top(),r=n.topLastChild(),r&&("Call"===r.type||"Bracket"===r.type))n.replaceTopLastChildAndPush({type:"Bracket",root:r});else if("Lookup"===a.type||"Bracket"===a.type){var p={type:"Bracket",root:a};n.replaceTopAndPush(p)}else"Call"===a.type?n.addToAndPush(["Call"],{type:"Bracket"}):" "===a?(n.popUntil(["Lookup","Call"]),convertToHelperIfTopIsLookup(n),n.addToAndPush(["Helper","Call","Hash"],{type:"Bracket"})):n.replaceTopAndPush({type:"Bracket"})}return n.root.children[0]}},expression_1=expression,expression$1=expression_1,toDOMSymbol$1=canSymbol_1_6_5_canSymbol.for("can.toDOM");function HelperOptions(e,t,n){this.metadata={rendered:!1},this.stringOnly=n,this.scope=e,this.exprData=t}canDefineLazyValue_1_1_1_defineLazyValue(HelperOptions.prototype,"context",function(){return this.scope.peek("this")});var mustacheLineBreakRegExp=/(?:(^|\r?\n)(\s*)(\{\{([\s\S]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([\s\S]*)\}\}\}?)/g,mustacheWhitespaceRegExp=/\s*\{\{--\}\}\s*|\s*(\{\{\{?)-|-(\}\}\}?)\s*/g,k=function(){},viewInsertSymbol$1=canSymbol_1_6_5_canSymbol.for("can.viewInsert");function valueShouldBeInsertedAsHTML(e){return null!==e&&"object"==typeof e&&("function"==typeof e[toDOMSymbol$1]||"function"==typeof e[viewInsertSymbol$1]||"number"==typeof e.nodeType)}var core={expression:expression$1,makeEvaluator:function(e,t,n,a,o,r){if("^"===t){var i=a;a=o,o=i}var s=new HelperOptions(e,n,r),l;if(utils.createRenderers(s,e,a,o,r),n instanceof expression$1.Call)l=n.value(e,s);else if(n instanceof expression$1.Bracket)l=n.value(e);else if(n instanceof expression$1.Lookup)l=n.value(e);else if(n instanceof expression$1.Literal)l=n.value.bind(n);else if(n instanceof expression$1.Helper&&n.methodExpr instanceof expression$1.Bracket)l=n.methodExpr.value(e,s);else if(l=n.value(e,s),"function"==typeof l)return l;return!t||s.metadata.rendered?l:"#"===t||"^"===t?function(){var t=canReflect_1_18_0_canReflect.getValue(l),n;if(s.metadata.rendered)n=t;else if("string"!=typeof t&&canReflect_1_18_0_canReflect.isListLike(t)){var a=canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isListLike(t);n=canReflect_1_18_0_canReflect.getKeyValue(t,"length")?r?utils.getItemsStringContent(t,a,s):canFragment_1_3_1_canFragment(utils.getItemsFragContent(t,s,e)):s.inverse(e)}else n=t?s.fn(t||e):s.inverse(e);return s.metadata.rendered=!1,n}:void 0},makeLiveBindingPartialRenderer:function(e){e=e.trim();var t=e.split(/\s+/).shift(),n;return t!==e&&(n=core.expression.parse(e)),function(e){var a=new canObservation_4_2_0_canObservation(function(){var a=t,o=e;if(n&&1===n.argExprs.length){var r=canReflect_1_18_0_canReflect.getValue(n.argExprs[0].value(e));"undefined"==typeof r||(o=e.add(r))}var i=canReflect_1_18_0_canReflect.getKeyValue(o.templateContext.partials,a),s;if(i)s=function(){return i.render?i.render(o):i(o)};else{var l=o.read(a,{isArgument:!0}).value;if(null===l||!l&&"*"===a[0])return canFragment_1_3_1_canFragment("");l&&(a=l),s=function(){if("function"==typeof a)return a(o,{});var e=core.getTemplateById(a);return e?e(o,{}):document$1().createDocumentFragment()}}var d=canObservationRecorder_1_3_1_canObservationRecorder.ignore(s)();return canFragment_1_3_1_canFragment(d)});canViewLive_5_0_3_canViewLive.html(this,a)}},makeStringBranchRenderer:function(e,t){var n=core.expression.parse(t),a=e+t,o=function(t,o,r){var i=t.__cache[a];(e||!i)&&(i=makeEvaluator(t,e,n,o,r,!0),!e&&(t.__cache[a]=i));var s=i[canSymbol_1_6_5_canSymbol.for("can.onValue")],l;return l=s?canReflect_1_18_0_canReflect.getValue(i):i(),null==l?"":11===l.nodeType?l.textContent:""+l};return o.exprData=n,o},makeLiveBindingBranchRenderer:function(e,t,n){var a=core.expression.parse(t),o=function(t,o,r){var i=n.tag,s=makeEvaluator(t,e,a,o,r,i),l=s[canSymbol_1_6_5_canSymbol.for("can.onValue")],d;d=l?s:new canObservation_4_2_0_canObservation(s,null,{isObservable:!1}),canReflect_1_18_0_canReflect.onValue(d,k);var p=canReflect_1_18_0_canReflect.getValue(d);if("function"==typeof p&&!(a instanceof expression$1.Lookup))canObservationRecorder_1_3_1_canObservationRecorder.ignore(p)(this);else if(canReflect_1_18_0_canReflect.valueHasDependencies(d))n.attr?canViewLive_5_0_3_canViewLive.attr(this,n.attr,d):n.tag?canViewLive_5_0_3_canViewLive.attrs(this,d):n.text&&!valueShouldBeInsertedAsHTML(p)?canViewLive_5_0_3_canViewLive.text(this,d):canViewLive_5_0_3_canViewLive.html(this,d);else if(n.attr)canDomMutate_2_0_8_canDomMutate.setAttribute(this,n.attr,p);else if(n.tag)canViewLive_5_0_3_canViewLive.attrs(this,p);else if(n.text&&!valueShouldBeInsertedAsHTML(p))this.nodeValue=helpers$1.makeString(p);else if(null!=p)if("function"==typeof p[viewInsertSymbol$1]){var c=p[viewInsertSymbol$1]({});this.parentNode.replaceChild(c,this)}else this.parentNode.replaceChild(canFragment_1_3_1_canFragment(p,this.ownerDocument),this);canReflect_1_18_0_canReflect.offValue(d,k)};return o.exprData=a,o},splitModeFromExpression:function(e,t){e=e.trim();var n=e.charAt(0);return 0<="#/{&^>!<".indexOf(n)?e=e.substr(1).trim():n=null,"{"===n&&t.node&&(n=null),{mode:n,expression:e}},cleanLineEndings:function(e){return e.replace(mustacheLineBreakRegExp,function(e,t,n,a,o,r,i,s,l,d){r=r||"",t=t||"",n=n||"";var p=splitModeFromExpression(o||l,{});return s||0<=">{".indexOf(p.mode)?e:0<="^#!/".indexOf(p.mode)?(n=t+n&&" ",n+a+(0!==d&&i.length?t+"\n":"")):n+a+r+(n.length||0!==d?t+"\n":"")})},cleanWhitespaceControl:function(e){return e.replace(mustacheWhitespaceRegExp,"$1$2")},getTemplateById:function(){}},makeEvaluator=core.makeEvaluator,splitModeFromExpression=core.splitModeFromExpression,mustache_core=core;canGlobals_1_2_2_canGlobalsInstance.define("base-url",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global"),t=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("document");if(t&&"baseURI"in t)return t.baseURI;if(e.location){var n=e.location.href,a=n.lastIndexOf("/");return-1===a?n:n.substr(0,a)}return"undefined"==typeof process?void 0:process.cwd()});var baseUrl=canGlobals_1_2_2_canGlobalsInstance.makeExport("base-url"),canParseUri_1_2_2_canParseUri=canNamespace_1_0_0_canNamespace.parseURI=function(e){var t=(e+"").replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null},canJoinUris_1_2_0_canJoinUris=canNamespace_1_0_0_canNamespace.joinURIs=function(e,t){return t=canParseUri_1_2_2_canParseUri(t||""),e=canParseUri_1_2_2_canParseUri(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+function(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null};function noop$1(){}var resolveValue=noop$1,evaluateArgs=noop$1,__testing={};function debuggerHelper(){canLog_1_0_2_canLog.warn("Forgotten {{debugger}} helper")}debuggerHelper.requiresOptionsArgument=!0;var Debugger={helper:debuggerHelper,evaluateArgs:evaluateArgs,resolveValue:resolveValue,__testing:__testing},truthyObservable=function(e){return new canObservation_4_2_0_canObservation(function(){var t=canReflect_1_18_0_canReflect.getValue(e);return!!t})};function makeConverter(e){return e=e||{},function(t,n){var a=canReflect_1_18_0_canReflect.toArray(arguments);return t instanceof setIdentifier?"function"==typeof e.set?e.set.apply(this,[t.value].concat(a.slice(1))):n(t.value):"function"==typeof e.get?e.get.apply(this,a):a[0]}}var converter=makeConverter,bindAndRead=function(e){return e&&canReflect_1_18_0_canReflect.isValueLike(e)?(canObservation_4_2_0_canObservation.temporarilyBind(e),canReflect_1_18_0_canReflect.getValue(e)):e};function forOfInteger(e,t,n){for(var a=[],o=0,r;o<e;o++)r={},void 0!==t&&(r[t]=o),a.push(n.fn(n.scope.add({index:o},{special:!0}).addLetContext(r)));return n.stringOnly?a.join(""):a}function forOfObject(e,t,n){var a=[];return canReflect_1_18_0_canReflect.each(e,function(o,r){var i=new keyObservable(e,r.replace(/\./g,"\\.")),s={};void 0!==t&&(s[t]=i),a.push(n.fn(n.scope.add({key:r},{special:!0}).addLetContext(s)))}),n.stringOnly?a.join(""):a}var forHelper=function(e){if(1!==e.exprData.argExprs.length)throw new Error("for(of) broken syntax");var t=e.exprData.argExprs[0].expr,n,a,o;if(t instanceof expression_1.Lookup)o=t.value(e.scope);else if(t instanceof expression_1.Helper){var r=t.argExprs[0];if("of"!==r.key)throw new Error("for(of) broken syntax");n=t.methodExpr.key,a=t.argExprs[1],o=a.value(e.scope)}var i=o,s=[].slice.call(arguments),l=s.pop(),d=bindAndRead(i);if(d&&d===Math.floor(d))return forOfInteger(d,n,e);if(d&&!canReflect_1_18_0_canReflect.isListLike(d))return forOfObject(d,n,e);if(l.stringOnly){var p=[];return canReflect_1_18_0_canReflect.eachIndex(d,function(t,a){var o={};void 0!==n&&(o[n]=t),p.push(e.fn(l.scope.add({index:a},{special:!0}).addLetContext(o)))}),p.join("")}return l.metadata.rendered=!0,function(e){var t=function(e,t){var a={};return void 0!==n&&(a[n]=e),l.fn(l.scope.add({index:t},{special:!0}).addLetContext(a),l.options)};canViewLive_5_0_3_canViewLive.list(e,i,t,l.context,function(){return l.inverse(l.scope,l.options)})}};forHelper.isLiveBound=!0,forHelper.requiresOptionsArgument=!0,forHelper.ignoreArgLookup=function(e){return 0===e};var ForOf=forHelper;function isVariable(e){return!0===e._meta.variable}var letHelper=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e){if(e.isSection)return e.fn(e.scope.addLetContext(e.hash));var t=e.scope.getScope(isVariable);if(!t)throw new Error("There is no variable scope!");return canReflect_1_18_0_canReflect.assignMap(t._context,e.hash),document.createTextNode("")}),Let=letHelper,keepNodeSymbol=canSymbol_1_6_5_canSymbol.for("done.keepNode");function portalHelper(e,t){function n(){for(var e=t.fn(t.scope.addLetContext({}),t.options),n=e.firstChild;n;)n[keepNodeSymbol]=!0,n=n.nextSibling;return e}function a(){if(s&&(canReflect_1_18_0_canReflect.offValue(e,r),s=null),l&&d){var t=l.parentNode;t&&(helpers$1.range.remove({start:l,end:d}),canDomMutate_2_0_8_node.removeChild.call(t,l),canDomMutate_2_0_8_node.removeChild.call(t,d),l=d=null)}}function o(){p&&p(),a()}function r(){if(a(),canReflect_1_18_0_canReflect.onValue(e,r),s=canReflect_1_18_0_canReflect.getValue(e),s){l=s.ownerDocument.createComment(i+" contents"),d=s.ownerDocument.createComment("can-end-placeholder"),l[keepNodeSymbol]=!0,d[keepNodeSymbol]=!0,s.appendChild(l),s.appendChild(d);var o=new canObservation_4_2_0_canObservation(n,null,{isObservable:!1});canViewLive_5_0_3_canViewLive.html(l,o)}else t.metadata.rendered=!0}var i="portal("+canReflect_1_18_0_canReflect.getName(e)+")",s,l,d,p;return r(),function(e){var t=e.ownerDocument.createComment(i);return e.parentNode.replaceChild(t,e),p=canDomMutate_2_0_8_canDomMutate.onNodeRemoved(t,o),t}}portalHelper.isLiveBound=!0,portalHelper.requiresOptionsArgument=!0;var Portal=portalHelper,debuggerHelper$1=Debugger.helper,builtInHelpers={},builtInConverters={},converterPackages=new WeakMap,helpersCore={looksLikeOptions:function(e){return e&&"function"==typeof e.fn&&"function"==typeof e.inverse},resolve:function(e){return e&&canReflect_1_18_0_canReflect.isValueLike(e)?canReflect_1_18_0_canReflect.getValue(e):e},resolveHash:function(e){var t={};for(var n in e)t[n]=helpersCore.resolve(e[n]);return t},bindAndRead:function(e){return e&&canReflect_1_18_0_canReflect.isValueLike(e)?(canObservation_4_2_0_canObservation.temporarilyBind(e),canReflect_1_18_0_canReflect.getValue(e)):e},registerHelper:function(e,t){t.requiresOptionsArgument=!0,canStacheHelpers_1_2_0_canStacheHelpers[e]=t},registerHelpers:function(e){var t,n;for(t in e)n=e[t],helpersCore.registerHelper(t,helpersCore.makeSimpleHelper(n))},registerConverter:function(e,t){helpersCore.registerHelper(e,converter(t))},makeSimpleHelper:function(e){return function(){var t=[];return canReflect_1_18_0_canReflect.eachIndex(arguments,function(e){t.push(helpersCore.resolve(e))}),e.apply(this,t)}},addHelper:function(e,t){return"object"==typeof e?helpersCore.registerHelpers(e):helpersCore.registerHelper(e,helpersCore.makeSimpleHelper(t))},addConverter:function(e,t){if("object"==typeof e)return void(converterPackages.has(e)||(converterPackages.set(e,!0),canReflect_1_18_0_canReflect.eachKey(e,function(e,t){helpersCore.addConverter(t,e)})));var n=converter(t);n.isLiveBound=!0,helpersCore.registerHelper(e,n)},addLiveHelper:function(e,t){return t.isLiveBound=!0,helpersCore.registerHelper(e,t)},getHelper:function(e,t){var n=t&&t.getHelper(e);return n||(n=canStacheHelpers_1_2_0_canStacheHelpers[e]),n},__resetHelpers:function(){for(var e in canStacheHelpers_1_2_0_canStacheHelpers)delete canStacheHelpers_1_2_0_canStacheHelpers[e];converterPackages.delete(builtInConverters),helpersCore.addBuiltInHelpers(),helpersCore.addBuiltInConverters()},addBuiltInHelpers:function(){canReflect_1_18_0_canReflect.each(builtInHelpers,function(e,t){canStacheHelpers_1_2_0_canStacheHelpers[t]=e})},addBuiltInConverters:function(){helpersCore.addConverter(builtInConverters)},_makeLogicHelper:function(e,t){var n=canAssign_1_3_3_canAssign(function(){function e(){return a?!!t(n):t(n)}var n=Array.prototype.slice.call(arguments,0),a;helpersCore.looksLikeOptions(n[n.length-1])&&(a=n.pop());var o=new canObservation_4_2_0_canObservation(e);return a?o.get()?a.fn():a.inverse():o.get()},{requiresOptionsArgument:!0,isLiveBound:!0});return n}},ifHelper=canAssign_1_3_3_canAssign(function(e,t){var n;return n=e&&canReflect_1_18_0_canReflect.isValueLike(e)?canReflect_1_18_0_canReflect.getValue(new truthyObservable(e)):!!helpersCore.resolve(e),t?n?t.fn(t.scope||this):t.inverse(t.scope||this):!!n},{requiresOptionsArgument:!0,isLiveBound:!0}),isHelper=helpersCore._makeLogicHelper("eq",function(e){for(var t=0,n,a;t<e.length;t++){if(n=helpersCore.resolve(e[t]),n="function"==typeof n?n():n,0<t&&n!==a)return!1;a=n}return!0}),andHelper=helpersCore._makeLogicHelper("and",function(e){if(0===e.length)return!1;for(var t=0,n=e.length,a;t<n;t++)if(a=helpersCore.resolve(e[t]),!a)return a;return a}),orHelper=helpersCore._makeLogicHelper("or",function(e){if(0===e.length)return!1;for(var t=0,n=e.length,a;t<n;t++)if(a=helpersCore.resolve(e[t]),a)return a;return a}),switchHelper=function(e,t){helpersCore.resolve(e);var n=!1,a=function(t,a){if(!n&&helpersCore.resolve(e)===helpersCore.resolve(t))return n=!0,a.fn(a.scope)};a.requiresOptionsArgument=!0;var o=function(e){if(!n)return!e||e.scope.peek("this")};o.requiresOptionsArgument=!0,canReflect_1_18_0_canReflect.assignSymbols(o,{"can.isValueLike":!0,"can.isFunctionLike":!1,"can.getValue":function(){return this(t)}});var r=t.scope.add({case:a,default:o},{notContext:!0});return t.fn(r,t)};switchHelper.requiresOptionsArgument=!0;var domDataHelper=function(e,t){var n=(helpersCore.looksLikeOptions(t)?t.context:t)||this;return function(t){canDomData_1_0_3_canDomData.set(t,e,n)}},joinBaseHelper=function(){var e=[].slice.call(arguments),t=e.pop(),n=e.map(function(e){var t=helpersCore.resolve(e);return"function"==typeof t?t():t}).join(""),a=canReflect_1_18_0_canReflect.getKeyValue(t.scope.templateContext.helpers,"module"),o=a?a.uri:void 0,r="."===n[0];if(r&&o)return canJoinUris_1_2_0_canJoinUris(o,n);var i="undefined"!=typeof System&&(System.renderingBaseURL||System.baseURL)||baseUrl();return"/"!==n[0]&&"/"!==i[i.length-1]&&(i+="/"),canJoinUris_1_2_0_canJoinUris(i,n)};joinBaseHelper.requiresOptionsArgument=!0;var eachHelper=function(e){var t=[].slice.call(arguments),n=t.pop(),a=n.exprData.hashExprs,o=helpersCore.bindAndRead(e),r,i;if(0<canReflect_1_18_0_canReflect.size(a)&&(r={},canReflect_1_18_0_canReflect.eachKey(a,function(e,t){r[e.key]=t})),(canReflect_1_18_0_canReflect.isObservableLike(o)&&canReflect_1_18_0_canReflect.isListLike(o)||canReflect_1_18_0_canReflect.isListLike(o)&&canReflect_1_18_0_canReflect.isValueLike(e))&&!n.stringOnly)return n.metadata.rendered=!0,function(t){var a=function(e,t){var a={};return 0<canReflect_1_18_0_canReflect.size(r)&&(r.value&&(a[r.value]=e),r.index&&(a[r.index]=t)),n.fn(n.scope.add(a,{notContext:!0}).add({index:t},{special:!0}).add(e),n.options)};canViewLive_5_0_3_canViewLive.list(t,e,a,n.context,function(e){return n.inverse(n.scope.add(e),n.options)})};var s=helpersCore.resolve(e),l;return!!s&&canReflect_1_18_0_canReflect.isListLike(s)?(l=utils.getItemsFragContent(s,n,n.scope),n.stringOnly?l.join(""):l):canReflect_1_18_0_canReflect.isObservableLike(s)&&canReflect_1_18_0_canReflect.isMapLike(s)||s instanceof Object?(l=[],canReflect_1_18_0_canReflect.each(s,function(e,t){var a=new keyObservable(s,t);i={},0<canReflect_1_18_0_canReflect.size(r)&&(r.value&&(i[r.value]=a),r.key&&(i[r.key]=t)),l.push(n.fn(n.scope.add(i,{notContext:!0}).add({key:t},{special:!0}).add(a)))}),n.stringOnly?l.join(""):l):void 0};eachHelper.isLiveBound=!0,eachHelper.requiresOptionsArgument=!0,eachHelper.ignoreArgLookup=function(e){return 1===e};var indexHelper=canAssign_1_3_3_canAssign(function(e,t){t||(t=e,e=0);var n=t.scope.peek("scope.index");return""+(("function"==typeof n?n():n)+e)},{requiresOptionsArgument:!0}),withHelper=function(e,t){var n=e;return t?(e=helpersCore.resolve(e),t.hash&&0<canReflect_1_18_0_canReflect.size(t.hash)&&(n=t.scope.add(t.hash,{notContext:!0}).add(n))):(t=e,e=!0,n=t.hash),t.fn(n||{})};withHelper.requiresOptionsArgument=!0;var dataHelper=function(e,t){var n=(helpersCore.looksLikeOptions(t)?t.context:t)||this;return function(t){canDomData_1_0_3_canDomData.set(t,e,n)}},unlessHelper=function(e,t){return t?ifHelper.apply(this,[e,canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},t),{fn:t.inverse,inverse:t.fn})]):!ifHelper.apply(this,[e])};unlessHelper.requiresOptionsArgument=!0,unlessHelper.isLiveBound=!0;var notConverter={get:function(e,t){return helpersCore.looksLikeOptions(t)?canReflect_1_18_0_canReflect.getValue(e)?t.inverse():t.fn():!canReflect_1_18_0_canReflect.getValue(e)},set:function(e,t){canReflect_1_18_0_canReflect.setValue(t,!e)}};canAssign_1_3_3_canAssign(builtInHelpers,{debugger:debuggerHelper$1,each:eachHelper,eachOf:eachHelper,index:indexHelper,if:ifHelper,is:isHelper,eq:isHelper,unless:unlessHelper,with:withHelper,console:console,data:dataHelper,domData:domDataHelper,switch:switchHelper,joinBase:joinBaseHelper,and:andHelper,or:orHelper,let:Let,for:ForOf,portal:Portal}),canAssign_1_3_3_canAssign(builtInConverters,{not:notConverter}),helpersCore.addBuiltInHelpers(),helpersCore.addBuiltInConverters();var core$1=helpersCore,mustacheLineBreakRegExp$1=/(?:(^|\r?\n)(\s*)(\{\{([\s\S]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([\s\S]*)\}\}\}?)/g,mustacheWhitespaceRegExp$1=/(\s*)(\{\{\{?)(-?)([\s\S]*?)(-?)(\}\}\}?)(\s*)/g;function splitModeFromExpression$1(e,t){e=e.trim();var n=e.charAt(0);return 0<="#/{&^>!<".indexOf(n)?e=e.substr(1).trim():n=null,"{"===n&&t.node&&(n=null),{mode:n,expression:e}}function cleanLineEndings(e){return e.replace(mustacheLineBreakRegExp$1,function(e,t,n,a,o,r,i,s,l,d){r=r||"",t=t||"",n=n||"";var p=splitModeFromExpression$1(o||l,{});return s||0<=">{".indexOf(p.mode)?e:0<="^#!/".indexOf(p.mode)?(n=t+n&&" ",n+a+(0!==d&&i.length?t+"\n":"")):n+a+r+(n.length||0!==d?t+"\n":"")})}function whiteSpaceReplacement(e,t,n,a,o,r,i,s){return"-"===a&&(t=""),"-"===r&&(s=""),t+n+o+i+s}function cleanWhitespaceControl(e){return e.replace(mustacheWhitespaceRegExp$1,whiteSpaceReplacement)}var cleanLineEndings_1=cleanLineEndings,cleanWhitespaceControl_1=cleanWhitespaceControl,canStacheAst_1_1_0_controls={cleanLineEndings:cleanLineEndings_1,cleanWhitespaceControl:cleanWhitespaceControl_1},parse=function(e,t){function n(e){m&&(s[m]=h,m=""),y?r.push(h):o.push(h),i.push({specifier:h,loc:{line:e},attributes:l}),l=new Map}1===arguments.length&&(t=arguments[0],e=void 0);var a=t;a=canStacheAst_1_1_0_controls.cleanWhitespaceControl(a),a=canStacheAst_1_1_0_controls.cleanLineEndings(a);var o=[],r=[],i=[],s={},l=new Map,d=!1,p=!1,c=!1,u=!1,y=!1,m="",h="",g=null,f=canViewParser_4_1_3_canViewParser(a,{filename:e,start:function(e,t){"can-import"===e?(u=t,y=!1,d=!0):"can-dynamic-import"===e?(u=t,y=!0,d=!0):d&&(y=!0,d=!1)},attrStart:function(e){g=e,l.set(g,!0),"from"===e?p=!0:("as"==e||"export-as"==e)&&(c=!0)},attrEnd:function(e){"from"===e?p=!1:("as"==e||"export-as"==e)&&(c=!1)},attrValue:function(e){d&&l.set(g,e),p&&d?h=e:c&&d&&(m=e)},end:function(e,t,a){("can-import"===e||"can-dynamic-import"===e)&&u&&n(a)},close:function(e,t,a){("can-import"===e||"can-dynamic-import"===e)&&n(a)},chars:function(e){0<e.trim().length&&(y=!0)},special:function(){y=!0}},!0);return{intermediate:f,program:f,imports:o,dynamicImports:r,importDeclarations:i,ases:s,exports:s}},canStacheAst_1_1_0_canStacheAst={parse:parse},canImportModule_1_2_0_canImportModule=canNamespace_1_0_0_canNamespace.import=function(e,t){return new Promise(function(n,a){try{var o=global_1();"object"==typeof o.System&&isFunction$1(o.System["import"])?o.System["import"](e,{name:t}).then(n,a):o.define&&o.define.amd?o.require([e],function(e){n(e)}):o.require?n(o.require(e)):"undefined"==typeof stealRequire?n():steal.import(e,{name:t}).then(n,a)}catch(e){a(e)}})};function isFunction$1(e){return"function"==typeof e}var getIntermediateAndImports=canStacheAst_1_1_0_canStacheAst.parse,makeRendererConvertScopes=utils.makeRendererConvertScopes,last$2=utils.last;canViewCallbacks_5_0_0_canViewCallbacks.tag("content")||canViewCallbacks_5_0_0_canViewCallbacks.tag("content",function(e,t){return t.scope});var isViewSymbol$2=canSymbol_1_6_5_canSymbol.for("can.isView"),svgNamespace="http://www.w3.org/2000/svg",xmlnsAttrNamespaceURI$1="http://www.w3.org/2000/xmlns/",xlinkHrefAttrNamespaceURI$1="http://www.w3.org/1999/xlink",namespaces={svg:svgNamespace,g:svgNamespace,defs:svgNamespace,path:svgNamespace,filter:svgNamespace,feMorphology:svgNamespace,feGaussianBlur:svgNamespace,feOffset:svgNamespace,feComposite:svgNamespace,feColorMatrix:svgNamespace,use:svgNamespace},attrsNamespacesURI$1={xmlns:xmlnsAttrNamespaceURI$1,"xlink:href":xlinkHrefAttrNamespaceURI$1},textContentOnlyTag={style:!0,script:!0};function stache(e,t){1===arguments.length&&(t=arguments[0],e=void 0);var n={};"string"==typeof t&&(t=mustache_core.cleanWhitespaceControl(t),t=mustache_core.cleanLineEndings(t));var a=new html_section(e),o={node:null,attr:null,sectionElementStack:[],text:!1,namespaceStack:[],textContentOnly:null},r=function(e,t,a,r){if(">"===t)e.add(mustache_core.makeLiveBindingPartialRenderer(a,s({filename:e.filename,lineNo:r})));else if("/"===t){var i=e.last();"<"===i.startedWith?(n[a]=e.endSubSectionAndReturnRenderer(),e.removeCurrentNode(),e.removeCurrentNode()):e.endSection(),e instanceof html_section&&o.sectionElementStack.pop()}else if("else"===t)e.inverse();else{var l=e instanceof html_section?mustache_core.makeLiveBindingBranchRenderer:mustache_core.makeStringBranchRenderer;if("{"===t||"&"===t)e.add(l(null,a,s({filename:e.filename,lineNo:r})));else if("#"===t||"^"===t||"<"===t){var d=l(t,a,s({filename:e.filename,lineNo:r}));e.startSection(d,a),e.last().startedWith=t,e instanceof html_section&&o.sectionElementStack.push({type:"section"})}else e.add(l(null,a,s({text:!0,filename:e.filename,lineNo:r})))}},i=function(){var e=o.sectionElementStack[o.sectionElementStack.length-1];return!o.sectionElementStack.length||"section"===e.type||"custom"===e.type},s=function(e){var t={tag:o.node&&o.node.tag,attr:o.attr&&o.attr.name,directlyNested:i(),textContentOnly:!!o.textContentOnly};return e?canAssign_1_3_3_canAssign(t,e):t},l=function(e,t){e.attributes||(e.attributes=[]),e.attributes.unshift(t)};canViewParser_4_1_3_canViewParser(t,{filename:e,start:function(e,t){var n=namespaces[e];n&&!t&&o.namespaceStack.push(n),o.node={tag:e,children:[],namespace:n||last$2(o.namespaceStack)}},end:function(t,n){var r=canViewCallbacks_5_0_0_canViewCallbacks.tag(t),s=i();n?(a.add(o.node),r&&l(o.node,function(e){canViewCallbacks_5_0_0_canViewCallbacks.tagHandler(this,t,{scope:e,subtemplate:null,templateType:"stache",directlyNested:s})})):(a.push(o.node),o.sectionElementStack.push({type:r?"custom":null,tag:r?null:t,templates:{},directlyNested:s}),r?a.startSubSection():textContentOnlyTag[t]&&(o.textContentOnly=new text_section(e))),o.node=null},close:function(e){var t=namespaces[e];t&&o.namespaceStack.pop();var n=canViewCallbacks_5_0_0_canViewCallbacks.tag(e),r;n&&(r=a.endSubSectionAndReturnRenderer()),textContentOnlyTag[e]&&(a.last().add(o.textContentOnly.compile(s())),o.textContentOnly=null);var i=a.pop();if(n)if("can-template"===e){var d=o.sectionElementStack[o.sectionElementStack.length-2];r&&(d.templates[i.attrs.name]=makeRendererConvertScopes(r)),a.removeCurrentNode()}else{var p=o.sectionElementStack[o.sectionElementStack.length-1];l(i,function(t){canViewCallbacks_5_0_0_canViewCallbacks.tagHandler(this,e,{scope:t,subtemplate:r?makeRendererConvertScopes(r):r,templateType:"stache",templates:p.templates,directlyNested:p.directlyNested})})}o.sectionElementStack.pop()},attrStart:function(e){o.node.section?o.node.section.add(e+"=\""):o.attr={name:e,value:""}},attrEnd:function(e){var t=attrsNamespacesURI$1[e];if(o.node.section)o.node.section.add("\" ");else{o.node.attrs||(o.node.attrs={}),o.node.attrs[o.attr.name]=o.attr.section?o.attr.section.compile(s()):t?{value:o.attr.value,namespaceURI:attrsNamespacesURI$1[e]}:o.attr.value;var n=canViewCallbacks_5_0_0_canViewCallbacks.attr(e);n&&(!o.node.attributes&&(o.node.attributes=[]),o.node.attributes.push(function(t){n(this,{attributeName:e,scope:t})})),o.attr=null}},attrValue:function(e){var t=o.node.section||o.attr.section;t?t.add(e):o.attr.value+=e},chars:function(e){(o.textContentOnly||a).add(e)},special:function(t,n){var i=mustache_core.splitModeFromExpression(t,o),l=i.mode,d=i.expression;if("else"===d){var p;return p=o.attr&&o.attr.section?o.attr.section:o.node&&o.node.section?o.node.section:o.textContentOnly||a,void p.inverse()}if("!"!==l)if(o.node&&o.node.section)r(o.node.section,l,d,n),0===o.node.section.subSectionDepth()&&(o.node.attributes.push(o.node.section.compile(s())),delete o.node.section);else if(o.attr)o.attr.section||(o.attr.section=new text_section(e),o.attr.value&&o.attr.section.add(o.attr.value)),r(o.attr.section,l,d,n);else if(!o.node)r(o.textContentOnly||a,l,d,n);else if(o.node.attributes||(o.node.attributes=[]),!l)o.node.attributes.push(mustache_core.makeLiveBindingBranchRenderer(null,d,s({filename:a.filename,lineNo:n})));else if("#"===l||"^"===l)o.node.section||(o.node.section=new text_section(e)),r(o.node.section,l,d,n);else throw new Error(l+" is currently not supported within a tag.")},comment:function(e){a.add({comment:e})},done:function(){}});var d=a.compile(),p=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t){!t||t.helpers||t.partials||t.tags||(t={helpers:t}),canReflect_1_18_0_canReflect.eachKey(t&&t.helpers,function(e){e.requiresOptionsArgument=!0});var a=new canViewScope_4_13_6_templateContext(t);if(canReflect_1_18_0_canReflect.eachKey(n,function(e,t){canReflect_1_18_0_canReflect.setKeyValue(a.partials,t,e)}),canReflect_1_18_0_canReflect.setKeyValue(a,"view",p),!(e instanceof canViewScope_4_13_6_canViewScope))e=new canViewScope_4_13_6_canViewScope(a).add(e);else{var o=new canViewScope_4_13_6_canViewScope(a);o._parent=e._parent,e._parent=o}return d(e.addLetContext())});return p[isViewSymbol$2]=!0,p}canAssign_1_3_3_canAssign(stache,core$1),stache.safeString=function(e){return canReflect_1_18_0_canReflect.assignSymbols({},{"can.toDOM":function(){return e}})},stache.async=function(e){var t=getIntermediateAndImports(e),n=t.imports.map(function(e){return canImportModule_1_2_0_canImportModule(e)});return Promise.all(n).then(function(){return stache(t.intermediate)})};var templates={};stache.from=mustache_core.getTemplateById=function(e){if(!templates[e]){var t=document$1().getElementById(e);t&&(templates[e]=stache("#"+e,t.innerHTML))}return templates[e]},stache.registerPartial=function(e,t){templates[e]="string"==typeof t?stache(t):t},stache.addBindings=canViewCallbacks_5_0_0_canViewCallbacks.attrs;var canStache_5_1_1_canStache=canNamespace_1_0_0_canNamespace.stache=stache,getChangesSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord"),getValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getValue"),onValueSymbol$3=canSymbol_1_6_5_canSymbol.for("can.onValue"),onEmitSymbol=canSymbol_1_6_5_canSymbol.for("can.onEmit"),offEmitSymbol=canSymbol_1_6_5_canSymbol.for("can.offEmit"),setValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.setValue"),canElementSymbol$1=canSymbol_1_6_5_canSymbol.for("can.element");function defaultSetValue(e,t){canReflect_1_18_0_canReflect.setValue(t,e)}function onEmit(e,t,n){return e[onEmitSymbol](t,n)}function offEmit(e,t,n){return e[offEmitSymbol](t,n)}function turnOffListeningAndUpdate(e,t,n,a){var o;e[onValueSymbol$3]?o=canReflect_1_18_0_canReflect.offValue:e[onEmitSymbol]&&(o=offEmit),o&&o(e,n,a)}function turnOnListeningAndUpdate(e,t,n,a){var o;e[onValueSymbol$3]?o=canReflect_1_18_0_canReflect.onValue:e[onEmitSymbol]&&(o=onEmit),o&&o(e,n,a)}function Semaphore(e,t){this.value=0,this._binding=e,this._type=t}canAssign_1_3_3_canAssign(Semaphore.prototype,{decrement:function(){this.value-=1},increment:function(){this._incremented=!0,this.value+=1}});function Bind(e){this._options=e,void 0===e.queue&&(e.element?e.queue="dom":e.queue="domUI"),!1==0<e.cycles&&(e.cycles=0),e.onInitDoNotUpdateChild="boolean"==typeof e.onInitDoNotUpdateChild&&e.onInitDoNotUpdateChild,e.onInitDoNotUpdateParent="boolean"==typeof e.onInitDoNotUpdateParent&&e.onInitDoNotUpdateParent,e.onInitSetUndefinedParentIfChildIsDefined="boolean"!=typeof e.onInitSetUndefinedParentIfChildIsDefined||e.onInitSetUndefinedParentIfChildIsDefined;var t=new Semaphore(this,"child"),n=new Semaphore(this,"parent"),a=!0;"boolean"==typeof e.childToParent?a=e.childToParent:null==e.child[getValueSymbol$2]?a=!1:void 0===e.setParent&&null==e.parent[setValueSymbol$2]&&(a=!1);var o=!0;if("boolean"==typeof e.parentToChild?o=e.parentToChild:null==e.parent[getValueSymbol$2]?o=!1:void 0===e.setChild&&null==e.child[setValueSymbol$2]&&(o=!1),!1===a&&!1===o)throw new Error("Neither the child nor parent will be updated; this is a no-way binding");this._childToParent=a,this._parentToChild=o,void 0===e.setChild&&(e.setChild=defaultSetValue),void 0===e.setParent&&(e.setParent=defaultSetValue),void 0!==e.priority&&(canReflect_1_18_0_canReflect.setPriority(e.child,e.priority),canReflect_1_18_0_canReflect.setPriority(e.parent,e.priority));var r=2*e.cycles,i=r+("childSticksToParent"===e.sticky?1:0),s=r+("parentSticksToChild"===e.sticky?1:0);this._bindingState={child:!1,parent:!1},this._updateChild=function(a){updateValue.call(this,{bindingState:this._bindingState,newValue:a,debugObservableName:"child",debugPartnerName:"parent",observable:e.child,setValue:e.setChild,semaphore:t,allowedUpdates:i,sticky:"parentSticksToChild"===e.sticky,partner:e.parent,setPartner:e.setParent,partnerSemaphore:n})}.bind(this),this._updateParent=function(a){updateValue.call(this,{bindingState:this._bindingState,newValue:a,debugObservableName:"parent",debugPartnerName:"child",observable:e.parent,setValue:e.setParent,semaphore:n,allowedUpdates:s,sticky:"childSticksToParent"===e.sticky,partner:e.child,setPartner:e.setChild,partnerSemaphore:t})}.bind(this),e.element&&(this._updateChild[canElementSymbol$1]=this._updateParent[canElementSymbol$1]=e.element)}Object.defineProperty(Bind.prototype,"parentValue",{get:function(){return canReflect_1_18_0_canReflect.getValue(this._options.parent)}}),canAssign_1_3_3_canAssign(Bind.prototype,{start:function(){var e=this._options,t,n;this.startParent(),this.startChild(),!0===this._childToParent&&!0===this._parentToChild?(n=canReflect_1_18_0_canReflect.getValue(e.parent),n===void 0?(t=canReflect_1_18_0_canReflect.getValue(e.child),t===void 0?!1===e.onInitDoNotUpdateChild&&this._updateChild(n):!1===e.onInitDoNotUpdateParent&&!0===e.onInitSetUndefinedParentIfChildIsDefined&&this._updateParent(t)):!1===e.onInitDoNotUpdateChild&&this._updateChild(n)):!0===this._childToParent?!1===e.onInitDoNotUpdateParent&&(t=canReflect_1_18_0_canReflect.getValue(e.child),this._updateParent(t)):!0===this._parentToChild&&!1===e.onInitDoNotUpdateChild&&(n=canReflect_1_18_0_canReflect.getValue(e.parent),this._updateChild(n))},startChild:function(){if(!1===this._bindingState.child&&!0===this._childToParent){var e=this._options;this._bindingState.child=!0,turnOnListeningAndUpdate(e.child,e.parent,this._updateParent,e.queue)}},startParent:function(){if(!1===this._bindingState.parent&&!0===this._parentToChild){var e=this._options;this._bindingState.parent=!0,turnOnListeningAndUpdate(e.parent,e.child,this._updateChild,e.queue)}},stop:function(){var e=this._bindingState,t=this._options;!0===e.parent&&!0===this._parentToChild&&(e.parent=!1,turnOffListeningAndUpdate(t.parent,t.child,this._updateChild,t.queue)),!0===e.child&&!0===this._childToParent&&(e.child=!1,turnOffListeningAndUpdate(t.child,t.parent,this._updateParent,t.queue))}}),["parent","child"].forEach(function(e){Object.defineProperty(Bind.prototype,e,{get:function(){return this._options[e]}})});function updateValue(e){var t=e.bindingState;if(!1!==t.child||!1!==t.parent){var n=e.semaphore;if(!(n.value+e.partnerSemaphore.value<=e.allowedUpdates));else if(canQueues_1_3_1_canQueues.batch.start(),n.increment(e),e.setValue(e.newValue,e.observable),canQueues_1_3_1_canQueues.mutateQueue.enqueue(n.decrement,n,[]),canQueues_1_3_1_canQueues.batch.stop(),e.sticky){var a=canReflect_1_18_0_canReflect.getValue(e.observable);a!==canReflect_1_18_0_canReflect.getValue(e.partner)&&e.setPartner(a,e.partner)}}}var canBind_1_5_1_canBind=canNamespace_1_0_0_canNamespace.Bind=Bind,viewModelSymbol=canSymbol_1_6_5_canSymbol.for("can.viewModel"),canViewModel_4_0_3_canViewModel=canNamespace_1_0_0_canNamespace.viewModel=function(e,t,n){if("string"==typeof e?e=document$1().querySelector(e):canReflect_1_18_0_canReflect.isListLike(e)&&!e.nodeType&&(e=e[0]),canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t))return void(e[viewModelSymbol]=t);var a=e[viewModelSymbol];switch(a||(a=new canSimpleMap_4_3_3_canSimpleMap,e[viewModelSymbol]=a),arguments.length){case 0:case 1:return a;case 2:return canReflect_1_18_0_canReflect.getKeyValue(a,t);default:return canReflect_1_18_0_canReflect.setKeyValue(a,t,n),e;}},isDomEventTarget$2=util.isDomEventTarget,canEvent={on:function(e,t,n){isDomEventTarget$2(this)?canDomEvents_1_3_11_canDomEvents.addEventListener(this,e,t,n):canReflect_1_18_0_canReflect.onKeyValue(this,e,t,n)},off:function(e,t,n){isDomEventTarget$2(this)?canDomEvents_1_3_11_canDomEvents.removeEventListener(this,e,t,n):canReflect_1_18_0_canReflect.offKeyValue(this,e,t,n)},one:function e(t,n,a){var e=function(){return canEvent.off.call(this,t,e,a),n.apply(this,arguments)};return canEvent.on.call(this,t,e,a),this}},canAttributeObservable_2_0_2_event=canEvent,isRadioInput=function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},canAttributeObservable_2_0_2_getEventName=function(e,t){var n="change";return isRadioInput(e)&&"checked"===t&&(n="can-attribute-observable-radiochange"),canAttributeObservable_2_0_2_behaviors.findSpecialListener(t)&&(n=t),n};function getRoot(){return document$1().documentElement}function findParentForm(e){for(;e&&!("FORM"===e.nodeName);)e=e.parentNode;return e}function shouldReceiveEventFromRadio(e,t){var n=e.getAttribute("name");return n&&n===t.getAttribute("name")&&findParentForm(e)===findParentForm(t)}function isRadioInput$1(e){return"INPUT"===e.nodeName&&"radio"===e.type}function attachRootListener(e,t){var n=getRoot(),a=function(n){var a=n.target;if(isRadioInput$1(a))for(var o in t){var r={type:o},i=t[o];i.forEach(function(t){shouldReceiveEventFromRadio(a,t)&&e.dispatch(t,r,!1)})}};return e.addEventListener(n,"change",a),a}function detachRootListener(e,t){var n=getRoot();e.removeEventListener(n,"change",t)}var radioChangeEvent={defaultEventType:"radiochange",addEventListener:function(e,t,n){if(!isRadioInput$1(e))throw new Error("Listeners for "+t+" must be radio inputs");var a=radioChangeEvent._eventTypeTrackedRadios;a||(a=radioChangeEvent._eventTypeTrackedRadios={},!radioChangeEvent._rootListener&&(radioChangeEvent._rootListener=attachRootListener(this,a)));var o=radioChangeEvent._eventTypeTrackedRadios[t];o||(o=radioChangeEvent._eventTypeTrackedRadios[t]=new Set),o.add(e),e.addEventListener(t,n)},removeEventListener:function(e,t,n){e.removeEventListener(t,n);var a=radioChangeEvent._eventTypeTrackedRadios;if(a){var o=a[t];if(o&&(o.delete(e),0===o.size)){for(var r in delete a[t],a)if(a.hasOwnProperty(r))return;delete radioChangeEvent._eventTypeTrackedRadios,detachRootListener(this,radioChangeEvent._rootListener),delete radioChangeEvent._rootListener}}}},canEventDomRadiochange_2_2_1_canEventDomRadiochange=canNamespace_1_0_0_canNamespace.domEventRadioChange=radioChangeEvent,onValueSymbol$4=canSymbol_1_6_5_canSymbol.for("can.onValue"),offValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.offValue"),onEmitSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onEmit"),offEmitSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offEmit"),internalRadioChangeEventType="can-attribute-observable-radiochange";canDomEvents_1_3_11_canDomEvents.addEvent(canEventDomRadiochange_2_2_1_canEventDomRadiochange,internalRadioChangeEventType);var isSelect=function(e){return"select"===e.nodeName.toLowerCase()},isMultipleSelect=function(e,t){return isSelect(e)&&"value"===t&&e.multiple},slice$2=Array.prototype.slice;function canUtilAEL(){var e=slice$2.call(arguments,0);return e.unshift(this),canDomEvents_1_3_11_canDomEvents.addEventListener.apply(null,e)}function canUtilREL(){var e=slice$2.call(arguments,0);return e.unshift(this),canDomEvents_1_3_11_canDomEvents.removeEventListener.apply(null,e)}function AttributeObservable(e,t,n,a){"string"==typeof n&&(a=n,n=void 0),this.el=e,this.bound=!1,this.prop=isMultipleSelect(e,t)?"values":t,this.event=a||canAttributeObservable_2_0_2_getEventName(e,t),this.handler=this.handler.bind(this),a!==void 0&&(this[onValueSymbol$4]=null,this[offValueSymbol$2]=null,this[onEmitSymbol$1]=AttributeObservable.prototype.on,this[offEmitSymbol$1]=AttributeObservable.prototype.off)}AttributeObservable.prototype=Object.create(settable.prototype),canAssign_1_3_3_canAssign(AttributeObservable.prototype,{constructor:AttributeObservable,get:function(){canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&canObservation_4_2_0_canObservation.temporarilyBind(this));var e=canAttributeObservable_2_0_2_behaviors.get(this.el,this.prop);return"function"==typeof e&&(e=e.bind(this.el)),e},set:function(e){var t=canAttributeObservable_2_0_2_behaviors.setAttrOrProp(this.el,this.prop,e);return t||(this._value=e),e},handler:function(e,t){var n=this._value,a=[];this._value=canAttributeObservable_2_0_2_behaviors.get(this.el,this.prop),(t!==void 0||this._value!==n)&&(a=[this.handlers.getNode([]),this,[e,n]],canQueues_1_3_1_canQueues.enqueueByQueue.apply(canQueues_1_3_1_canQueues,a))},onBound:function(){var e=this;e.bound=!0,e._handler=function(t){e.handler(canAttributeObservable_2_0_2_behaviors.get(e.el,e.prop),t)},e.event===internalRadioChangeEventType&&canAttributeObservable_2_0_2_event.on.call(e.el,"change",e._handler);var t=canAttributeObservable_2_0_2_behaviors.findSpecialListener(e.prop);t&&(e._specialDisposal=t.call(e.el,e.prop,e._handler,canUtilAEL)),canAttributeObservable_2_0_2_event.on.call(e.el,e.event,e._handler),this._value=canAttributeObservable_2_0_2_behaviors.get(this.el,this.prop)},onUnbound:function(){var e=this;e.bound=!1,e.event===internalRadioChangeEventType&&canAttributeObservable_2_0_2_event.off.call(e.el,"change",e._handler),e._specialDisposal&&(e._specialDisposal.call(e.el,canUtilREL),e._specialDisposal=null),canAttributeObservable_2_0_2_event.off.call(e.el,e.event,e._handler)},valueHasDependencies:function(){return!0},getValueDependencies:function(){var e=new Map,t=new Set;return t.add(this.prop),e.set(this.el,t),{keyDependencies:e}}}),canReflect_1_18_0_canReflect.assignSymbols(AttributeObservable.prototype,{"can.isMapLike":!1,"can.getValue":AttributeObservable.prototype.get,"can.setValue":AttributeObservable.prototype.set,"can.onValue":AttributeObservable.prototype.on,"can.offValue":AttributeObservable.prototype.off,"can.valueHasDependencies":AttributeObservable.prototype.hasDependencies,"can.getValueDependencies":AttributeObservable.prototype.getValueDependencies});var canAttributeObservable_2_0_2_canAttributeObservable=AttributeObservable,bindings=new Map,onMatchStr="on:",vmMatchStr="vm:",elMatchStr="el:",byMatchStr=":by:",toMatchStr=":to",fromMatchStr=":from",bindMatchStr=":bind",viewModelBindingStr="viewModel",attributeBindingStr="attribute",scopeBindingStr="scope",viewModelOrAttributeBindingStr="viewModelOrAttribute",viewModelSymbol$1=canSymbol_1_6_5_canSymbol.for("can.viewModel"),preventDataBindingsSymbol=canSymbol_1_6_5_canSymbol.for("can.preventDataBindings"),throwOnlyOneTypeOfBindingError=function(){throw new Error("can-stache-bindings - you can not have contextual bindings ( this:from='value' ) and key bindings ( prop:from='value' ) on one element.")},checkBindingState=function(e,t){var n=t.parent.exports&&t.child.source===viewModelBindingStr;if(n){var a=t.child.name;if(n&&("this"===a||"."===a)){if(e.isSettingViewModel||e.isSettingOnViewModel)throwOnlyOneTypeOfBindingError();else return{isSettingViewModel:!0,initialViewModelData:void 0};}else if(e.isSettingViewModel)throwOnlyOneTypeOfBindingError();else return{isSettingOnViewModel:!0,initialViewModelData:e.initialViewModelData}}else return e},getEventBindingData=function(e,t,n){var a=e.substr(onMatchStr.length),o=t&&t[viewModelSymbol$1],r=startsWith.call(a,elMatchStr),i=startsWith.call(a,vmMatchStr),s=-1<a.indexOf(byMatchStr),l="",d,p,c,u;i?(l="vm",a=a.substr(vmMatchStr.length)):r?(l="el",a=a.substr(elMatchStr.length)):!i&&!r&&(s?d=!0:o?i=!0:r=!0);var y;if(s){var m=a.indexOf(byMatchStr);y=a.substr(m+byMatchStr.length),a=a.substr(0,m)}if(c=a,!r)i?(p=o,s&&(p=o.get(y),u=new canViewScope_4_13_6_canViewScope(o).computeData(y))):d&&(p=n,s&&(p=p.get(y),u=n.computeData(y)));else if(s)throw new Error("binding with :by in element scope is not currently supported");else p=t;return{bindingContext:p,bindingContextObservable:u,eventName:c,bindingCode:l}},onKeyValueSymbol$3=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),makeScopeFromEvent=function(e,t,n,a,o,r){var i=r&&r[onKeyValueSymbol$3]!==void 0,s={element:e,event:t,viewModel:n,arguments:i?Array.prototype.slice.call(a,1):a,args:a};return o.scope.add(s,{special:!0})},runEventCallback=function(e,t,n,a,o){canQueues_1_3_1_canQueues.batch.start();var r=[];r=[function(){var t=o.value(a,{doNotWrapInObservation:!0});return t=canReflect_1_18_0_canReflect.isValueLike(t)?canReflect_1_18_0_canReflect.getValue(t):t,"function"==typeof t?t(e):t},null,null,{}],canQueues_1_3_1_canQueues.mutateQueue.enqueue.apply(canQueues_1_3_1_canQueues.mutateQueue,r),canQueues_1_3_1_canQueues.batch.stop()},behaviors={initializeViewModel:function(e,t,n,a){var o=[],r={},s={isSettingOnViewModel:!1,isSettingViewModel:!1,initialViewModelData:t||{}};e.forEach(function(e){e.binding.startParent();var t=e.siblingBindingData;if(s=checkBindingState(s,t),t.parent.exports){var n=t.child.setCompute?canViewScope_4_13_6_makeComputeLike(e.binding.parent):e.binding.parentValue;void 0!==n&&(s.isSettingViewModel?s.initialViewModelData=n:s.initialViewModelData[cleanVMName(t.child.name,a.scope)]=n)}o.push(e.binding.start.bind(e.binding)),r[t.bindingAttributeName]=e.binding.stop.bind(e.binding)});for(var l=n(s.initialViewModelData,0<e.length,s),d=0,p=o.length;d<p;d++)o[d]();return{viewModel:l,onTeardowns:r,bindingsState:s}},viewModel:function(e,t,n,a,o){var r=canAssign_1_3_3_canAssign({},a),i=canAssign_1_3_3_canAssign({element:e,viewModel:void 0},t),s={attributeViewModelBindings:r,alreadyUpdatedChild:!0,favorViewModel:!0},l=[];if(canReflect_1_18_0_canReflect.eachListLike(e.attributes||[],function(e){var t=makeDataBinding(e,i,s);t&&l.push(t)}),!(o&&0===l.length)){var d=behaviors.initializeViewModel(l,a,function(){i.viewModel=n.apply(this,arguments)},i),p=d.onTeardowns,c=d.bindingsState,u={},y;return c.isSettingViewModel||(s.alreadyUpdatedChild=!1,y=canDomMutate_2_0_8_canDomMutate.onNodeAttributeChange(e,function(t){var n=t.attributeName,a=e.getAttribute(n);p[n]&&p[n]();var o=u[n]&&u[n].parent.source===attributeBindingStr;if(null!==a||o){var r=makeDataBinding({name:n,value:a},i,s);r&&(r.binding.start(),u[n]=r.siblingBindingData,p[n]=r.binding.stop.bind(r.binding))}})),function(){for(var e in y&&(y(),y=void 0),p)p[e]()}}},data:function(e,t){if(!(!0===e[preventDataBindingsSymbol]||canDomData_1_0_3_canDomData.get(e,"preventDataBindings"))){var n=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(){return i||(i=canViewModel_4_0_3_canViewModel(e))}),a={element:e,templateType:t.templateType,scope:t.scope,parentNodeList:t.nodeList,get viewModel(){return n()}},o=makeDataBinding({name:t.attributeName,value:e.getAttribute(t.attributeName)},a,{syncChildWithParent:!1}),r=!1,i,s,l,d;r||(o.binding.start(),r=!0);var p=function(n){var o=n.attributeName,r=e.getAttribute(o);if(o===t.attributeName&&(s&&s(),null!==r)){var i=makeDataBinding({name:o,value:r},a,{syncChildWithParent:!1});i&&(i.binding.start(),s=i.binding.stop.bind(i.binding)),s=i.onTeardown}},c=function(){s&&(s(),s=void 0),d&&(d(),d=void 0),l&&(l(),l=void 0)};s=o.binding.stop.bind(o.binding),l=canDomMutate_2_0_8_canDomMutate.onNodeAttributeChange(e,p),d=canDomMutate_2_0_8_canDomMutate.onNodeDisconnected(e,function(){var t=e.ownerDocument,n=t.contains?t:t.documentElement;n&&!1!==n.contains(e)||c()})}},event:function(e,t){function n(e,t){t&&map$1.off.call(t,r,l),e&&(map$1.on.call(e,r,l),y=e)}var a=canAttributeEncoder_1_1_4_canAttributeEncoder.decode(t.attributeName),o,r,i,s;if(-1!==a.indexOf(toMatchStr+":")||-1!==a.indexOf(fromMatchStr+":")||-1!==a.indexOf(bindMatchStr+":"))return this.data(e,t);if(startsWith.call(a,onMatchStr))o=getEventBindingData(a,e,t.scope),r=o.eventName,i=o.bindingContext,s=o.bindingContextObservable;else throw new Error("can-stache-bindings - unsupported event bindings "+a);var l=function(n){var o=e.getAttribute(canAttributeEncoder_1_1_4_canAttributeEncoder.encode(a));if(o){var r=e[viewModelSymbol$1],s=expression_1.parse(o,{lookupRule:function(){return expression_1.Lookup},methodRule:"call"}),l=makeScopeFromEvent(e,n,r,arguments,t,i);if(s instanceof expression_1.Hashes){var d=s.hashExprs,p=Object.keys(d)[0],c=s.hashExprs[p].value(l),u=canReflect_1_18_0_canReflect.isObservableLike(c)&&canReflect_1_18_0_canReflect.isValueLike(c);l.set(p,u?canReflect_1_18_0_canReflect.getValue(c):c)}else if(s instanceof expression_1.Call)runEventCallback(e,n,t,l,s,a,o);else throw new Error("can-stache-bindings: Event bindings must be a call expression. Make sure you have a () in "+t.attributeName+"="+JSON.stringify(o))}},d=function(){i&&map$1.off.call(i,r,l),p&&(p(),p=void 0),c&&(c(),c=void 0),u&&(u(),u=void 0)},p,c,u,y;if(p=canDomMutate_2_0_8_canDomMutate.onNodeAttributeChange(e,function(t){var n=t.attributeName===a,o=!e.getAttribute(a);n&&o&&d()}),c=canDomMutate_2_0_8_canDomMutate.onNodeDisconnected(e,function(){var t=e.ownerDocument,n=t.contains?t:t.documentElement;n&&n.contains(e)||d()}),!i&&s)u=function(){y&&map$1.off.call(y,r,l),canReflect_1_18_0_canReflect.offValue(s,n)},canReflect_1_18_0_canReflect.onValue(s,n);else try{map$1.on.call(i,r,l)}catch(e){if(/Unable to bind/.test(e.message)){var m="can-stache-bindings - Unable to bind \""+r+"\"";throw m+=": \""+r+"\" is a property on a plain object \"",m+=JSON.stringify(i),m+="\". Binding is available with observable objects only.",m+=" For more details check https://canjs.com/doc/can-stache-bindings.html#Callafunctionwhenaneventhappensonavalueinthescope_animation_",new Error(m)}else throw e}}};bindings.set(/[\w\.:]+:to$/,behaviors.data),bindings.set(/[\w\.:]+:from$/,behaviors.data),bindings.set(/[\w\.:]+:bind$/,behaviors.data),bindings.set(/[\w\.:]+:raw$/,behaviors.data),bindings.set(/[\w\.:]+:to:on:[\w\.:]+/,behaviors.data),bindings.set(/[\w\.:]+:from:on:[\w\.:]+/,behaviors.data),bindings.set(/[\w\.:]+:bind:on:[\w\.:]+/,behaviors.data),bindings.set(/on:[\w\.:]+/,behaviors.event);var getObservableFrom={viewModelOrAttribute:function(e,t){var n=t.element[viewModelSymbol$1];return n?this.viewModel.apply(this,arguments):this.attribute.apply(this,arguments)},scope:function(e,t){var n=t.scope,a=e.name,o=e.exports;if(!a)return new canSimpleObservable_2_5_0_canSimpleObservable;if(o||0<=a.indexOf("(")||0<=a.indexOf("=")){var r=expression_1.parse(a,{baseMethodType:"Call"});return r instanceof expression_1.Hashes?new canSimpleObservable_2_5_0_canSimpleObservable(function(){var e=r.hashExprs,t=Object.keys(e)[0],a=r.hashExprs[t].value(n),o=canReflect_1_18_0_canReflect.isObservableLike(a)&&canReflect_1_18_0_canReflect.isValueLike(a);n.set(t,o?canReflect_1_18_0_canReflect.getValue(a):a)}):r.value(n)}var i={};canReflect_1_18_0_canReflect.assignSymbols(i,{"can.getValue":function(){},"can.valueHasDependencies":function(){return!1},"can.setValue":function(e){var t=expression_1.parse(cleanVMName(a,n),{baseMethodType:"Call"}),o=t.value(n);canReflect_1_18_0_canReflect.setValue(o,e)},"can.getWhatIChange":function(){var e=n.getDataForScopeSet(cleanVMName(a,n)),t=new Map,o=new Set;return o.add(e.key),t.set(e.parent,o),{mutate:{keyDependencies:t}}},"can.getName":function(){}});var s=n.getDataForScopeSet(cleanVMName(a,n));return s.parent&&s.key&&canReflectDependencies_1_1_2_canReflectDependencies.addMutatedBy(s.parent,s.key,i),i},viewModel:function(e,t){var n=t.scope,a=e.name,o=e.setCompute,r=cleanVMName(a,n),i="."===a||"this"===a,s=i?[]:canStacheKey_1_4_3_canStacheKey.reads(a),l=new setter(function(){var e=t.viewModel;return canStacheKey_1_4_3_canStacheKey.read(e,s,{}).value},function(e){var n=t.viewModel;if(o){var a=canReflect_1_18_0_canReflect.getKeyValue(n,r);canReflect_1_18_0_canReflect.isObservableLike(a)?canReflect_1_18_0_canReflect.setValue(a,e):canReflect_1_18_0_canReflect.setKeyValue(n,r,new canSimpleObservable_2_5_0_canSimpleObservable(canReflect_1_18_0_canReflect.getValue(e)))}else i?canReflect_1_18_0_canReflect.setValue(n,e):canStacheKey_1_4_3_canStacheKey.write(n,s,e)});return l},attribute:function(e,t){return"this"===e.name?canReflect_1_18_0_canReflect.assignSymbols({},{"can.getValue":function(){return t.element},"can.valueHasDependencies":function(){return!1},"can.getName":function(){}}):new canAttributeObservable_2_0_2_canAttributeObservable(t.element,e.name,{},e.event)}},startsWith=String.prototype.startsWith||function(e){return 0===this.indexOf(e)};function getEventName(e){if(e.special.on!==void 0)return e.tokens[e.special.on+1]}var siblingBindingRules={to:{child:{exports:!0,syncSibling:!1},parent:{exports:!1,syncSibling:!1}},from:{child:{exports:!1,syncSibling:!1},parent:{exports:!0,syncSibling:!1}},bind:{child:{exports:!0,syncSibling:!1},parent:{exports:!0,syncSibling:!0}},raw:{child:{exports:!1,syncSibling:!1},parent:{exports:!0,syncSibling:!1}}},bindingNames=[],special$1={vm:!0,on:!0};canReflect_1_18_0_canReflect.eachKey(siblingBindingRules,function(e,t){bindingNames.push(t),special$1[t]=!0});function tokenize(e){var t=e.split(":"),n={tokens:[],special:{}};return t.forEach(function(e){special$1[e]?n.special[e]=n.tokens.push(e)-1:n.tokens.push(e)}),n}var getChildBindingStr=function(e,t){return 0<=e.indexOf("vm")?viewModelBindingStr:0<=e.indexOf("el")?attributeBindingStr:t?viewModelBindingStr:viewModelOrAttributeBindingStr};function getSiblingBindingData(e,t){var n=canAttributeEncoder_1_1_4_canAttributeEncoder.decode(e.name),a=e.value||"",o=tokenize(n),r,i,s;if(bindingNames.forEach(function(e){if(void 0!==o.special[e]&&0<o.special[e])return i=e,s=o.special[e],!1}),i){var l=getEventName(o),d=!(l&&"bind"!==i);return r={parent:canAssign_1_3_3_canAssign({source:scopeBindingStr,name:o.special.raw?"\""+a+"\"":a},siblingBindingRules[i].parent),child:canAssign_1_3_3_canAssign({source:getChildBindingStr(o.tokens,t&&t.favorViewModel),name:o.tokens[s-1],event:l},siblingBindingRules[i].child),bindingAttributeName:n,initializeValues:d},"~"===a.trim().charAt(0)&&(r.child.setCompute=!0),r}}var makeDataBinding=function(e,t,n){var a=getSiblingBindingData(e,n);if(a){var o=getObservableFrom[a.parent.source](a.parent,t,n),r=getObservableFrom[a.child.source](a.child,t,n,o),i=!!a.child.exports,s=!!a.parent.exports,l={child:r,childToParent:i,cycles:!0===i&&!0===s?0:100,onInitDoNotUpdateChild:n.alreadyUpdatedChild||!1===a.initializeValues,onInitDoNotUpdateParent:!1===a.initializeValues,onInitSetUndefinedParentIfChildIsDefined:!0,parent:o,parentToChild:s,priority:t.parentNodeList?t.parentNodeList.nesting+1:void 0,queue:"dom",sticky:a.parent.syncSibling?"childSticksToParent":void 0,element:t.element},d=new canBind_1_5_1_canBind(l);return{siblingBindingData:a,binding:d}}},cleanVMName=function(e){return e.replace(/@/g,"")},canStacheBindings={behaviors:behaviors,getSiblingBindingData:getSiblingBindingData,bindings:bindings,getObservableFrom:getObservableFrom,makeDataBinding:makeDataBinding};canStacheBindings[canSymbol_1_6_5_canSymbol.for("can.callbackMap")]=bindings;var canStacheBindings_5_0_4_canStacheBindings=canStacheBindings;const rendererSymbol=Symbol.for("can.stacheRenderer"),viewInsertSymbol$2=Symbol.for("can.viewInsert");canStache_5_1_1_canStache.addBindings(canStacheBindings_5_0_4_canStacheBindings);var mixinStacheView=function(e=HTMLElement){class t extends e{render(e,t){super.render&&super.render(e);let n=this.constructor[rendererSymbol];if(!n){const e=this.constructor.view,t=canReflect_1_18_0_canReflect.getName(this.constructor)+"View";n="function"==typeof e?e:canStache_5_1_1_canStache(t,e||""),this.constructor[rendererSymbol]=n}const a=n(new canViewScope_4_13_6_canViewScope(this,null,{viewModel:!0}),t),o=this.viewRoot||this;canDomMutate_2_0_8_node.appendChild.call(o,a)}connect(){super.connect&&super.connect();const e=canDomMutate_2_0_8_canDomMutate.onNodeRemoved(this,()=>{var t=this.ownerDocument,n=t.contains?t:t.documentElement;n&&n.contains(this)||(e(),this.disconnect())})}[viewInsertSymbol$2](){return this}}return t.prototype[Symbol.for("can.preventDataBindings")]=!0,t};const viewModelSymbol$2=Symbol.for("can.viewModel");var mixinViewmodelSymbol=function(e=HTMLElement){class t extends e{}return canDefineLazyValue_1_1_1_defineLazyValue(t.prototype,viewModelSymbol$2,function(){return this}),t},utils$1={isContainer:function(e){var t=typeof e;return e&&("object"===t||"function"===t)},strReplacer:/\{([^\}]+)\}/g,parts:function(e){return Array.isArray(e)?e:"undefined"==typeof e?[]:(e+"").replace(/\[/g,".").replace(/]/g,"").split(".")}},canKey_1_2_1_utils=utils$1,_delete=function(e,t){for(var n=canKey_1_2_1_utils.parts(t),a=e,o=0;o<n.length-1;o++)a&&(a=canReflect_1_18_0_canReflect.getKeyValue(a,n[o]));a&&canReflect_1_18_0_canReflect.deleteKeyValue(a,n[n.length-1])};function get(e,t){var n=canKey_1_2_1_utils.parts(t),a=n.length,o,r,s;if(!a)return e;for(o=e,r=0;r<a&&canKey_1_2_1_utils.isContainer(o)&&null!==o;r++)s=o,o=canReflect_1_18_0_canReflect.getKeyValue(s,n[r]);return o}var get_1=get,replaceWith=function(e,t,n,a){return e.replace(canKey_1_2_1_utils.strReplacer,function(e,o){var r=get_1(t,o);return a&&_delete(t,o),n?n(o,r):r})},setValueSymbol$3=canSymbol_1_6_5_canSymbol.for("can.setValue");function set$1(e,t,n){for(var a=canKey_1_2_1_utils.parts(t),o=e,r=a.length,s=0;s<r-1&&canKey_1_2_1_utils.isContainer(o);s++)o=canReflect_1_18_0_canReflect.getKeyValue(o,a[s]);if(o)canReflect_1_18_0_canReflect.setKeyValue(o,a[s],n);else throw new TypeError("Cannot set value at key path '"+t+"'");return e}var set_1=set$1,walk=function(e,t,n){var a=canKey_1_2_1_utils.parts(t),o=a.length,r,s,l,d;if(o)for(r=e,s=0;s<o;s++){l=r,d=a[s],r=canKey_1_2_1_utils.isContainer(l)&&canReflect_1_18_0_canReflect.getKeyValue(l,d);var p=n({parent:l,key:d,value:r},s);void 0!==p&&(r=p)}};function deleteKeys(e){for(var t=e.length-1,n;0<=t;t--)if(n=e[t],delete n.parent[n.key],0!==canReflect_1_18_0_canReflect.size(n.parent))return}var transform=function(e,t){var n=canReflect_1_18_0_canReflect.serialize(e);return canReflect_1_18_0_canReflect.eachKey(t,function(e,t){var a=canKey_1_2_1_utils.parts(t),o=canKey_1_2_1_utils.parts(e),r=[];walk(n,a,function(e){r.push(e)});var i=r[r.length-1],s=i.value;void 0!==s&&(walk(n,o,function(e,t){return t<o.length-1&&!e.value?e.parent[e.key]={}:void(t===o.length-1&&(e.parent[e.key]=s))}),deleteKeys(r))}),n},canKey_1_2_1_canKey=canNamespace_1_0_0_canNamespace.key={deleteKey:_delete,get:get_1,replaceWith:replaceWith,set:set_1,transform:transform,walk:walk},key=function(e,t){var n=canKey_1_2_1_utils.parts(t),a=n.length-1,o=new canObservation_4_2_0_canObservation(function(){var t;return canKey_1_2_1_canKey.walk(e,n,function(e,n){n===a&&(t=e.value)}),t}),r=function(t){canKey_1_2_1_canKey.set(e,n,t)};Object.defineProperty(o,"value",{get:o.get,set:r});return canReflect_1_18_0_canReflect.assignSymbols(o,{"can.setValue":r})};const getValueSymbol$3=Symbol.for("can.getValue"),setValueSymbol$4=Symbol.for("can.setValue"),metaSymbol$3=Symbol.for("can.meta");var mixinBindings=function(e=HTMLElement){return class extends e{bindings(e){void 0===this[metaSymbol$3]&&(this[metaSymbol$3]={});const t={};return canReflect_1_18_0_canReflect.eachKey(e,(e,n)=>{const a=key(this,n);t[n]={parent:e,child:a}}),this[metaSymbol$3]._connectedBindings=t,this}initialize(e){var t=this[metaSymbol$3]&&this[metaSymbol$3]._connectedBindings;t&&(e=e||{},this[metaSymbol$3]._bindings===void 0&&(this[metaSymbol$3]._bindings=[]),canReflect_1_18_0_canReflect.eachKey(t,(t,n)=>{const{child:a,parent:o}=t;var r=null!=o&&!!o[getValueSymbol$3],i=null!=o&&!!o[setValueSymbol$4];if(r||i){var s=new canBind_1_5_1_canBind({child:a,parent:o,queue:"dom",element:this});this[metaSymbol$3]._bindings.push({binding:s,siblingBindingData:{parent:{source:"scope",exports:r},child:{source:"viewModel",exports:i,name:n},bindingAttributeName:n}})}else e[n]=o}),this[metaSymbol$3].other=!0),super.initialize&&super.initialize(e)}render(e,t){const n=this.viewRoot||this;n.innerHTML="",super.render&&super.render(e,t)}disconnect(){delete this[metaSymbol$3]._bindings,super.disconnect&&super.disconnect()}}};const metaSymbol$4=Symbol.for("can.meta"),inSetupSymbol$5=Symbol.for("can.initializing");var mixinInitializeBindings=function(e=HTMLElement){return class extends e{initialize(e){var t=this[metaSymbol$4]&&this[metaSymbol$4]._bindings;if(t&&t.length){const a=this[inSetupSymbol$5];this[inSetupSymbol$5]=!1;const o={element:this};var n=canStacheBindings_5_0_4_canStacheBindings.behaviors.initializeViewModel(t,e,e=>(super.initialize(e),this),o);this[metaSymbol$4]._connectedBindingsTeardown=function(){for(var e in n.onTeardowns)n.onTeardowns[e]()},this[inSetupSymbol$5]=a}else super.initialize&&super.initialize(e)}disconnect(){this[metaSymbol$4]&&this[metaSymbol$4]._connectedBindingsTeardown&&(this[metaSymbol$4]._connectedBindingsTeardown(),this[metaSymbol$4]._connectedBindingsTeardown=null),super.disconnect&&super.disconnect()}}};const{mixins:mixins$1}=mixins,metaSymbol$5=Symbol.for("can.meta");function baseAttributeChangedCallback(){this.attributeChangedCallback!==baseAttributeChangedCallback&&this.attributeChangedCallback.apply(this,arguments)}var mixinBindBehaviour=function(e=HTMLElement){class t extends e{initialize(e){void 0===this[metaSymbol$5]&&(this[metaSymbol$5]={}),void 0===this[metaSymbol$5]._bindings&&(this[metaSymbol$5]._bindings=[]),Object.keys(this.constructor[metaSymbol$5]._uninitializedBindings).forEach(e=>{const t=this.constructor[metaSymbol$5]._uninitializedBindings[e](this);this[metaSymbol$5]._bindings.push({binding:t,siblingBindingData:{parent:{source:"scope",exports:!0},child:{source:"viewModel",exports:!0,name:e},bindingAttributeName:e}})}),super.initialize&&super.initialize(e)}}return Object.defineProperty(t.prototype,"attributeChangedCallback",{value:baseAttributeChangedCallback,writable:!0}),t},initializeObservedAttributes=function(e){Object.defineProperty(e,"observedAttributes",{get(){let e=!1;mixins$1.finalizeClass(this),void 0===this[metaSymbol$5]&&(this[metaSymbol$5]={}),void 0===this[metaSymbol$5]._uninitializedBindings&&(this[metaSymbol$5]._uninitializedBindings={});const t=this.prototype._define&&this.prototype._define.definitions;return t&&Object.keys(t).forEach(n=>{const a=t[n];if("function"==typeof a.bind){const t=a.bind(n,this);this[metaSymbol$5]._uninitializedBindings[n]=t,e=!0}}),e?this.observedAttributes:[]}})};mixinBindBehaviour.initializeObservedAttributes=initializeObservedAttributes;const{initializeObservedAttributes:initializeObservedAttributes$1}=mixinBindBehaviour,{createConstructorFunction:createConstructorFunction$1}=mixins,initializeSymbol=Symbol.for("can.initialize"),teardownHandlersSymbol$1=Symbol.for("can.teardownHandlers"),isViewSymbol$3=Symbol.for("can.isView");function rendererWasCalledWithData(e){return e instanceof canViewScope_4_13_6_canViewScope&&e._parent&&e._parent._context instanceof canViewScope_4_13_6_canViewScope.TemplateContext}function addContext(e,t){function n(n){return rendererWasCalledWithData(n)?e(t.scope.addLetContext(n._context)):e(t.scope.addLetContext(n))}return n[isViewSymbol$3]=!0,n}function DeriveElement(e=HTMLElement){class t extends mixinLifecycleMethods(mixinBindings(mixinBindBehaviour(mixinInitializeBindings(mixinViewmodelSymbol(mixinStacheView(mixinProps(e))))))){[initializeSymbol](e,t){const n=canStacheBindings_5_0_4_canStacheBindings.behaviors.viewModel(e,t,function(n){for(let e in t.templates)n[e]=addContext(t.templates[e],t);return e.render(n),e});e[teardownHandlersSymbol$1]&&e[teardownHandlersSymbol$1].push(n)}}const n=createConstructorFunction$1(t);return initializeObservedAttributes$1(n),n}var canStacheElement=canNamespace_1_0_0_canNamespace.StacheElement=DeriveElement();export{canStacheElement as StacheElement};